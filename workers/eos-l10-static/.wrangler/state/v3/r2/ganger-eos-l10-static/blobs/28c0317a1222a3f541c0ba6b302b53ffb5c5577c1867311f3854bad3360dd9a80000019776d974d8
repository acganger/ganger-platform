(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[791],{8016:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(1524).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},274:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(1524).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},4967:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(1524).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},8991:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(1524).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},474:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(1524).Z)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},3795:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(1524).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},4064:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(1524).Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]])},3017:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(1524).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},3186:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(1524).Z)("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]])},1840:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(1524).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},1362:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(1524).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3491:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(1524).Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},3247:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(1524).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},6247:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(1524).Z)("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]])},3272:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(1524).Z)("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]])},3708:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/scorecard/metrics",function(){return s(917)}])},2619:function(e,t,s){"use strict";s.d(t,{AJ:function(){return l},ZP:function(){return c}});var r=s(1549),a=s(4168),n=s(474),i=s(3247);function c(e){let{page:t="dashboard",showCount:s=!0,showAvatars:c=!0,maxAvatars:l=5}=e,{onlineUsers:d}=(0,a.o)(t);if(0===d.length)return null;let o=d.slice(0,l),m=Math.max(0,d.length-l);return(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[c&&(0,r.jsxs)("div",{className:"flex -space-x-2",children:[o.map(e=>(0,r.jsxs)("div",{className:"relative",title:"".concat(e.full_name," - ").concat(e.page),children:[e.avatar_url?(0,r.jsx)("img",{src:e.avatar_url,alt:e.full_name,className:"w-8 h-8 rounded-full border-2 border-white bg-gray-100"}):(0,r.jsx)("div",{className:"w-8 h-8 rounded-full border-2 border-white bg-eos-100 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-xs font-medium text-eos-700",children:e.full_name.charAt(0).toUpperCase()})}),(0,r.jsx)("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-400 border-2 border-white rounded-full"})]},e.user_id)),m>0&&(0,r.jsx)("div",{className:"w-8 h-8 rounded-full border-2 border-white bg-gray-200 flex items-center justify-center",children:(0,r.jsxs)("span",{className:"text-xs font-medium text-gray-600",children:["+",m]})})]}),s&&(0,r.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[(0,r.jsx)(n.Z,{className:"w-2 h-2 fill-green-400 text-green-400"}),(0,r.jsxs)("span",{children:[d.length," online"]})]}),!c&&(0,r.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[(0,r.jsx)(i.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:d.length})]})]})}function l(){let{onlineUsers:e}=(0,a.o)();return(0,r.jsxs)("div",{className:"hidden sm:flex items-center space-x-3 bg-white rounded-lg px-3 py-2 shadow-sm border",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)(n.Z,{className:"w-2 h-2 fill-green-400 text-green-400"}),(0,r.jsxs)("span",{className:"text-sm text-gray-600 font-medium",children:[e.length," team member",1!==e.length?"s":""," online"]})]}),e.length>0&&(0,r.jsxs)("div",{className:"flex -space-x-2",children:[e.slice(0,3).map(e=>(0,r.jsx)("div",{className:"relative",title:e.full_name,children:e.avatar_url?(0,r.jsx)("img",{src:e.avatar_url,alt:e.full_name,className:"w-6 h-6 rounded-full border-2 border-white"}):(0,r.jsx)("div",{className:"w-6 h-6 rounded-full border-2 border-white bg-eos-100 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-xs font-medium text-eos-700",children:e.full_name.charAt(0).toUpperCase()})})},e.user_id)),e.length>3&&(0,r.jsx)("div",{className:"w-6 h-6 rounded-full border-2 border-white bg-gray-200 flex items-center justify-center",children:(0,r.jsxs)("span",{className:"text-xs font-medium text-gray-600",children:["+",e.length-3]})})]})]})}},4168:function(e,t,s){"use strict";s.d(t,{o:function(){return i}});var r=s(4194),a=s(1700),n=s(3459);function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dashboard",{user:t,activeTeam:s}=(0,a.aC)(),[i,c]=(0,r.useState)([]),[l,d]=(0,r.useState)(null);return(0,r.useEffect)(()=>{if(!t||!s)return;let r="team-".concat(s.id),a=n.OQ.channel(r,{config:{presence:{key:t.id}}}),i=()=>{var s,r;let n={user_id:t.id,email:t.email||"",full_name:(null===(s=t.user_metadata)||void 0===s?void 0:s.full_name)||t.email||"",avatar_url:null===(r=t.user_metadata)||void 0===r?void 0:r.avatar_url,page:e,last_seen:new Date().toISOString()};d(n),a.track(n)};a.on("presence",{event:"sync"},()=>{let e=a.presenceState(),s=[];Object.keys(e).forEach(t=>{let r=e[t];if(r&&r.length>0){let e=r.reduce((e,t)=>{let s=t.last_seen||new Date().toISOString(),r=e.last_seen||new Date().toISOString();return new Date(s)>new Date(r)?t:e});s.push(e)}}),c(s.filter(e=>e.user_id!==(null==t?void 0:t.id)).sort((e,t)=>new Date(t.last_seen||new Date).getTime()-new Date(e.last_seen||new Date).getTime()))}).on("presence",{event:"join"},e=>{let{key:t,newPresences:s}=e}).on("presence",{event:"leave"},e=>{let{key:t,leftPresences:s}=e}).subscribe(async e=>{"SUBSCRIBED"===e&&i()});let l=setInterval(()=>{"joined"===a.state&&i()},3e4),o=()=>{"visible"===document.visibilityState&&i()};return document.addEventListener("visibilitychange",o),()=>{clearInterval(l),document.removeEventListener("visibilitychange",o),n.OQ.removeChannel(a)}},[t,s,e]),{onlineUsers:i,myPresence:l}}},917:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return _}});var r=s(1549),a=s(4194),n=s(55),i=s.n(n),c=s(5560),l=s(1700),d=s(4168),o=s(755),m=s(2619),u=s(3459),x=s(274),h=s(8016),y=s(1362),f=s(7307),p=s(6637),j=s(1840);let v=(0,s(1524).Z)("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);var g=s(2122),N=s(2799),b=s(3491),w=s(6072),k=s(6204);function _(){let{activeTeam:e,user:t,userRole:s}=(0,l.aC)(),{onlineUsers:n}=(0,d.o)("scorecard-metrics"),[_,Z]=(0,a.useState)(null),[M,S]=(0,a.useState)([]),[q,C]=(0,a.useState)(!0),[D,O]=(0,a.useState)(null),[E,P]=(0,a.useState)(!1),[z,F]=(0,a.useState)(null),[T,A]=(0,a.useState)(!1),[I,Q]=(0,a.useState)({name:"",description:"",goal:"",measurement_type:"number",frequency:"weekly",owner_id:(null==t?void 0:t.id)||""});(0,a.useEffect)(()=>{e&&H()},[e]),(0,a.useEffect)(()=>{t&&!I.owner_id&&Q(e=>({...e,owner_id:t.id}))},[t]);let H=async()=>{if(e)try{C(!0),O(null);let{data:t,error:s}=await u.OQ.from("scorecards").select("*").eq("team_id",e.id).eq("active",!0).single();if(s&&"PGRST116"===s.code){let{data:s,error:r}=await u.OQ.from("scorecards").insert({team_id:e.id,name:"".concat(e.name," Scorecard"),description:"Team performance metrics",active:!0}).select().single();if(r)throw r;t=s}else if(s)throw s;Z(t);let{data:r,error:a}=await u.OQ.from("scorecard_metrics").select("\n          *,\n          owner:users(full_name, email, avatar_url)\n        ").eq("scorecard_id",t.id).order("sort_order");if(a)throw a;S(r||[])}catch(e){O(e instanceof Error?e.message:"Failed to load metrics")}finally{C(!1)}},L=async e=>{if(!e.destination)return;let{source:t,destination:s}=e;if(t.index===s.index)return;let r=Array.from(M),[a]=r.splice(t.index,1);r.splice(s.index,0,a);let n=r.map((e,t)=>({...e,sort_order:t+1}));S(n);try{for(let e of n)await u.OQ.from("scorecard_metrics").update({sort_order:e.sort_order}).eq("id",e.id)}catch(e){H()}},U=()=>{Q({name:"",description:"",goal:"",measurement_type:"number",frequency:"weekly",owner_id:(null==t?void 0:t.id)||""}),F(null)},V=e=>{Q({name:e.name,description:e.description||"",goal:e.goal.toString(),measurement_type:e.measurement_type,frequency:e.frequency,owner_id:e.owner_id}),F(e),P(!0)},R=async e=>{if(e.preventDefault(),_&&t){A(!0);try{let e=parseFloat(I.goal)||0;if(z){let{error:t}=await u.OQ.from("scorecard_metrics").update({name:I.name,description:I.description||null,goal:e,measurement_type:I.measurement_type,frequency:I.frequency,owner_id:I.owner_id}).eq("id",z.id);if(t)throw t}else{let t=Math.max(...M.map(e=>e.sort_order),0)+1,{error:s}=await u.OQ.from("scorecard_metrics").insert({scorecard_id:_.id,name:I.name,description:I.description||null,goal:e,measurement_type:I.measurement_type,frequency:I.frequency,owner_id:I.owner_id,sort_order:t,active:!0});if(s)throw s}P(!1),U(),H()}catch(e){alert("Failed to save metric. Please try again.")}finally{A(!1)}}},B=async e=>{if(confirm('Are you sure you want to delete "'.concat(e.name,'"? This action cannot be undone.')))try{let{error:t}=await u.OQ.from("scorecard_metrics").update({active:!1}).eq("id",e.id);if(t)throw t;H()}catch(e){alert("Failed to delete metric. Please try again.")}},W=(e,t)=>{switch(e.measurement_type){case"currency":return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(t);case"percentage":return"".concat(t,"%");case"boolean":return t?"Yes":"No";default:return t.toLocaleString()}};return"viewer"===s?(0,r.jsx)(l.a1,{children:(0,r.jsx)(l.P6,{children:(0,r.jsx)(o.Z,{children:(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(x.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:"Access Restricted"}),(0,r.jsx)("p",{className:"text-gray-500",children:"You don't have permission to manage scorecard metrics."}),(0,r.jsx)(c.Z,{href:"/scorecard",className:"btn-primary mt-4",children:"Back to Scorecard"})]})})})}):q?(0,r.jsx)(l.a1,{children:(0,r.jsx)(l.P6,{children:(0,r.jsx)(o.Z,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"skeleton h-8 w-64"}),(0,r.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,r.jsx)("div",{className:"card",children:(0,r.jsxs)("div",{className:"card-content",children:[(0,r.jsx)("div",{className:"skeleton h-6 w-full mb-2"}),(0,r.jsx)("div",{className:"skeleton h-4 w-3/4"})]})},t))})]})})})}):(0,r.jsx)(l.a1,{children:(0,r.jsx)(l.P6,{children:(0,r.jsxs)("div",{children:[(0,r.jsxs)(i(),{children:[(0,r.jsx)("title",{children:"Scorecard Metrics - EOS L10 Platform"}),(0,r.jsx)("meta",{name:"description",content:"Manage your team scorecard metrics and configuration"})]}),(0,r.jsx)(o.Z,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(c.Z,{href:"/scorecard",className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:(0,r.jsx)(h.Z,{className:"h-5 w-5"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,r.jsx)(y.Z,{className:"h-6 w-6 mr-2 text-eos-600"}),"Scorecard Metrics"]}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"Configure and manage your team's performance metrics"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(m.ZP,{page:"scorecard-metrics"}),(0,r.jsxs)("button",{onClick:()=>{U(),P(!0)},className:"btn-primary flex items-center",children:[(0,r.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"Add Metric"]})]})]}),D&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,r.jsxs)("p",{className:"text-red-800 text-sm",children:["Error: ",D]})}),E&&(0,r.jsx)("div",{className:"card",children:(0,r.jsxs)("form",{onSubmit:R,children:[(0,r.jsx)("div",{className:"card-header",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"card-title",children:z?"Edit Metric":"Add New Metric"}),(0,r.jsx)("button",{type:"button",onClick:()=>{P(!1),U()},className:"p-1 text-gray-400 hover:text-gray-600",children:(0,r.jsx)(p.Z,{className:"h-5 w-5"})})]})}),(0,r.jsxs)("div",{className:"card-content space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Metric Name *"}),(0,r.jsx)("input",{type:"text",required:!0,value:I.name,onChange:e=>Q({...I,name:e.target.value}),placeholder:"e.g., Weekly Revenue",className:"input",maxLength:100})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Goal/Target *"}),(0,r.jsx)("input",{type:"number",required:!0,step:"0.01",value:I.goal,onChange:e=>Q({...I,goal:e.target.value}),placeholder:"100",className:"input"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Measurement Type *"}),(0,r.jsxs)("select",{required:!0,value:I.measurement_type,onChange:e=>Q({...I,measurement_type:e.target.value}),className:"input",children:[(0,r.jsx)("option",{value:"number",children:"Number"}),(0,r.jsx)("option",{value:"percentage",children:"Percentage"}),(0,r.jsx)("option",{value:"currency",children:"Currency"}),(0,r.jsx)("option",{value:"boolean",children:"Yes/No"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Frequency *"}),(0,r.jsxs)("select",{required:!0,value:I.frequency,onChange:e=>Q({...I,frequency:e.target.value}),className:"input",children:[(0,r.jsx)("option",{value:"weekly",children:"Weekly"}),(0,r.jsx)("option",{value:"monthly",children:"Monthly"}),(0,r.jsx)("option",{value:"daily",children:"Daily"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,r.jsx)("textarea",{value:I.description,onChange:e=>Q({...I,description:e.target.value}),rows:3,placeholder:"Optional: Describe what this metric measures...",className:"input",maxLength:300})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Metric Owner *"}),(0,r.jsx)("select",{required:!0,value:I.owner_id,onChange:e=>Q({...I,owner_id:e.target.value}),className:"input",children:(0,r.jsxs)("option",{value:(null==t?void 0:t.id)||"",children:["Me (",(null==t?void 0:t.email)||"",")"]})}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Who is responsible for tracking this metric?"})]})]}),(0,r.jsx)("div",{className:"card-footer",children:(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[(0,r.jsx)("button",{type:"button",onClick:()=>{P(!1),U()},className:"btn-secondary",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:T,className:"btn-primary",children:T?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j.Z,{className:"h-4 w-4 mr-2"}),z?"Update":"Create"," Metric"]})})]})})]})}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("div",{className:"card-header",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("h3",{className:"card-title",children:["Team Metrics (",M.filter(e=>e.active).length,")"]}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Drag to reorder"})]})}),(0,r.jsx)("div",{className:"card-content",children:0===M.filter(e=>e.active).length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(x.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No metrics configured"}),(0,r.jsx)("p",{className:"text-gray-500 mb-4",children:"Add your first scorecard metric to start tracking performance"}),(0,r.jsxs)("button",{onClick:()=>{U(),P(!0)},className:"btn-primary",children:[(0,r.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"Add First Metric"]})]}):(0,r.jsx)(k.Z5,{onDragEnd:L,children:(0,r.jsx)(k.bK,{droppableId:"metrics-list",children:(e,t)=>(0,r.jsxs)("div",{...e.droppableProps,ref:e.innerRef,className:"space-y-3 ".concat(t.isDraggingOver?"bg-blue-50 rounded-lg p-2":""),children:[M.filter(e=>e.active).map((e,t)=>(0,r.jsx)(k._l,{draggableId:e.id,index:t,children:(t,s)=>{var a;return(0,r.jsx)("div",{ref:t.innerRef,...t.draggableProps,className:"border rounded-lg p-4 bg-white hover:shadow-md transition-shadow ".concat(s.isDragging?"shadow-lg":""),children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{...t.dragHandleProps,className:"flex-shrink-0 p-1 rounded hover:bg-gray-100 cursor-grab active:cursor-grabbing",children:(0,r.jsx)(v,{className:"h-5 w-5 text-gray-400"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900",children:e.name}),e.description&&(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,r.jsx)("button",{onClick:()=>V(e),className:"p-1 text-gray-400 hover:text-gray-600",children:(0,r.jsx)(g.Z,{className:"h-4 w-4"})}),(0,r.jsx)("button",{onClick:()=>B(e),className:"p-1 text-gray-400 hover:text-red-600",children:(0,r.jsx)(N.Z,{className:"h-4 w-4"})})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-3 text-sm text-gray-500",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(b.Z,{className:"h-4 w-4 mr-1"}),"Goal: ",W(e,e.goal)]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(x.Z,{className:"h-4 w-4 mr-1"}),e.measurement_type]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("span",{className:"capitalize",children:e.frequency}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(w.Z,{className:"h-4 w-4 mr-1"}),(null===(a=e.owner)||void 0===a?void 0:a.full_name)||"Unassigned"]})]})]})]})]})})}},e.id)),e.placeholder]})})})})]})]})})]})})})}}},function(e){e.O(0,[505,471,755,888,774,179],function(){return e(e.s=3708)}),_N_E=e.O()}]);