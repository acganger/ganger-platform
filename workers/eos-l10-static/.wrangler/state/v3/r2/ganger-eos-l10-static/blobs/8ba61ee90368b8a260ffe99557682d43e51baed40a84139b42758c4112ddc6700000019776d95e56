(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{1524:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(4194),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let s=(0,a.forwardRef)(({color:s="currentColor",size:i=24,strokeWidth:l=2,absoluteStrokeWidth:c,className:d="",children:o,...m},u)=>(0,a.createElement)("svg",{ref:u,...r,width:i,height:i,stroke:s,strokeWidth:c?24*Number(l)/Number(i):l,className:["lucide",`lucide-${n(e)}`,d].join(" "),...m},[...t.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(o)?o:[o]]));return s.displayName=`${e}`,s}},6159:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1524).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},274:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1524).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},4967:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1524).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},4864:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1524).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},7297:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1524).Z)("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]])},2805:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1524).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},8991:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1524).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},474:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1524).Z)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},2473:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1524).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},3795:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1524).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},4064:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1524).Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]])},3017:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1524).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},3186:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1524).Z)("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]])},4222:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1524).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},8133:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1524).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},1362:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1524).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3491:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1524).Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},3247:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1524).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},6247:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1524).Z)("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]])},3272:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1524).Z)("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]])},6637:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1524).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},708:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(352)}])},2619:function(e,t,s){"use strict";s.d(t,{AJ:function(){return c},ZP:function(){return l}});var a=s(1549),r=s(4168),n=s(474),i=s(3247);function l(e){let{page:t="dashboard",showCount:s=!0,showAvatars:l=!0,maxAvatars:c=5}=e,{onlineUsers:d}=(0,r.o)(t);if(0===d.length)return null;let o=d.slice(0,c),m=Math.max(0,d.length-c);return(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[l&&(0,a.jsxs)("div",{className:"flex -space-x-2",children:[o.map(e=>(0,a.jsxs)("div",{className:"relative",title:"".concat(e.full_name," - ").concat(e.page),children:[e.avatar_url?(0,a.jsx)("img",{src:e.avatar_url,alt:e.full_name,className:"w-8 h-8 rounded-full border-2 border-white bg-gray-100"}):(0,a.jsx)("div",{className:"w-8 h-8 rounded-full border-2 border-white bg-eos-100 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-xs font-medium text-eos-700",children:e.full_name.charAt(0).toUpperCase()})}),(0,a.jsx)("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-400 border-2 border-white rounded-full"})]},e.user_id)),m>0&&(0,a.jsx)("div",{className:"w-8 h-8 rounded-full border-2 border-white bg-gray-200 flex items-center justify-center",children:(0,a.jsxs)("span",{className:"text-xs font-medium text-gray-600",children:["+",m]})})]}),s&&(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[(0,a.jsx)(n.Z,{className:"w-2 h-2 fill-green-400 text-green-400"}),(0,a.jsxs)("span",{children:[d.length," online"]})]}),!l&&(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[(0,a.jsx)(i.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:d.length})]})]})}function c(){let{onlineUsers:e}=(0,r.o)();return(0,a.jsxs)("div",{className:"hidden sm:flex items-center space-x-3 bg-white rounded-lg px-3 py-2 shadow-sm border",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(n.Z,{className:"w-2 h-2 fill-green-400 text-green-400"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600 font-medium",children:[e.length," team member",1!==e.length?"s":""," online"]})]}),e.length>0&&(0,a.jsxs)("div",{className:"flex -space-x-2",children:[e.slice(0,3).map(e=>(0,a.jsx)("div",{className:"relative",title:e.full_name,children:e.avatar_url?(0,a.jsx)("img",{src:e.avatar_url,alt:e.full_name,className:"w-6 h-6 rounded-full border-2 border-white"}):(0,a.jsx)("div",{className:"w-6 h-6 rounded-full border-2 border-white bg-eos-100 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-xs font-medium text-eos-700",children:e.full_name.charAt(0).toUpperCase()})})},e.user_id)),e.length>3&&(0,a.jsx)("div",{className:"w-6 h-6 rounded-full border-2 border-white bg-gray-200 flex items-center justify-center",children:(0,a.jsxs)("span",{className:"text-xs font-medium text-gray-600",children:["+",e.length-3]})})]})]})}},4168:function(e,t,s){"use strict";s.d(t,{o:function(){return i}});var a=s(4194),r=s(1700),n=s(3459);function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dashboard",{user:t,activeTeam:s}=(0,r.aC)(),[i,l]=(0,a.useState)([]),[c,d]=(0,a.useState)(null);return(0,a.useEffect)(()=>{if(!t||!s)return;let a="team-".concat(s.id),r=n.OQ.channel(a,{config:{presence:{key:t.id}}}),i=()=>{var s,a;let n={user_id:t.id,email:t.email||"",full_name:(null===(s=t.user_metadata)||void 0===s?void 0:s.full_name)||t.email||"",avatar_url:null===(a=t.user_metadata)||void 0===a?void 0:a.avatar_url,page:e,last_seen:new Date().toISOString()};d(n),r.track(n)};r.on("presence",{event:"sync"},()=>{let e=r.presenceState(),s=[];Object.keys(e).forEach(t=>{let a=e[t];if(a&&a.length>0){let e=a.reduce((e,t)=>{let s=t.last_seen||new Date().toISOString(),a=e.last_seen||new Date().toISOString();return new Date(s)>new Date(a)?t:e});s.push(e)}}),l(s.filter(e=>e.user_id!==(null==t?void 0:t.id)).sort((e,t)=>new Date(t.last_seen||new Date).getTime()-new Date(e.last_seen||new Date).getTime()))}).on("presence",{event:"join"},e=>{let{key:t,newPresences:s}=e}).on("presence",{event:"leave"},e=>{let{key:t,leftPresences:s}=e}).subscribe(async e=>{"SUBSCRIBED"===e&&i()});let c=setInterval(()=>{"joined"===r.state&&i()},3e4),o=()=>{"visible"===document.visibilityState&&i()};return document.addEventListener("visibilitychange",o),()=>{clearInterval(c),document.removeEventListener("visibilitychange",o),n.OQ.removeChannel(r)}},[t,s,e]),{onlineUsers:i,myPresence:c}}},4694:function(e,t,s){"use strict";s.d(t,{F:function(){return i}});var a=s(4194),r=s(1700),n=s(3459);function i(e){let{activeTeam:t}=(0,r.aC)(),s=e||(null==t?void 0:t.id),[i,m]=(0,a.useState)([]),[u,x]=(0,a.useState)([]),[h,g]=(0,a.useState)([]),[p,f]=(0,a.useState)([]),[y,v]=(0,a.useState)(!0),[j,N]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let e,t,a,r;if(!s){v(!1);return}let i=e=>{let{eventType:t,new:s,old:a}=e;m(e=>{switch(t){case"INSERT":return[...e,l(s)].sort((e,t)=>e.priority-t.priority);case"UPDATE":let r=l(s);return e.map(e=>e.id===r.id?r:e).sort((e,t)=>e.priority-t.priority);case"DELETE":return e.filter(e=>e.id!==a.id);default:return e}})},u=e=>{let{eventType:t,new:s,old:a}=e;x(e=>{switch(t){case"INSERT":return[c(s),...e];case"UPDATE":let r=c(s);return e.map(e=>e.id===r.id?r:e);case"DELETE":return e.filter(e=>e.id!==a.id);default:return e}})},h=e=>{let{eventType:t,new:s,old:a}=e;g(e=>{switch(t){case"INSERT":return[...e,d(s)].sort((e,t)=>new Date(e.due_date).getTime()-new Date(t.due_date).getTime());case"UPDATE":let r=d(s);return e.map(e=>e.id===r.id?r:e).sort((e,t)=>new Date(e.due_date).getTime()-new Date(t.due_date).getTime());case"DELETE":return e.filter(e=>e.id!==a.id);default:return e}})},p=e=>{let{eventType:t,new:s,old:a}=e;f(e=>{switch(t){case"INSERT":return[o(s),...e];case"UPDATE":let r=o(s);return e.map(e=>e.id===r.id?r:e);case"DELETE":return e.filter(e=>e.id!==a.id);default:return e}})};return(async()=>{try{v(!0),N(null);let{data:e,error:t}=await n.OQ.from("rocks").select("*").eq("team_id",s).order("priority",{ascending:!0});if(t)throw t;let{data:a,error:r}=await n.OQ.from("issues").select("*").eq("team_id",s).order("created_at",{ascending:!1});if(r)throw r;let{data:i,error:u}=await n.OQ.from("todos").select("*").eq("team_id",s).order("due_date",{ascending:!0});if(u)throw u;let{data:h,error:p}=await n.OQ.from("l10_meetings").select("*").eq("team_id",s).order("scheduled_date",{ascending:!1});if(p)throw p;m(e.map(e=>l(e))),x(a.map(e=>c(e))),g(i.map(e=>d(e))),f(h.map(e=>o(e))),v(!1)}catch(e){N(e instanceof Error?e.message:"Failed to load data"),v(!1)}})(),e=n.OQ.channel("rocks-".concat(s)).on("postgres_changes",{event:"*",schema:"public",table:"rocks",filter:"team_id=eq.".concat(s)},e=>{i(e)}).subscribe(),t=n.OQ.channel("issues-".concat(s)).on("postgres_changes",{event:"*",schema:"public",table:"issues",filter:"team_id=eq.".concat(s)},e=>{u(e)}).subscribe(),a=n.OQ.channel("todos-".concat(s)).on("postgres_changes",{event:"*",schema:"public",table:"todos",filter:"team_id=eq.".concat(s)},e=>{h(e)}).subscribe(),r=n.OQ.channel("meetings-".concat(s)).on("postgres_changes",{event:"*",schema:"public",table:"l10_meetings",filter:"team_id=eq.".concat(s)},e=>{p(e)}).subscribe(),()=>{e&&n.OQ.removeChannel(e),t&&n.OQ.removeChannel(t),a&&n.OQ.removeChannel(a),r&&n.OQ.removeChannel(r)}},[s]),{rocks:i,issues:u,todos:h,meetings:p,loading:y,error:j}}function l(e){return{id:e.id,team_id:e.team_id,owner_id:e.owner_id,title:e.title,description:e.description||void 0,quarter:e.quarter,status:e.status,completion_percentage:e.completion_percentage,priority:e.priority,due_date:e.due_date,created_at:e.created_at,updated_at:e.updated_at,milestones:[]}}function c(e){return{id:e.id,team_id:e.team_id,title:e.title,description:e.description||void 0,type:e.type,priority:e.priority,status:e.status,owner_id:e.owner_id||void 0,created_by:e.created_by,created_at:e.created_at,updated_at:e.updated_at,solved_at:e.solved_at||void 0,solution:e.solution||void 0,meeting_id:e.meeting_id||void 0}}function d(e){return{id:e.id,team_id:e.team_id,title:e.title,description:e.description||void 0,assigned_to:e.assigned_to,created_by:e.created_by,due_date:e.due_date,status:e.status,priority:e.priority,meeting_id:e.meeting_id||void 0,completed_at:e.completed_at||void 0,created_at:e.created_at,updated_at:e.updated_at}}function o(e){return{id:e.id,team_id:e.team_id,title:e.title,scheduled_date:e.scheduled_date,start_time:e.start_time,end_time:e.end_time||void 0,status:e.status,facilitator_id:e.facilitator_id,agenda:e.agenda||{segue:{duration:5,completed:!1},scorecard:{duration:5,completed:!1},rock_review:{duration:5,completed:!1},customer_employee_headlines:{duration:5,completed:!1},todo_review:{duration:5,completed:!1},ids:{duration:60,completed:!1},conclude:{duration:5,completed:!1}},created_at:e.created_at,updated_at:e.updated_at}}},352:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return q}});var a=s(1549),r=s(4194),n=s(55),i=s.n(n),l=s(1700),c=s(4694),d=s(755),o=s(3491),m=s(274),u=s(3247),x=s(2473),h=s(7297);function g(e){let{analytics:t,loading:s}=e,r=[{name:"Rock Completion",value:"".concat(t.rock_completion_rate,"%"),icon:o.Z,color:"text-green-600",bgColor:"bg-green-100"},{name:"Scorecard Compliance",value:"".concat(t.scorecard_compliance,"%"),icon:m.Z,color:"text-blue-600",bgColor:"bg-blue-100"},{name:"Meeting Attendance",value:"".concat(t.meeting_attendance,"%"),icon:u.Z,color:"text-purple-600",bgColor:"bg-purple-100"},{name:"Issue Resolution",value:"".concat(t.issue_resolution_time,"d"),icon:x.Z,color:"text-orange-600",bgColor:"bg-orange-100"},{name:"Todo Completion",value:"".concat(t.todo_completion_rate,"%"),icon:h.Z,color:"text-indigo-600",bgColor:"bg-indigo-100"}];return s?(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)("div",{className:"card",children:(0,a.jsx)("div",{className:"card-content p-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"skeleton w-10 h-10 rounded-lg mr-3"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"skeleton h-4 w-16 mb-2"}),(0,a.jsx)("div",{className:"skeleton h-6 w-12"})]})]})})},t))}):(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4",children:r.map(e=>{let t=e.icon;return(0,a.jsx)("div",{className:"card",children:(0,a.jsx)("div",{className:"card-content p-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"".concat(e.bgColor," p-2 rounded-lg mr-3"),children:(0,a.jsx)(t,{className:"h-6 w-6 ".concat(e.color)})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.value}),(0,a.jsx)("p",{className:"text-xs text-gray-500 truncate",children:e.name})]})]})})},e.name)})})}var p=s(6393),f=s(3186),y=s(6159),v=s(4864);function j(e){let{userRole:t}=e,s=(0,p.useRouter)(),r=[{name:"Start L10 Meeting",href:"/meeting/start",icon:f.Z,color:"bg-green-600 hover:bg-green-700",description:"Begin weekly Level 10 meeting",primary:!0},..."viewer"!==t?[{name:"Add Rock",href:"/rocks/new",icon:o.Z,color:"bg-blue-600 hover:bg-blue-700",description:"Create quarterly goal"},{name:"Create Issue",href:"/issues/new",icon:y.Z,color:"bg-red-600 hover:bg-red-700",description:"Report team issue"},{name:"Add Todo",href:"/todos/new",icon:h.Z,color:"bg-purple-600 hover:bg-purple-700",description:"Assign new task"}]:[],{name:"View Calendar",href:"/meetings",icon:v.Z,color:"bg-gray-600 hover:bg-gray-700",description:"See upcoming meetings"}];return(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"card-header",children:[(0,a.jsx)("h3",{className:"card-title",children:"Quick Actions"}),(0,a.jsx)("p",{className:"card-description",children:"Get started with common tasks"})]}),(0,a.jsx)("div",{className:"card-content",children:(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3",children:r.map(e=>{let t=e.icon;return(0,a.jsxs)("button",{onClick:()=>s.push(e.href),className:"group flex flex-col items-center p-4 rounded-lg text-white transition-all transform hover:scale-105 ".concat(e.color," ").concat(e.primary?"lg:col-span-2":""),children:[(0,a.jsx)(t,{className:"h-6 w-6 mb-2 ".concat(e.primary?"h-8 w-8":"")}),(0,a.jsx)("span",{className:"text-sm font-medium text-center ".concat(e.primary?"text-base":""),children:e.name}),(0,a.jsx)("span",{className:"text-xs opacity-80 text-center mt-1 hidden sm:block",children:e.description})]},e.name)})})})]})}var N=s(5560);let w=(0,s(1524).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);function b(e){let{meetings:t,loading:s}=e;return s?(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"card-header",children:(0,a.jsx)("h3",{className:"card-title",children:"Upcoming Meetings"})}),(0,a.jsx)("div",{className:"card-content",children:(0,a.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0].map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"skeleton w-10 h-10 rounded-lg mr-3"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"skeleton h-4 w-32 mb-2"}),(0,a.jsx)("div",{className:"skeleton h-3 w-24"})]})]},t))})})]}):(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"card-header",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"card-title",children:"Upcoming Meetings"}),(0,a.jsx)(N.Z,{href:"/meetings",className:"text-sm text-eos-600 hover:text-eos-700 font-medium",children:"View all"})]})}),(0,a.jsx)("div",{className:"card-content",children:0===t.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(v.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"No upcoming meetings scheduled"}),(0,a.jsxs)(N.Z,{href:"/meetings/new",className:"inline-flex items-center mt-4 text-sm text-eos-600 hover:text-eos-700",children:["Schedule a meeting",(0,a.jsx)(w,{className:"h-4 w-4 ml-1"})]})]}):(0,a.jsx)("div",{className:"space-y-3",children:t.map(e=>(0,a.jsx)(N.Z,{href:"/meetings/".concat(e.id),className:"block p-3 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"bg-eos-100 p-2 rounded-lg mr-3",children:(0,a.jsx)(v.Z,{className:"h-5 w-5 text-eos-600"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.title}),(0,a.jsxs)("div",{className:"flex items-center text-xs text-gray-500 mt-1",children:[(0,a.jsx)(x.Z,{className:"h-3 w-3 mr-1"}),new Date(e.scheduled_date).toLocaleDateString()," at"," ",e.start_time]})]}),(0,a.jsx)("div",{className:"flex items-center text-xs text-gray-400",children:(0,a.jsx)(w,{className:"h-4 w-4"})})]})},e.id))})})]})}function _(e){let{rocks:t,issues:s,todos:r,loading:n}=e;if(n)return(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"card-header",children:(0,a.jsx)("h3",{className:"card-title",children:"Recent Activity"})}),(0,a.jsx)("div",{className:"card-content",children:(0,a.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"skeleton w-8 h-8 rounded mr-3"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"skeleton h-4 w-40 mb-1"}),(0,a.jsx)("div",{className:"skeleton h-3 w-24"})]})]},t))})})]});let i=[...t.map(e=>({id:e.id,type:"rock",title:e.title,status:e.status,date:e.updated_at,href:"/rocks/".concat(e.id),icon:o.Z,color:"text-blue-600",bgColor:"bg-blue-100"})),...s.map(e=>({id:e.id,type:"issue",title:e.title,status:e.priority,date:e.created_at,href:"/issues/".concat(e.id),icon:y.Z,color:"text-red-600",bgColor:"bg-red-100"})),...r.map(e=>({id:e.id,type:"todo",title:e.title,status:e.priority,date:e.updated_at,href:"/todos/".concat(e.id),icon:h.Z,color:"text-purple-600",bgColor:"bg-purple-100"}))].sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()).slice(0,8),l=(e,t)=>{if("rock"===e)switch(t){case"on_track":return"text-green-600";case"off_track":return"text-red-600";case"complete":return"text-blue-600";default:return"text-gray-600"}if("issue"===e)switch(t){case"critical":return"text-red-600";case"high":return"text-orange-600";case"medium":return"text-yellow-600";default:return"text-gray-600"}if("todo"===e)switch(t){case"high":return"text-red-600";case"medium":return"text-yellow-600";default:return"text-green-600"}return"text-gray-600"};return(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"card-header",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"card-title",children:"Recent Activity"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(N.Z,{href:"/rocks",className:"text-xs text-gray-500 hover:text-gray-700",children:"Rocks"}),(0,a.jsx)("span",{className:"text-xs text-gray-300",children:"•"}),(0,a.jsx)(N.Z,{href:"/issues",className:"text-xs text-gray-500 hover:text-gray-700",children:"Issues"}),(0,a.jsx)("span",{className:"text-xs text-gray-300",children:"•"}),(0,a.jsx)(N.Z,{href:"/todos",className:"text-xs text-gray-500 hover:text-gray-700",children:"Todos"})]})]})}),(0,a.jsx)("div",{className:"card-content",children:0===i.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(x.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"No recent activity"})]}):(0,a.jsx)("div",{className:"space-y-2",children:i.map(e=>{let t=e.icon;return(0,a.jsxs)(N.Z,{href:e.href,className:"flex items-center p-2 hover:bg-gray-50 rounded-lg transition-colors group",children:[(0,a.jsx)("div",{className:"".concat(e.bgColor," p-2 rounded mr-3"),children:(0,a.jsx)(t,{className:"h-4 w-4 ".concat(e.color)})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate group-hover:text-eos-600",children:e.title}),(0,a.jsxs)("div",{className:"flex items-center text-xs text-gray-500",children:[(0,a.jsx)("span",{className:"capitalize",children:e.type}),(0,a.jsx)("span",{className:"mx-1",children:"•"}),(0,a.jsx)("span",{className:l(e.type,e.status),children:e.status.replace("_"," ")}),(0,a.jsx)("span",{className:"mx-1",children:"•"}),(0,a.jsx)("span",{children:new Date(e.date).toLocaleDateString()})]})]}),(0,a.jsx)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsx)(w,{className:"h-4 w-4 text-gray-400"})})]},"".concat(e.type,"-").concat(e.id))})})})]})}var k=s(8991),Z=s(2805);function C(){let{userTeams:e,activeTeam:t,setActiveTeam:s}=(0,l.aC)(),[n,i]=(0,r.useState)(!1);return e.length<=1?null:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>i(!n),className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-eos-500",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 mr-2 text-gray-500"}),(0,a.jsx)("span",{className:"max-w-32 truncate",children:(null==t?void 0:t.name)||"Select Team"}),(0,a.jsx)(k.Z,{className:"h-4 w-4 ml-2 text-gray-500"})]}),n&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:[(0,a.jsx)("div",{className:"px-4 py-2 border-b border-gray-200",children:(0,a.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase",children:"Your Teams"})}),e.map(e=>(0,a.jsxs)("button",{onClick:()=>{s(e),i(!1)},className:"w-full flex items-center px-4 py-3 text-left hover:bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),e.description&&(0,a.jsx)("p",{className:"text-xs text-gray-500 truncate",children:e.description})]}),(null==t?void 0:t.id)===e.id&&(0,a.jsx)(Z.Z,{className:"h-4 w-4 text-eos-600 ml-2"})]},e.id))]})]})}var S=s(6247),E=s(4222),D=s(6637);function M(){let[e,t]=(0,r.useState)(!1),[s,n]=(0,r.useState)(0);(0,r.useEffect)(()=>{let e=()=>{let e=localStorage.getItem("eos-offline-actions");e&&n(JSON.parse(e).length)};e(),t(!0);let s=setInterval(e,5e3);return()=>clearInterval(s)},[]);let i=async()=>{let e=localStorage.getItem("eos-offline-actions");if(e)try{JSON.parse(e),localStorage.removeItem("eos-offline-actions"),n(0),alert("Data synced successfully!")}catch(e){alert("Sync failed. Will retry automatically.")}};return e?(0,a.jsx)("div",{className:"offline-banner",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(S.Z,{className:"h-5 w-5 text-yellow-600 mr-3"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-yellow-800",children:"You're offline"}),(0,a.jsx)("p",{className:"text-sm text-yellow-700",children:s>0?"".concat(s," actions waiting to sync"):"Changes will be saved and synced when you&apos;re back online"})]}),s>0&&(0,a.jsxs)("button",{onClick:i,className:"ml-4 inline-flex items-center px-3 py-1 border border-yellow-400 rounded-md text-sm font-medium text-yellow-800 bg-yellow-50 hover:bg-yellow-100",children:[(0,a.jsx)(E.Z,{className:"h-4 w-4 mr-1"}),"Sync Now"]}),(0,a.jsx)("button",{onClick:()=>t(!1),className:"ml-4 text-yellow-600 hover:text-yellow-800",children:(0,a.jsx)(D.Z,{className:"h-5 w-5"})})]})}):null}var T=s(2619);function q(){let{activeTeam:e,userRole:t}=(0,l.aC)(),{rocks:s,issues:n,todos:o,meetings:m,loading:u,error:x}=(0,c.F)(),[h,p]=(0,r.useState)(null),[f,y]=(0,r.useState)(!0);(0,r.useEffect)(()=>{y(navigator.onLine);let e=()=>y(!0),t=()=>y(!1);return window.addEventListener("online",e),window.addEventListener("offline",t),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[]),(0,r.useEffect)(()=>{e&&!u&&v()},[e,u]);let v=async()=>{if(e)try{let e=s.filter(e=>"complete"===e.status).length,t=s.length,a=o.filter(e=>"completed"===e.status).length,r=o.length;n.filter(e=>"solved"===e.status).length,n.length;let i=n.filter(e=>e.solved_at),l=i.length>0?i.reduce((e,t)=>{let s=new Date(t.created_at),a=new Date(t.solved_at);return e+(a.getTime()-s.getTime())},0)/i.length/864e5:0;p({rock_completion_rate:t>0?Math.round(e/t*100):0,scorecard_compliance:92,meeting_attendance:85,issue_resolution_time:Math.round(10*l)/10,todo_completion_rate:r>0?Math.round(a/r*100):0,trend_data:[]})}catch(e){}};return e?(0,a.jsx)(l.a1,{children:(0,a.jsx)(l.P6,{children:(0,a.jsxs)("div",{children:[(0,a.jsxs)(i(),{children:[(0,a.jsx)("title",{children:"Dashboard - EOS L10 Platform"}),(0,a.jsx)("meta",{name:"description",content:"Your EOS team dashboard with rocks, scorecard, and upcoming meetings"})]}),(0,a.jsxs)(d.Z,{children:[!f&&(0,a.jsx)(M,{}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),(0,a.jsxs)("p",{className:"text-gray-600 mt-1",children:["Welcome back to ",e.name]})]}),(0,a.jsxs)("div",{className:"mt-4 sm:mt-0 flex items-center space-x-3",children:[(0,a.jsx)(T.AJ,{}),(0,a.jsx)(C,{})]})]}),x&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,a.jsxs)("p",{className:"text-red-800 text-sm",children:["Error loading data: ",x]})}),h&&(0,a.jsx)(g,{analytics:h,loading:u}),(0,a.jsx)(j,{userRole:t}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsx)(b,{meetings:m.filter(e=>"scheduled"===e.status&&new Date(e.scheduled_date)>=new Date).slice(0,3),loading:u}),(0,a.jsx)(_,{rocks:s.slice(0,5),issues:n.filter(e=>["high","critical"].includes(e.priority)).slice(0,5),todos:o.filter(e=>"pending"===e.status).slice(0,5),loading:u})]}),(0,a.jsx)("div",{className:"lg:hidden space-y-6",children:(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"card-header",children:(0,a.jsx)("h3",{className:"card-title",children:"My Tasks"})}),(0,a.jsx)("div",{className:"card-content",children:(0,a.jsxs)("div",{className:"space-y-3",children:[o.filter(e=>"pending"===e.status).slice(0,3).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.title}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Due: ",new Date(e.due_date).toLocaleDateString()]})]}),(0,a.jsx)("div",{className:"px-2 py-1 text-xs rounded-full ".concat("high"===e.priority?"bg-red-100 text-red-800":"medium"===e.priority?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e.priority})]},e.id)),0===o.filter(e=>"pending"===e.status).length&&(0,a.jsx)("p",{className:"text-gray-500 text-sm text-center py-4",children:"No pending tasks"})]})})]})})]})]})]})})}):(0,a.jsx)(l.a1,{children:(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsx)(C,{})})})}},6393:function(e,t,s){e.exports=s(6856)}},function(e){e.O(0,[755,888,774,179],function(){return e(e.s=708)}),_N_E=e.O()}]);