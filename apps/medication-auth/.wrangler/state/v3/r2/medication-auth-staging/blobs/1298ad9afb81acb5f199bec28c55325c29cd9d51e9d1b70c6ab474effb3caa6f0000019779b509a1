(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{708:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(7217)}])},7217:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return D}});var a=s(1549),r=s(4194),i=s(55),l=s.n(i),n=s(5831),d=s(2322);let c={all:["authorizations"],lists:()=>[...c.all,"list"],list:e=>[...c.lists(),e],details:()=>[...c.all,"detail"],detail:e=>[...c.details(),e],status:e=>[...c.detail(e),"status"],ai:e=>[...c.detail(e),"ai"]};var o=s(5713),u=s(8385),m=s(6946),x=s(984),g=s.n(x),h=s(9527),b=s(4672);function p(e){let{authorization:t}=e;return(0,a.jsxs)("div",{className:"urgent"===t.priority?"auth-card-urgent":"processing"===t.status?"auth-card-processing":"auth-card",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(e=>{let t={draft:{label:"Draft",className:"status-badge-draft"},submitted:{label:"Submitted",className:"status-badge-submitted"},processing:{label:"Processing",className:"status-badge-processing"},pending_info:{label:"Pending Info",className:"status-badge-pending"},approved:{label:"Approved",className:"status-badge-approved"},denied:{label:"Denied",className:"status-badge-denied"},expired:{label:"Expired",className:"status-badge-expired"},cancelled:{label:"Cancelled",className:"status-badge-cancelled"}}[e];return(0,a.jsx)("span",{className:"status-badge ".concat(t.className),children:t.label})})(t.status),t.ai_confidence_score&&(0,a.jsxs)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:["AI: ",Math.round(100*t.ai_confidence_score),"%"]})]}),(0,a.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:["Authorization #",t.id.slice(-8)]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Created ",(0,b.Q)(new Date(t.created_at),{addSuffix:!0})]})]}),(0,a.jsx)("div",{className:"flex-shrink-0",children:(e=>{let t={low:{className:"priority-low",label:"Low Priority"},medium:{className:"priority-medium",label:"Medium Priority"},high:{className:"priority-high",label:"High Priority"},urgent:{className:"priority-urgent",label:"Urgent Priority"}}[e];return(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:t.className,title:t.label}),(0,a.jsx)("span",{className:"text-xs text-gray-500 capitalize",children:e})]})})(t.priority)})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,a.jsx)(h.tB,{className:"w-4 h-4 text-gray-400"}),(0,a.jsxs)("span",{className:"text-sm text-gray-700",children:["Patient ID: ",t.patient_id]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,a.jsx)(h.RA,{className:"w-4 h-4 text-gray-400"}),(0,a.jsxs)("span",{className:"text-sm text-gray-700",children:["Medication ID: ",t.medication_id]})]}),"processing"===t.status&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,a.jsx)(h.T3,{className:"w-4 h-4 text-yellow-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:(()=>{if(t.estimated_processing_time&&t.processing_started_at){let e=new Date(new Date(t.processing_started_at).getTime()+36e5*t.estimated_processing_time);return(0,b.Q)(e,{addSuffix:!0})}return null})()||"Processing..."})]}),"processing"===t.status&&(0,a.jsx)("div",{className:"flex items-center space-x-2 mb-4",children:(0,a.jsxs)("div",{className:"realtime-indicator",children:[(0,a.jsx)("div",{className:"realtime-dot"}),(0,a.jsx)("span",{className:"ml-2 text-xs text-green-600",children:"Live updates"})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)(g(),{href:"/track/".concat(t.id),className:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,a.jsx)(h.tE,{className:"w-3 h-3 mr-1"}),"View"]}),("draft"===t.status||"pending_info"===t.status)&&(0,a.jsxs)(g(),{href:"/create/".concat(t.id),className:"inline-flex items-center px-3 py-1.5 border border-blue-300 shadow-sm text-xs font-medium rounded text-blue-700 bg-blue-50 hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,a.jsx)(h.vd,{className:"w-3 h-3 mr-1"}),"Edit"]})]}),(0,a.jsxs)("span",{className:"text-xs text-gray-400",children:["Updated ",(0,b.Q)(new Date(t.updated_at),{addSuffix:!0})]})]})]})}var f=s(6780);function y(e){let{authorizations:t}=e,s=e=>{let t={draft:{label:"Draft",className:"status-badge-draft"},submitted:{label:"Submitted",className:"status-badge-submitted"},processing:{label:"Processing",className:"status-badge-processing"},pending_info:{label:"Pending Info",className:"status-badge-pending"},approved:{label:"Approved",className:"status-badge-approved"},denied:{label:"Denied",className:"status-badge-denied"},expired:{label:"Expired",className:"status-badge-expired"},cancelled:{label:"Cancelled",className:"status-badge-cancelled"}}[e];return(0,a.jsx)("span",{className:"status-badge ".concat(t.className),children:t.label})},r=e=>(0,a.jsx)("div",{className:{low:{className:"priority-low"},medium:{className:"priority-medium"},high:{className:"priority-high"},urgent:{className:"priority-urgent"}}[e].className});return(0,a.jsx)("div",{className:"overflow-hidden",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Authorization"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Patient"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Medication"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"AI Score"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 ".concat("urgent"===e.priority?"bg-red-50":""),children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:["processing"===e.status&&(0,a.jsx)("div",{className:"realtime-dot mr-2"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["#",e.id.slice(-8)]}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:(0,b.Q)(new Date(e.created_at),{addSuffix:!0})})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.patient_id})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.medication_id})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:s(e.status)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[r(e.priority),(0,a.jsx)("span",{className:"text-sm text-gray-700 capitalize",children:e.priority})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,f.WU)(new Date(e.created_at),"MMM d, yyyy")}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.ai_confidence_score?(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.ai_confidence_score>.8?"ai-confidence-high":e.ai_confidence_score>.6?"ai-confidence-medium":"ai-confidence-low"),children:[Math.round(100*e.ai_confidence_score),"%"]}):(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"N/A"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,a.jsx)(g(),{href:"/track/".concat(e.id),className:"inline-flex items-center p-1 border border-transparent rounded text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",title:"View Details",children:(0,a.jsx)(h.tE,{className:"w-4 h-4"})}),("draft"===e.status||"pending_info"===e.status)&&(0,a.jsx)(g(),{href:"/create/".concat(e.id),className:"inline-flex items-center p-1 border border-transparent rounded text-blue-400 hover:text-blue-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",title:"Edit Authorization",children:(0,a.jsx)(h.vd,{className:"w-4 h-4"})})]})})]},e.id))})]})})}function v(e){let{authorizations:t,pagination:s,isLoading:i,error:l,onPageChange:n,onRefresh:d}=e,[c,o]=(0,r.useState)("card");return l?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(h.LP,{className:"mx-auto h-12 w-12 text-red-400"}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Error loading authorizations"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:l.message||"Something went wrong. Please try again."}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsxs)("button",{type:"button",onClick:d,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,a.jsx)(h.p4,{className:"w-4 h-4 mr-2"}),"Try Again"]})})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Authorization Requests"}),(0,a.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:[(null==s?void 0:s.total)||0," total authorizations"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("div",{className:"flex rounded-md shadow-sm",children:[(0,a.jsx)("button",{type:"button",onClick:()=>o("card"),className:"px-3 py-2 text-sm font-medium rounded-l-md border ".concat("card"===c?"bg-blue-50 border-blue-500 text-blue-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"," focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"),children:"Card View"}),(0,a.jsx)("button",{type:"button",onClick:()=>o("list"),className:"px-3 py-2 text-sm font-medium rounded-r-md border-t border-r border-b ".concat("list"===c?"bg-blue-50 border-blue-500 text-blue-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"," focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"),children:"List View"})]}),(0,a.jsxs)("button",{type:"button",onClick:d,className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,a.jsx)(h.p4,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]})}),(0,a.jsxs)("div",{className:"p-6",children:[i?(0,a.jsx)(N,{viewMode:c}):0===t.length?(0,a.jsx)(j,{}):"card"===c?(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:t.map(e=>(0,a.jsx)(p,{authorization:e},e.id))}):(0,a.jsx)(y,{authorizations:t}),s&&s.pages>1&&(0,a.jsx)(w,{pagination:s,onPageChange:n})]})]})}function N(e){let{viewMode:t}=e;return"card"===t?(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:[...Array(6)].map((e,t)=>(0,a.jsxs)("div",{className:"auth-card animate-pulse",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-3"}),(0,a.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2 mb-2"}),(0,a.jsx)("div",{className:"h-3 bg-gray-200 rounded w-2/3 mb-4"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded w-16"}),(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded w-20"})]})]},t))}):(0,a.jsx)("div",{className:"space-y-4",children:[...Array(8)].map((e,t)=>(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg border animate-pulse",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4"})]})},t))})}function j(){return(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"mx-auto h-12 w-12 text-gray-400",children:(0,a.jsx)("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No authorizations found"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating a new medication authorization request."}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsxs)(g(),{href:"/create",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,a.jsx)(h.vd,{className:"w-4 h-4 mr-2"}),"Create Authorization"]})})]})}function w(e){let{pagination:t,onPageChange:s}=e,{page:r,pages:i,total:l}=t;return(0,a.jsxs)("nav",{className:"border-t border-gray-200 px-4 flex items-center justify-between sm:px-0 mt-8",children:[(0,a.jsx)("div",{className:"-mt-px w-0 flex-1 flex",children:(0,a.jsx)("button",{onClick:()=>s(r-1),disabled:r<=1,className:"border-t-2 border-transparent pt-4 pr-1 inline-flex items-center text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"← Previous"})}),(0,a.jsx)("div",{className:"hidden md:-mt-px md:flex",children:(()=>{let e=[],t=[];for(let t=Math.max(2,r-2);t<=Math.min(i-1,r+2);t++)e.push(t);return r-2>2?t.push(1,"..."):t.push(1),t.push(...e),r+2<i-1?t.push("...",i):t.push(i),t})().map((e,t)=>(0,a.jsx)("button",{onClick:()=>"number"==typeof e?s(e):void 0,disabled:"..."===e,className:"border-t-2 pt-4 px-4 inline-flex items-center text-sm font-medium ".concat(e===r?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," ").concat("..."===e?"cursor-default":""),children:e},t))}),(0,a.jsx)("div",{className:"-mt-px w-0 flex-1 flex justify-end",children:(0,a.jsx)("button",{onClick:()=>s(r+1),disabled:r>=i,className:"border-t-2 border-transparent pt-4 pl-1 inline-flex items-center text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next →"})})]})}let _=[{value:"draft",label:"Draft",color:"bg-gray-100 text-gray-800"},{value:"submitted",label:"Submitted",color:"bg-blue-100 text-blue-800"},{value:"processing",label:"Processing",color:"bg-yellow-100 text-yellow-800"},{value:"pending_info",label:"Pending Info",color:"bg-orange-100 text-orange-800"},{value:"approved",label:"Approved",color:"bg-green-100 text-green-800"},{value:"denied",label:"Denied",color:"bg-red-100 text-red-800"},{value:"expired",label:"Expired",color:"bg-gray-100 text-gray-800"},{value:"cancelled",label:"Cancelled",color:"bg-gray-100 text-gray-800"}],k=[{value:"low",label:"Low",color:"bg-green-100 text-green-800"},{value:"medium",label:"Medium",color:"bg-yellow-100 text-yellow-800"},{value:"high",label:"High",color:"bg-orange-100 text-orange-800"},{value:"urgent",label:"Urgent",color:"bg-red-100 text-red-800"}];function A(e){var t,s,i,l;let{filters:n,onFiltersChange:d}=e,[c,o]=(0,r.useState)(!1),[u,m]=(0,r.useState)(n.search_query||""),x=e=>{m(e),d({...n,search_query:e||void 0})},g=(e,t)=>{let s=n.status||[],a=t?[...s,e]:s.filter(t=>t!==e);d({...n,status:a.length>0?a:void 0})},b=(e,t)=>{let s=n.priority||[],a=t?[...s,e]:s.filter(t=>t!==e);d({...n,priority:a.length>0?a:void 0})},p=(e,t)=>{let s={...n.date_range||{start:"",end:""},[e]:t};d({...n,date_range:s.start||s.end?s:void 0})},f=!!(n.search_query||(null===(t=n.status)||void 0===t?void 0:t.length)||(null===(s=n.priority)||void 0===s?void 0:s.length)||n.date_range);return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(h._V,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsx)("input",{type:"text",placeholder:"Search authorizations, patients, medications...",value:u,onChange:e=>x(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),(0,a.jsxs)("button",{type:"button",onClick:()=>o(!c),className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md text-sm font-medium ".concat(c||f?"bg-blue-50 text-blue-700 border-blue-300":"bg-white text-gray-700 hover:bg-gray-50"," focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"),children:[(0,a.jsx)(h.rJ,{className:"h-4 w-4 mr-2"}),"Filters",f&&(0,a.jsx)("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs bg-blue-100 text-blue-800",children:"Active"})]}),f&&(0,a.jsxs)("button",{type:"button",onClick:()=>{m(""),d({})},className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,a.jsx)(h.DX,{className:"h-4 w-4 mr-2"}),"Clear"]})]}),c&&(0,a.jsxs)("div",{className:"border-t border-gray-200 pt-4 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Status"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:_.map(e=>{var t;let s=(null===(t=n.status)||void 0===t?void 0:t.includes(e.value))||!1;return(0,a.jsxs)("label",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm cursor-pointer border ".concat(s?"bg-blue-100 text-blue-800 border-blue-300":"bg-gray-50 text-gray-700 border-gray-300 hover:bg-gray-100"),children:[(0,a.jsx)("input",{type:"checkbox",checked:s,onChange:t=>g(e.value,t.target.checked),className:"sr-only"}),e.label]},e.value)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Priority"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:k.map(e=>{var t;let s=(null===(t=n.priority)||void 0===t?void 0:t.includes(e.value))||!1;return(0,a.jsxs)("label",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm cursor-pointer border ".concat(s?"bg-blue-100 text-blue-800 border-blue-300":"bg-gray-50 text-gray-700 border-gray-300 hover:bg-gray-100"),children:[(0,a.jsx)("input",{type:"checkbox",checked:s,onChange:t=>b(e.value,t.target.checked),className:"sr-only"}),e.label]},e.value)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Date Range"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"From"}),(0,a.jsx)("input",{type:"date",value:(null===(i=n.date_range)||void 0===i?void 0:i.start)||"",onChange:e=>p("start",e.target.value),className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"To"}),(0,a.jsx)("input",{type:"date",value:(null===(l=n.date_range)||void 0===l?void 0:l.end)||"",onChange:e=>p("end",e.target.value),className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]})]})]})]})}function z(){let e=[{name:"New Authorization",href:"/create",icon:h.pO,description:"Start a new medication authorization request",color:"bg-blue-600 hover:bg-blue-700",primary:!0},{name:"Search Patients",href:"/create?step=patient",icon:h._V,description:"Find patient and view history",color:"bg-gray-600 hover:bg-gray-700"},{name:"View Reports",href:"/analytics",icon:h.DE,description:"Analytics and performance reports",color:"bg-green-600 hover:bg-green-700"}];return(0,a.jsx)("div",{className:"flex flex-col sm:flex-row gap-3",children:e.map(e=>(0,a.jsxs)(g(),{href:e.href,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white ".concat(e.color," focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200 ").concat(e.primary?"text-white":""),title:e.description,children:[(0,a.jsx)(e.icon,{className:"w-4 h-4 mr-2"}),e.name]},e.name))})}function C(e){let{title:t,value:s,icon:r,change:i,changeType:l,color:n}=e;return(0,a.jsx)("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg border border-gray-200",children:(0,a.jsx)("div",{className:"p-5",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 rounded-md flex items-center justify-center ".concat({blue:"bg-blue-500 text-white",green:"bg-green-500 text-white",yellow:"bg-yellow-500 text-white",red:"bg-red-500 text-white"}[n]),children:(0,a.jsx)(r,{className:"w-5 h-5"})})}),(0,a.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,a.jsxs)("dl",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:t}),(0,a.jsxs)("dd",{className:"flex items-baseline",children:[(0,a.jsx)("div",{className:"text-2xl font-semibold text-gray-900",children:s}),i&&(0,a.jsx)("div",{className:"ml-2 flex items-baseline text-sm font-semibold ".concat(l?({increase:"text-green-600",decrease:"text-red-600",neutral:"text-gray-600"})[l]:"text-gray-600"),children:i})]})]})})]})})})}function E(){let{data:e,isLoading:t}=(0,n.a)({queryKey:["analytics","dashboard"],queryFn:()=>d.v.getAnalyticsDashboard(),staleTime:6e4,refetchInterval:3e5});if(t)return(0,a.jsx)("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg border border-gray-200",children:(0,a.jsx)("div",{className:"p-5",children:(0,a.jsx)("div",{className:"animate-pulse",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gray-200 rounded-md"}),(0,a.jsxs)("div",{className:"ml-5 flex-1",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/2"})]})]})})})},t))});let s=[{title:"Total Authorizations",value:(null==e?void 0:e.total_authorizations)||0,icon:h.YH,color:"blue",change:"+12% from last month",changeType:"increase"},{title:"Success Rate",value:"".concat(Math.round(100*((null==e?void 0:e.success_rate)||0)),"%"),icon:h.rE,color:"green",change:"+5% from last month",changeType:"increase"},{title:"Avg Processing Time",value:"".concat(Math.round((null==e?void 0:e.average_processing_time)||0),"h"),icon:h.T3,color:"yellow",change:"-2h from last month",changeType:"increase"},{title:"Urgent Pending",value:(null==e?void 0:e.urgent_authorizations)||0,icon:h.LP,color:"red",change:(null==e?void 0:e.urgent_authorizations)&&e.urgent_authorizations>0?"Needs attention":"All clear",changeType:((null==e?void 0:e.urgent_authorizations)&&e.urgent_authorizations,"neutral")}];return(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Dashboard Overview"}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:s.map((e,t)=>(0,a.jsx)(C,{...e},t))})]})}var S=s(7037),P=s(7901);function D(){var e,t;let[s,i]=(0,r.useState)({}),[x,g]=(0,r.useState)(1),[h,b]=(0,r.useState)(null),{data:p,isLoading:f,error:y,refetch:N}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;return(0,n.a)({queryKey:c.list(e),queryFn:()=>d.v.getAuthorizations(e,t,s),staleTime:3e4,gcTime:3e5})}(s,x,20);return e=void 0,t=h||void 0,function(e){let t=(0,o.NL)();(0,r.useEffect)(()=>{if(!e)return;let s=(0,u.OK)(e,s=>{var a,r;if(t.invalidateQueries({queryKey:c.detail(e)}),t.invalidateQueries({queryKey:c.status(e)}),"UPDATE"===s.eventType&&(null===(a=s.new)||void 0===a?void 0:a.status)!==(null===(r=s.old)||void 0===r?void 0:r.status)){let t=s.new.status,a={submitted:"Authorization submitted successfully",processing:"Authorization is now being processed",approved:"Authorization has been approved!",denied:"Authorization was denied",pending_info:"Additional information required"};a[t]&&(0,m.wN)({type:"approved"===t?"success":"denied"===t?"error":"info",title:"Status Update",message:a[t],authorization_id:e,autoHide:"denied"!==t})}});return()=>{s.unsubscribe()}},[e,t])}(e),function(e){let t=(0,o.NL)();(0,r.useEffect)(()=>{if(!e)return;let s=(0,u.lR)(e,s=>{t.invalidateQueries({queryKey:c.ai(e)}),"INSERT"===s.eventType&&(s.new,(0,m.wN)({type:"info",title:"AI Recommendation",message:"New AI suggestion available for authorization #".concat(e.slice(-8)),authorization_id:e,autoHide:!1}))});return()=>{s.unsubscribe()}},[e,t])}(e),function(e){let t=(0,o.NL)();(0,r.useEffect)(()=>{if(!e)return;let s=(0,u.Es)(e,e=>{if(t.invalidateQueries({queryKey:c.lists()}),"INSERT"===e.eventType)(0,m.wN)({type:"success",title:"New Authorization",message:"A new authorization has been created",autoHide:!0});else if("UPDATE"===e.eventType){var s;let a=null===(s=e.new)||void 0===s?void 0:s.id;a&&t.invalidateQueries({queryKey:c.detail(a)})}});return()=>{s.unsubscribe()}},[e,t])}(t),function(e){let t=(0,o.NL)();(0,r.useEffect)(()=>{if(!e)return;let t=(0,u.V$)(e,e=>{if("INSERT"===e.eventType){let t=e.new;(0,m.wN)({type:t.type||"info",title:t.title||"System Notification",message:t.message,authorization_id:t.authorization_id,autoHide:!t.action_required})}});return()=>{t.unsubscribe()}},[e,t])}(t),function(){let e=(0,r.useCallback)(e=>{"CLOSED"===e||"CHANNEL_ERROR"===e?(0,m.wN)({type:"warning",title:"Connection Issue",message:"Real-time updates may be delayed. Checking connection...",autoHide:!0,duration:3e3}):"SUBSCRIBED"===e&&localStorage.getItem("realtime_disconnected")&&((0,m.wN)({type:"success",title:"Reconnected",message:"Real-time updates restored",autoHide:!0,duration:2e3}),localStorage.removeItem("realtime_disconnected"))},[]);(0,r.useEffect)(()=>{let t=u.OQ.channel("connection-monitor");return t.subscribe(t=>{("CLOSED"===t||"CHANNEL_ERROR"===t)&&localStorage.setItem("realtime_disconnected","true"),e(t)}),()=>{t.unsubscribe()}},[e])}(),(0,r.useCallback)(()=>{(0,o.NL)().invalidateQueries({queryKey:c.all})},[]),(0,r.useEffect)(()=>{(async()=>{let{data:{user:e}}=await u.OQ.auth.getUser();b((null==e?void 0:e.id)||null)})();let{data:{subscription:e}}=u.OQ.auth.onAuthStateChange((e,t)=>{var s;b((null==t?void 0:null===(s=t.user)||void 0===s?void 0:s.id)||null)});return()=>{e.unsubscribe()}},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l(),{children:[(0,a.jsx)("title",{children:"Medication Authorization Dashboard - Ganger Platform"}),(0,a.jsx)("meta",{name:"description",content:"AI-powered medication authorization management dashboard"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsx)(S.A,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"py-6",children:(0,a.jsxs)("div",{className:"md:flex md:items-center md:justify-between",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate",children:"Medication Authorization Dashboard"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"AI-powered prior authorization management and tracking"})]}),(0,a.jsxs)("div",{className:"mt-4 flex items-center space-x-4 md:mt-0 md:ml-4",children:[(0,a.jsx)(P.i,{}),(0,a.jsx)(z,{})]})]})})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)(E,{})}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(A,{filters:s,onFiltersChange:e=>{i(e),g(1)}})}),(0,a.jsx)("div",{className:"bg-white shadow-sm rounded-lg",children:(0,a.jsx)(v,{authorizations:(null==p?void 0:p.data)||[],pagination:null==p?void 0:p.pagination,isLoading:f,error:y,onPageChange:e=>{g(e)},onRefresh:N})})]})]})})]})}}},function(e){e.O(0,[565,19,672,74,888,774,179],function(){return e(e.s=708)}),_N_E=e.O()}]);