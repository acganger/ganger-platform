(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[791],{2342:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9284).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7107:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9284).Z)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]])},8504:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9284).Z)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},4776:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9284).Z)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},2022:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9284).Z)("circle-play",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]])},8107:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9284).Z)("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},838:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9284).Z)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},3212:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9284).Z)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},4041:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9284).Z)("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]])},6468:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9284).Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},4272:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9284).Z)("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},2802:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9284).Z)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},5985:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9284).Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},2888:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9284).Z)("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},7247:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9284).Z)("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]])},3708:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/scorecard/metrics",function(){return r(2493)}])},2619:function(e,t,r){"use strict";r.d(t,{AJ:function(){return l},ZP:function(){return i}});var a=r(1549),s=r(4168),n=r(8107),c=r(5985);function i(e){let{page:t="dashboard",showCount:r=!0,showAvatars:i=!0,maxAvatars:l=5}=e,{onlineUsers:d}=(0,s.o)(t);if(0===d.length)return null;let o=d.slice(0,l),m=Math.max(0,d.length-l);return(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[i&&(0,a.jsxs)("div",{className:"flex -space-x-2",children:[o.map(e=>(0,a.jsxs)("div",{className:"relative",title:"".concat(e.full_name," - ").concat(e.page),children:[e.avatar_url?(0,a.jsx)("img",{src:e.avatar_url,alt:e.full_name,className:"w-8 h-8 rounded-full border-2 border-white bg-gray-100"}):(0,a.jsx)("div",{className:"w-8 h-8 rounded-full border-2 border-white bg-eos-100 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-xs font-medium text-eos-700",children:e.full_name.charAt(0).toUpperCase()})}),(0,a.jsx)("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-400 border-2 border-white rounded-full"})]},e.user_id)),m>0&&(0,a.jsx)("div",{className:"w-8 h-8 rounded-full border-2 border-white bg-gray-200 flex items-center justify-center",children:(0,a.jsxs)("span",{className:"text-xs font-medium text-gray-600",children:["+",m]})})]}),r&&(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[(0,a.jsx)(n.Z,{className:"w-2 h-2 fill-green-400 text-green-400"}),(0,a.jsxs)("span",{children:[d.length," online"]})]}),!i&&(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[(0,a.jsx)(c.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:d.length})]})]})}function l(){let{onlineUsers:e}=(0,s.o)();return(0,a.jsxs)("div",{className:"hidden sm:flex items-center space-x-3 bg-white rounded-lg px-3 py-2 shadow-sm border",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(n.Z,{className:"w-2 h-2 fill-green-400 text-green-400"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600 font-medium",children:[e.length," team member",1!==e.length?"s":""," online"]})]}),e.length>0&&(0,a.jsxs)("div",{className:"flex -space-x-2",children:[e.slice(0,3).map(e=>(0,a.jsx)("div",{className:"relative",title:e.full_name,children:e.avatar_url?(0,a.jsx)("img",{src:e.avatar_url,alt:e.full_name,className:"w-6 h-6 rounded-full border-2 border-white"}):(0,a.jsx)("div",{className:"w-6 h-6 rounded-full border-2 border-white bg-eos-100 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-xs font-medium text-eos-700",children:e.full_name.charAt(0).toUpperCase()})})},e.user_id)),e.length>3&&(0,a.jsx)("div",{className:"w-6 h-6 rounded-full border-2 border-white bg-gray-200 flex items-center justify-center",children:(0,a.jsxs)("span",{className:"text-xs font-medium text-gray-600",children:["+",e.length-3]})})]})]})}},4168:function(e,t,r){"use strict";r.d(t,{o:function(){return c}});var a=r(4194),s=r(1700),n=r(1774);function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dashboard",{user:t,activeTeam:r}=(0,s.aC)(),[c,i]=(0,a.useState)([]),[l,d]=(0,a.useState)(null);return(0,a.useEffect)(()=>{if(!t||!r)return;let a="team-".concat(r.id),s=n.OQ.channel(a,{config:{presence:{key:t.id}}}),c=()=>{var r,a;let n={user_id:t.id,email:(null==t?void 0:t.email)||"",full_name:(null===(r=t.user_metadata)||void 0===r?void 0:r.full_name)||(null==t?void 0:t.email)||"",avatar_url:null===(a=t.user_metadata)||void 0===a?void 0:a.avatar_url,page:e,last_seen:new Date().toISOString()};d(n),s.track(n)};s.on("presence",{event:"sync"},()=>{let e=s.presenceState(),r=[];Object.keys(e).forEach(t=>{let a=e[t];if(a&&a.length>0){let e=a.reduce((e,t)=>{let r=t.last_seen||new Date().toISOString(),a=e.last_seen||new Date().toISOString();return new Date(r)>new Date(a)?t:e});r.push(e)}}),i(r.filter(e=>e.user_id!==(null==t?void 0:t.id)).sort((e,t)=>new Date(t.last_seen||new Date).getTime()-new Date(e.last_seen||new Date).getTime()))}).on("presence",{event:"join"},e=>{let{key:t,newPresences:r}=e}).on("presence",{event:"leave"},e=>{let{key:t,leftPresences:r}=e}).subscribe(async e=>{"SUBSCRIBED"===e&&c()});let l=setInterval(()=>{"joined"===s.state&&c()},3e4),o=()=>{"visible"===document.visibilityState&&c()};return document.addEventListener("visibilitychange",o),()=>{clearInterval(l),document.removeEventListener("visibilitychange",o),n.OQ.removeChannel(s)}},[t,r,e]),{onlineUsers:c,myPresence:l}}},2493:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return _}});var a=r(1549),s=r(4194),n=r(55),c=r.n(n),i=r(5560),l=r(1700),d=r(4168),o=r(755),m=r(2619),u=r(1774),h=r(8504),x=r(2342),f=r(4272),y=r(4032),p=r(1335),v=r(6468);let j=(0,r(9284).Z)("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);var g=r(675),N=r(2746),b=r(2802),w=r(119),k=r(777);function _(){let{activeTeam:e,user:t,userRole:r}=(0,l.aC)(),{onlineUsers:n}=(0,d.o)("scorecard-metrics"),[_,Z]=(0,s.useState)(null),[M,S]=(0,s.useState)([]),[q,C]=(0,s.useState)(!0),[D,O]=(0,s.useState)(null),[E,P]=(0,s.useState)(!1),[z,A]=(0,s.useState)(null),[F,H]=(0,s.useState)(!1),[T,I]=(0,s.useState)({name:"",description:"",goal:"",measurement_type:"number",frequency:"weekly",owner_id:(null==t?void 0:t.id)||""});(0,s.useEffect)(()=>{e&&Q()},[e]),(0,s.useEffect)(()=>{t&&!T.owner_id&&I(e=>({...e,owner_id:t.id}))},[t]);let Q=async()=>{if(e)try{C(!0),O(null);let{data:t,error:r}=await u.OQ.from("scorecards").select("*").eq("team_id",e.id).eq("active",!0).single();if(r&&"PGRST116"===r.code){let{data:r,error:a}=await u.OQ.from("scorecards").insert({team_id:e.id,name:"".concat(e.name," Scorecard"),description:"Team performance metrics",active:!0}).select().single();if(a)throw a;t=r}else if(r)throw r;Z(t);let{data:a,error:s}=await u.OQ.from("scorecard_metrics").select("\n          *,\n          owner:users(full_name, email, avatar_url)\n        ").eq("scorecard_id",t.id).order("sort_order");if(s)throw s;S(a||[])}catch(e){O(e instanceof Error?e.message:"Failed to load metrics")}finally{C(!1)}},U=async e=>{if(!e.destination)return;let{source:t,destination:r}=e;if(t.index===r.index)return;let a=Array.from(M),[s]=a.splice(t.index,1);a.splice(r.index,0,s);let n=a.map((e,t)=>({...e,sort_order:t+1}));S(n);try{for(let e of n)await u.OQ.from("scorecard_metrics").update({sort_order:e.sort_order}).eq("id",e.id)}catch(e){Q()}},V=()=>{I({name:"",description:"",goal:"",measurement_type:"number",frequency:"weekly",owner_id:(null==t?void 0:t.id)||""}),A(null)},L=e=>{I({name:e.name,description:e.description||"",goal:e.goal.toString(),measurement_type:e.measurement_type,frequency:e.frequency,owner_id:e.owner_id}),A(e),P(!0)},R=async e=>{if(e.preventDefault(),_&&t){H(!0);try{let e=parseFloat(T.goal)||0;if(z){let{error:t}=await u.OQ.from("scorecard_metrics").update({name:T.name,description:T.description||null,goal:e,measurement_type:T.measurement_type,frequency:T.frequency,owner_id:T.owner_id}).eq("id",z.id);if(t)throw t}else{let t=Math.max(...M.map(e=>e.sort_order),0)+1,{error:r}=await u.OQ.from("scorecard_metrics").insert({scorecard_id:_.id,name:T.name,description:T.description||null,goal:e,measurement_type:T.measurement_type,frequency:T.frequency,owner_id:T.owner_id,sort_order:t,active:!0});if(r)throw r}P(!1),V(),Q()}catch(e){alert("Failed to save metric. Please try again.")}finally{H(!1)}}},B=async e=>{if(confirm('Are you sure you want to delete "'.concat(e.name,'"? This action cannot be undone.')))try{let{error:t}=await u.OQ.from("scorecard_metrics").update({active:!1}).eq("id",e.id);if(t)throw t;Q()}catch(e){alert("Failed to delete metric. Please try again.")}},G=(e,t)=>{switch(e.measurement_type){case"currency":return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(t);case"percentage":return"".concat(t,"%");case"boolean":return t?"Yes":"No";default:return t.toLocaleString()}};return"viewer"===r?(0,a.jsx)(l.a1,{children:(0,a.jsx)(l.P6,{children:(0,a.jsx)(o.Z,{children:(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(h.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:"Access Restricted"}),(0,a.jsx)("p",{className:"text-gray-500",children:"You don't have permission to manage scorecard metrics."}),(0,a.jsx)(i.Z,{href:"/scorecard",className:"btn-primary mt-4",children:"Back to Scorecard"})]})})})}):q?(0,a.jsx)(l.a1,{children:(0,a.jsx)(l.P6,{children:(0,a.jsx)(o.Z,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"skeleton h-8 w-64"}),(0,a.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)("div",{className:"card",children:(0,a.jsxs)("div",{className:"card-content",children:[(0,a.jsx)("div",{className:"skeleton h-6 w-full mb-2"}),(0,a.jsx)("div",{className:"skeleton h-4 w-3/4"})]})},t))})]})})})}):(0,a.jsx)(l.a1,{children:(0,a.jsx)(l.P6,{children:(0,a.jsxs)("div",{children:[(0,a.jsxs)(c(),{children:[(0,a.jsx)("title",{children:"Scorecard Metrics - EOS L10 Platform"}),(0,a.jsx)("meta",{name:"description",content:"Manage your team scorecard metrics and configuration"})]}),(0,a.jsx)(o.Z,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(i.Z,{href:"/scorecard",className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:(0,a.jsx)(x.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,a.jsx)(f.Z,{className:"h-6 w-6 mr-2 text-eos-600"}),"Scorecard Metrics"]}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Configure and manage your team's performance metrics"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(m.ZP,{page:"scorecard-metrics"}),(0,a.jsxs)("button",{onClick:()=>{V(),P(!0)},className:"btn-primary flex items-center",children:[(0,a.jsx)(y.Z,{className:"h-4 w-4 mr-2"}),"Add Metric"]})]})]}),D&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,a.jsxs)("p",{className:"text-red-800 text-sm",children:["Error: ",D]})}),E&&(0,a.jsx)("div",{className:"card",children:(0,a.jsxs)("form",{onSubmit:R,children:[(0,a.jsx)("div",{className:"card-header",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"card-title",children:z?"Edit Metric":"Add New Metric"}),(0,a.jsx)("button",{type:"button",onClick:()=>{P(!1),V()},className:"p-1 text-gray-400 hover:text-gray-600",children:(0,a.jsx)(p.Z,{className:"h-5 w-5"})})]})}),(0,a.jsxs)("div",{className:"card-content space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Metric Name *"}),(0,a.jsx)("input",{type:"text",required:!0,value:T.name,onChange:e=>I({...T,name:e.target.value}),placeholder:"e.g., Weekly Revenue",className:"input",maxLength:100})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Goal/Target *"}),(0,a.jsx)("input",{type:"number",required:!0,step:"0.01",value:T.goal,onChange:e=>I({...T,goal:e.target.value}),placeholder:"100",className:"input"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Measurement Type *"}),(0,a.jsxs)("select",{required:!0,value:T.measurement_type,onChange:e=>I({...T,measurement_type:e.target.value}),className:"input",children:[(0,a.jsx)("option",{value:"number",children:"Number"}),(0,a.jsx)("option",{value:"percentage",children:"Percentage"}),(0,a.jsx)("option",{value:"currency",children:"Currency"}),(0,a.jsx)("option",{value:"boolean",children:"Yes/No"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Frequency *"}),(0,a.jsxs)("select",{required:!0,value:T.frequency,onChange:e=>I({...T,frequency:e.target.value}),className:"input",children:[(0,a.jsx)("option",{value:"weekly",children:"Weekly"}),(0,a.jsx)("option",{value:"monthly",children:"Monthly"}),(0,a.jsx)("option",{value:"daily",children:"Daily"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,a.jsx)("textarea",{value:T.description,onChange:e=>I({...T,description:e.target.value}),rows:3,placeholder:"Optional: Describe what this metric measures...",className:"input",maxLength:300})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Metric Owner *"}),(0,a.jsx)("select",{required:!0,value:T.owner_id,onChange:e=>I({...T,owner_id:e.target.value}),className:"input",children:(0,a.jsxs)("option",{value:(null==t?void 0:t.id)||"",children:["Me (",(null==t?void 0:t.email)||"",")"]})}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Who is responsible for tracking this metric?"})]})]}),(0,a.jsx)("div",{className:"card-footer",children:(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{P(!1),V()},className:"btn-secondary",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:F,className:"btn-primary",children:F?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.Z,{className:"h-4 w-4 mr-2"}),z?"Update":"Create"," Metric"]})})]})})]})}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"card-header",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h3",{className:"card-title",children:["Team Metrics (",M.filter(e=>e.active).length,")"]}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Drag to reorder"})]})}),(0,a.jsx)("div",{className:"card-content",children:0===M.filter(e=>e.active).length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(h.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No metrics configured"}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"Add your first scorecard metric to start tracking performance"}),(0,a.jsxs)("button",{onClick:()=>{V(),P(!0)},className:"btn-primary",children:[(0,a.jsx)(y.Z,{className:"h-4 w-4 mr-2"}),"Add First Metric"]})]}):(0,a.jsx)(k.Z5,{onDragEnd:U,children:(0,a.jsx)(k.bK,{droppableId:"metrics-list",children:(e,t)=>(0,a.jsxs)("div",{...e.droppableProps,ref:e.innerRef,className:"space-y-3 ".concat(t.isDraggingOver?"bg-blue-50 rounded-lg p-2":""),children:[M.filter(e=>e.active).map((e,t)=>(0,a.jsx)(k._l,{draggableId:e.id,index:t,children:(t,r)=>{var s;return(0,a.jsx)("div",{ref:t.innerRef,...t.draggableProps,className:"border rounded-lg p-4 bg-white hover:shadow-md transition-shadow ".concat(r.isDragging?"shadow-lg":""),children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{...t.dragHandleProps,className:"flex-shrink-0 p-1 rounded hover:bg-gray-100 cursor-grab active:cursor-grabbing",children:(0,a.jsx)(j,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900",children:e.name}),e.description&&(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,a.jsx)("button",{onClick:()=>L(e),className:"p-1 text-gray-400 hover:text-gray-600",children:(0,a.jsx)(g.Z,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>B(e),className:"p-1 text-gray-400 hover:text-red-600",children:(0,a.jsx)(N.Z,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-3 text-sm text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(b.Z,{className:"h-4 w-4 mr-1"}),"Goal: ",G(e,e.goal)]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 mr-1"}),e.measurement_type]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("span",{className:"capitalize",children:e.frequency}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4 mr-1"}),(null===(s=e.owner)||void 0===s?void 0:s.full_name)||"Unassigned"]})]})]})]})]})})}},e.id)),e.placeholder]})})})})]})]})})]})})})}}},function(e){e.O(0,[120,610,755,888,774,179],function(){return e(e.s=3708)}),_N_E=e.O()}]);