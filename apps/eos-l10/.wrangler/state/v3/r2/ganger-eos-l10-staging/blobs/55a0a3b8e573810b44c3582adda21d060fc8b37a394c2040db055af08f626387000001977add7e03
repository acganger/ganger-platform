(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[472],{6407:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/todos",function(){return s(5360)}])},5360:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return V}});var a=s(1549),l=s(4194),r=s(6393),o=s(1700),i=s(1774),d=s(8534),n=s(4919),c=s(4032),x=s(6698),m=s(96),u=s(4916),g=s(361),b=s(4572),h=s(9122),p=s(5045),y=s(9824),j=s(2765),v=s(9970),f=s(2761),N=s(1740),w=s(254),C=s(4401),_=s(3616),k=s(9453),D=s(119),Z=s(2520),T=s(675),P=s(2746);let S={high:{color:"bg-red-500",textColor:"text-red-700",bgColor:"bg-red-50",icon:f.Z},medium:{color:"bg-yellow-500",textColor:"text-yellow-700",bgColor:"bg-yellow-50",icon:N.Z},low:{color:"bg-gray-500",textColor:"text-gray-700",bgColor:"bg-gray-50",icon:N.Z}},O={pending:{label:"Pending",color:"bg-gray-100 text-gray-700",icon:w.Z},in_progress:{label:"In Progress",color:"bg-blue-100 text-blue-700",icon:C.Z},completed:{label:"Completed",color:"bg-green-100 text-green-700",icon:_.Z},dropped:{label:"Dropped",color:"bg-gray-100 text-gray-500",icon:k.Z}};function A(e){let{todo:t,onUpdate:s,onDelete:r,onClick:o,compact:i=!1,dragging:n=!1}=e,[c,u]=(0,l.useState)(!1),[g,b]=(0,l.useState)(!1),f=S[t.priority],N=O[t.status];N.icon;let C=f.icon,_=async()=>{b(!0);try{let e="completed"===t.status?"pending":"completed";await s(t.id,{status:e})}catch(e){}finally{b(!1)}},k=async e=>{b(!0);try{await s(t.id,{status:e})}catch(e){}finally{b(!1),u(!1)}},A=async e=>{b(!0);try{await s(t.id,{priority:e})}catch(e){}finally{b(!1),u(!1)}},I=(()=>{let e=new Date(t.due_date),s=new Date;return(0,h.z)(e)?{text:"Due today",color:"text-orange-600",urgent:!0}:(0,p.P)(e)?{text:"Due tomorrow",color:"text-yellow-600",urgent:!1}:(0,y.A)(s,e)&&"completed"!==t.status?{text:"Overdue by ".concat((0,j.Q)(e)),color:"text-red-600",urgent:!0}:{text:"Due ".concat((0,v.WU)(e,"MMM d")),color:"text-gray-600",urgent:!1}})();return(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg transition-all duration-200 hover:shadow-md ".concat(n?"shadow-xl ring-2 ring-eos-500 ring-opacity-50":""," ").concat(o?"cursor-pointer":""," ").concat(i?"p-3":"p-4"," ").concat("completed"===t.status?"opacity-60":""),onClick:o,children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3 flex-1 min-w-0",children:[(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),_()},disabled:g,className:"mt-1 flex-shrink-0 transition-colors ".concat("completed"===t.status?"text-green-600 hover:text-green-700":"text-gray-400 hover:text-gray-600"),children:"completed"===t.status?(0,a.jsx)(d.Z,{className:"h-5 w-5"}):(0,a.jsx)(w.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"font-medium ".concat(i?"text-sm":"text-base"," ").concat("completed"===t.status?"line-through text-gray-500":"text-gray-900"),children:t.title}),t.description&&!i&&(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:t.description}),(0,a.jsxs)("div",{className:"flex items-center mt-2 space-x-3 text-xs text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(m.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{className:I.color,children:I.text})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(x.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:t.completed_at?"Completed ".concat((0,j.Q)(new Date(t.completed_at))," ago"):"Created ".concat((0,j.Q)(new Date(t.created_at))," ago")})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(D.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:"Assigned"})]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1 px-2 py-1 rounded-full ".concat(f.textColor," ").concat(f.bgColor),children:[(0,a.jsx)(C,{className:"h-3 w-3"}),(0,a.jsx)("span",{className:"text-xs font-medium capitalize",children:t.priority})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),u(!c)},className:"p-1 hover:bg-gray-100 rounded text-gray-400 hover:text-gray-600",disabled:g,children:(0,a.jsx)(Z.Z,{className:"h-4 w-4"})}),c&&(0,a.jsxs)("div",{className:"absolute right-0 top-8 bg-white shadow-lg border border-gray-200 rounded-lg py-1 z-10 min-w-48",children:[(0,a.jsxs)("div",{className:"px-3 py-2 border-b border-gray-100",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-gray-500 mb-2",children:"CHANGE STATUS"}),(0,a.jsx)("div",{className:"space-y-1",children:Object.entries(O).map(e=>{let[s,l]=e,r=l.icon;return(0,a.jsxs)("button",{onClick:e=>{e.stopPropagation(),k(s)},disabled:t.status===s||g,className:"w-full text-left px-2 py-1 text-xs rounded hover:bg-gray-50 disabled:opacity-50 flex items-center space-x-2 ".concat(t.status===s?"bg-gray-100":""),children:[(0,a.jsx)(r,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:l.label})]},s)})})]}),(0,a.jsxs)("div",{className:"px-3 py-2 border-b border-gray-100",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-gray-500 mb-2",children:"CHANGE PRIORITY"}),(0,a.jsx)("div",{className:"space-y-1",children:Object.entries(S).map(e=>{let[s,l]=e;return(0,a.jsxs)("button",{onClick:e=>{e.stopPropagation(),A(s)},disabled:t.priority===s||g,className:"w-full text-left px-2 py-1 text-xs rounded hover:bg-gray-50 disabled:opacity-50 flex items-center space-x-2 ".concat(t.priority===s?"bg-gray-100":""),children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(l.color)}),(0,a.jsx)("span",{className:"capitalize",children:s})]},s)})})]}),(0,a.jsxs)("div",{className:"px-3 py-2",children:[(0,a.jsxs)("button",{onClick:e=>{e.stopPropagation(),u(!1),null==o||o()},className:"w-full text-left px-2 py-1 text-xs rounded hover:bg-gray-50 flex items-center space-x-2",children:[(0,a.jsx)(T.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:"Edit Details"})]}),(0,a.jsxs)("button",{onClick:e=>{e.stopPropagation(),confirm("Are you sure you want to delete this todo?")&&(r(t.id),u(!1))},className:"w-full text-left px-2 py-1 text-xs rounded hover:bg-red-50 text-red-600 flex items-center space-x-2",children:[(0,a.jsx)(P.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:"Delete Todo"})]})]})]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat(N.color),children:N.label}),I.urgent&&(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs bg-red-100 text-red-700",children:"Urgent"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-xs text-gray-500",children:[(0,a.jsx)(D.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:"Assignee"})]})]}),c&&(0,a.jsx)("div",{className:"fixed inset-0 z-0",onClick:()=>u(!1)})]})}var I=s(2162),M=s(5117),E=s(3324),U=s(1335),q=s(6468);let W=[{value:"low",label:"Low",color:"bg-gray-500",description:"Can be done later"},{value:"medium",label:"Medium",color:"bg-yellow-500",description:"Should be done soon"},{value:"high",label:"High",color:"bg-red-500",description:"Needs immediate attention"}],L=[{label:"Today",value:"today"},{label:"Tomorrow",value:"tomorrow"},{label:"This Week",value:"this_week"},{label:"Next Week",value:"next_week"},{label:"Custom",value:"custom"}];function Q(e){let{onSubmit:t,onClose:s,initialData:r}=e,o=[],[i,d]=(0,l.useState)(!1),[n,u]=(0,l.useState)("this_week"),{register:g,handleSubmit:b,watch:h,setValue:p,formState:{errors:y}}=(0,I.cI)({defaultValues:{title:(null==r?void 0:r.title)||"",description:(null==r?void 0:r.description)||"",assigned_to:(null==r?void 0:r.assigned_to)||"",due_date:(null==r?void 0:r.due_date)||(0,v.WU)((0,M.j)(new Date,1),"yyyy-MM-dd"),priority:(null==r?void 0:r.priority)||"medium"}}),j=h("priority"),f=async e=>{d(!0);try{await t(e)}catch(e){}finally{d(!1)}},N=e=>{if(u(e),"custom"!==e){let t;switch(e){case"today":default:t=new Date;break;case"tomorrow":t=(0,E.E)(new Date,1);break;case"this_week":t=(0,E.E)(new Date,7);break;case"next_week":t=(0,M.j)(new Date,1)}p("due_date",(0,v.WU)(t,"yyyy-MM-dd"))}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-end sm:items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-t-2xl sm:rounded-2xl w-full max-w-lg max-h-[90vh] overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:r?"Edit Todo":"Create New Todo"}),(0,a.jsx)("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,a.jsx)(U.Z,{className:"h-5 w-5 text-gray-500"})})]}),(0,a.jsxs)("form",{onSubmit:b(f),className:"overflow-y-auto max-h-[calc(90vh-80px)]",children:[(0,a.jsxs)("div",{className:"p-4 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Todo Title *"}),(0,a.jsx)("input",{...g("title",{required:"Todo title is required",minLength:{value:3,message:"Title must be at least 3 characters"}}),type:"text",placeholder:"What needs to be done?",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-eos-500 focus:border-transparent"}),y.title&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:y.title.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,a.jsx)("textarea",{...g("description"),rows:3,placeholder:"Add more details about this todo...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-eos-500 focus:border-transparent resize-none"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Optional: Provide context or specific requirements"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign to Team Member *"}),(0,a.jsxs)("select",{...g("assigned_to",{required:"Please assign this todo to someone"}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-eos-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"",children:"Select team member..."}),null==o?void 0:o.map(e=>(0,a.jsxs)("option",{value:e.user_id,children:[e.user.full_name," (",e.seat,")"]},e.user_id))]}),y.assigned_to&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:y.assigned_to.message}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Who is responsible for completing this todo?"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Due Date *"}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2 mb-3",children:L.map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>N(e.value),className:"p-2 rounded-lg border text-sm transition-all ".concat(n===e.value?"border-eos-500 bg-eos-50 text-eos-700":"border-gray-200 hover:border-gray-300"),children:e.label},e.value))}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(m.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,a.jsx)("input",{...g("due_date",{required:"Due date is required"}),type:"date",min:(0,v.WU)(new Date,"yyyy-MM-dd"),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-eos-500 focus:border-transparent"})]}),y.due_date&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:y.due_date.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Priority *"}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-2",children:W.map(e=>{let t=j===e.value;return(0,a.jsx)("button",{type:"button",onClick:()=>p("priority",e.value),className:"p-3 rounded-lg border-2 text-left transition-all ".concat(t?"border-eos-500 bg-eos-50":"border-gray-200 hover:border-gray-300"),children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(e.color)}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.label}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]}),t&&(0,a.jsx)("div",{className:"w-2 h-2 bg-eos-500 rounded-full"})]})},e.value)})})]}),(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:(0,a.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 text-blue-600 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-blue-900",children:"Level 10 Meeting Integration"}),(0,a.jsx)("p",{className:"text-xs text-blue-700 mt-1",children:"This todo will be tracked in your team's Level 10 meetings and can be marked as completed during the todo review segment."})]})]})})]}),(0,a.jsxs)("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("button",{type:"button",onClick:s,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:i,className:"flex-1 bg-eos-600 text-white px-4 py-2 rounded-lg hover:bg-eos-700 disabled:opacity-50 transition-colors flex items-center justify-center space-x-2",children:i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("span",{children:"Saving..."})]}):(0,a.jsxs)(a.Fragment,{children:[r?(0,a.jsx)(q.Z,{className:"h-4 w-4"}):(0,a.jsx)(c.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:r?"Update Todo":"Create Todo"})]})})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 text-center mt-3",children:"Todos help track action items and ensure accountability in your team"})]})]})]})})}var R=s(3090);let z=[{value:"all",label:"All Todos",icon:d.Z},{value:"active",label:"Active (Not Completed)",icon:w.Z},{value:"pending",label:"Pending",icon:w.Z},{value:"in_progress",label:"In Progress",icon:C.Z},{value:"completed",label:"Completed",icon:_.Z},{value:"dropped",label:"Dropped",icon:k.Z}],H=[{value:"all",label:"All Priorities"},{value:"high",label:"High Priority",color:"bg-red-500",icon:f.Z},{value:"medium",label:"Medium Priority",color:"bg-yellow-500",icon:N.Z},{value:"low",label:"Low Priority",color:"bg-gray-500",icon:N.Z}],F=[{value:"all",label:"All Due Dates",icon:m.Z},{value:"overdue",label:"Overdue",icon:f.Z,color:"text-red-600"},{value:"today",label:"Due Today",icon:x.Z,color:"text-orange-600"},{value:"tomorrow",label:"Due Tomorrow",icon:x.Z,color:"text-yellow-600"},{value:"this_week",label:"Due This Week",icon:m.Z,color:"text-blue-600"}];function B(e){let{filters:t,onFiltersChange:s,onClose:l}=e,r=[],o=(e,a)=>{s({...t,[e]:a})},i=()=>{s({status:"active",priority:"all",assignee:"all",dueDate:"all"})},d=Object.entries(t).some(e=>{let[t,s]=e;return"status"===t?"active"!==s:"all"!==s}),c=[{value:"all",label:"All Assignees"},{value:"me",label:"Assigned to Me"},{value:"unassigned",label:"Unassigned Todos"},...(null==r?void 0:r.map(e=>({value:e.user_id,label:e.user.full_name,subtitle:e.seat})))||[]];return(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(n.Z,{className:"h-5 w-5 text-gray-600"}),(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:"Filters"}),d&&(0,a.jsx)("span",{className:"bg-eos-100 text-eos-700 px-2 py-1 rounded-full text-xs",children:"Active"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[d&&(0,a.jsxs)("button",{onClick:i,className:"flex items-center space-x-1 text-sm text-gray-600 hover:text-gray-800",children:[(0,a.jsx)(R.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Clear"})]}),(0,a.jsx)("button",{onClick:l,className:"p-1 hover:bg-gray-100 rounded",children:(0,a.jsx)(U.Z,{className:"h-4 w-4 text-gray-500"})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Status"}),(0,a.jsx)("div",{className:"space-y-2",children:z.map(e=>{let s=e.icon;return(0,a.jsxs)("button",{onClick:()=>o("status",e.value),className:"w-full text-left px-3 py-2 rounded-lg text-sm transition-colors flex items-center space-x-3 ".concat(t.status===e.value?"bg-eos-50 text-eos-700 border border-eos-200":"bg-gray-50 text-gray-700 hover:bg-gray-100 border border-transparent"),children:[(0,a.jsx)(s,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:e.label})]},e.value)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Priority"}),(0,a.jsx)("div",{className:"space-y-2",children:H.map(e=>{let s=e.icon;return(0,a.jsxs)("button",{onClick:()=>o("priority",e.value),className:"w-full text-left px-3 py-2 rounded-lg text-sm transition-colors flex items-center space-x-3 ".concat(t.priority===e.value?"bg-eos-50 text-eos-700 border border-eos-200":"bg-gray-50 text-gray-700 hover:bg-gray-100 border border-transparent"),children:[e.color?(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(e.color)}):s?(0,a.jsx)(s,{className:"h-4 w-4"}):(0,a.jsx)("div",{className:"w-4 h-4"}),(0,a.jsx)("span",{children:e.label})]},e.value)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Due Date"}),(0,a.jsx)("div",{className:"space-y-2",children:F.map(e=>{let s=e.icon;return(0,a.jsxs)("button",{onClick:()=>o("dueDate",e.value),className:"w-full text-left px-3 py-2 rounded-lg text-sm transition-colors flex items-center space-x-3 ".concat(t.dueDate===e.value?"bg-eos-50 text-eos-700 border border-eos-200":"bg-gray-50 text-gray-700 hover:bg-gray-100 border border-transparent"),children:[(0,a.jsx)(s,{className:"h-4 w-4 ".concat(e.color||"")}),(0,a.jsx)("span",{children:e.label})]},e.value)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Assignee"}),(0,a.jsx)("div",{className:"space-y-2",children:c.map(e=>(0,a.jsxs)("button",{onClick:()=>o("assignee",e.value),className:"w-full text-left px-3 py-2 rounded-lg text-sm transition-colors flex items-center space-x-3 ".concat(t.assignee===e.value?"bg-eos-50 text-eos-700 border border-eos-200":"bg-gray-50 text-gray-700 hover:bg-gray-100 border border-transparent"),children:[(0,a.jsx)(D.Z,{className:"h-4 w-4"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{children:e.label}),"subtitle"in e&&e.subtitle&&(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.subtitle})]})]},e.value))})]})]}),d&&(0,a.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("span",{className:"text-gray-600",children:["Active filters: ",Object.entries(t).filter(e=>{let[t,s]=e;return"status"===t?"active"!==s:"all"!==s}).length]}),(0,a.jsx)("button",{onClick:i,className:"text-eos-600 hover:text-eos-700 font-medium",children:"Clear all filters"})]})})]})}var G=s(777);let K=[{id:"pending",title:"Pending",icon:w.Z,color:"border-gray-300",bgColor:"bg-gray-50",textColor:"text-gray-700"},{id:"in_progress",title:"In Progress",icon:C.Z,color:"border-blue-300",bgColor:"bg-blue-50",textColor:"text-blue-700"},{id:"completed",title:"Completed",icon:_.Z,color:"border-green-300",bgColor:"bg-green-50",textColor:"text-green-700"},{id:"dropped",title:"Dropped",icon:k.Z,color:"border-gray-300",bgColor:"bg-gray-50",textColor:"text-gray-500"}];function X(e){let{todos:t,onUpdateTodo:s,onDeleteTodo:l,onEditTodo:r}=e,o=e=>t.filter(t=>t.status===e);return(0,a.jsxs)(G.Z5,{onDragEnd:e=>{let{destination:t,source:a,draggableId:l}=e;if(!t||t.droppableId===a.droppableId&&t.index===a.index)return;let r=t.droppableId,o={status:r};"completed"===r&&"completed"!==a.droppableId&&(o.completed_at=new Date().toISOString()),"completed"!==r&&"completed"===a.droppableId&&(o.completed_at=void 0),s(l,o)},children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:K.map(e=>{let t=e.icon,i=o(e.id);return(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("div",{className:"".concat(e.bgColor," ").concat(e.color," border-2 border-dashed rounded-lg p-4 mb-4"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(t,{className:"h-5 w-5 ".concat(e.textColor)}),(0,a.jsx)("h3",{className:"font-medium ".concat(e.textColor),children:e.title})]}),(0,a.jsx)("span",{className:"text-sm ".concat(e.textColor," bg-white px-2 py-1 rounded-full"),children:i.length})]})}),(0,a.jsx)(G.bK,{droppableId:e.id,children:(o,d)=>(0,a.jsxs)("div",{ref:o.innerRef,...o.droppableProps,className:"flex-1 min-h-96 p-2 rounded-lg transition-colors ".concat(d.isDraggingOver?"".concat(e.bgColor," border-2 border-dashed ").concat(e.color):"bg-gray-50 border-2 border-dashed border-transparent"),children:[(0,a.jsxs)("div",{className:"space-y-3",children:[i.map((e,t)=>(0,a.jsx)(G._l,{draggableId:e.id,index:t,children:(t,o)=>(0,a.jsx)("div",{ref:t.innerRef,...t.draggableProps,...t.dragHandleProps,children:(0,a.jsx)(A,{todo:e,onUpdate:s,onDelete:l,onClick:()=>r(e),compact:!0,dragging:o.isDragging})})},e.id)),o.placeholder]}),0===i.length&&!d.isDraggingOver&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-gray-400",children:[(0,a.jsx)(t,{className:"h-8 w-8 mb-2"}),(0,a.jsxs)("p",{className:"text-sm text-center",children:["pending"===e.id&&"No pending todos","in_progress"===e.id&&"No todos in progress","completed"===e.id&&"No completed todos","dropped"===e.id&&"No dropped todos"]}),"pending"===e.id&&(0,a.jsx)("p",{className:"text-xs text-center mt-1",children:"Drag todos here or create new ones"})]}),d.isDraggingOver&&0===i.length&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-gray-500",children:[(0,a.jsx)(t,{className:"h-8 w-8 mb-2"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:"Drop todo here"}),(0,a.jsxs)("p",{className:"text-xs",children:["Will be marked as ",e.title.toLowerCase()]})]})]})})]},e.id)})}),(0,a.jsx)("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-600 rounded-full"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-300 rounded-full"})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-blue-900 mb-1",children:"Kanban Board Usage"}),(0,a.jsxs)("ul",{className:"text-xs text-blue-700 space-y-1",children:[(0,a.jsx)("li",{children:"• Drag and drop todos between columns to update their status"}),(0,a.jsx)("li",{children:"• Click on any todo card to edit details and assignments"}),(0,a.jsx)("li",{children:"• Completed todos are automatically timestamped"}),(0,a.jsx)("li",{children:"• Use the list view for detailed filtering and search"})]})]})]})})]})}function V(){let e=(0,r.useRouter)(),{activeTeam:t,user:s}=(0,o.aC)(),h=null==t?void 0:t.id,[p,y]=(0,l.useState)([]),[j,v]=(0,l.useState)(!0),[f,N]=(0,l.useState)(!1),[w,C]=(0,l.useState)(!1),[_,k]=(0,l.useState)(null),[D,Z]=(0,l.useState)(""),[T,P]=(0,l.useState)("list"),[S,O]=(0,l.useState)({status:"active",priority:"all",assignee:"all",dueDate:"all"}),I=async()=>{if(h)try{v(!0);let{data:e,error:t}=await i.OQ.from("todos").select("*").eq("team_id",h).order("created_at",{ascending:!1});if(t)throw t;y(e||[])}catch(e){}finally{v(!1)}};(0,l.useEffect)(()=>{if(!h)return;I();let e=i.OQ.channel("todos:".concat(h)).on("postgres_changes",{event:"*",schema:"public",table:"todos",filter:"team_id=eq.".concat(h)},()=>{I()}).subscribe();return()=>{i.OQ.removeChannel(e)}},[h]);let M=(0,l.useMemo)(()=>p.filter(e=>{if("active"===S.status&&"completed"===e.status||"completed"===S.status&&"completed"!==e.status||"all"!==S.status&&"active"!==S.status&&e.status!==S.status||"all"!==S.priority&&e.priority!==S.priority||"me"===S.assignee&&e.assigned_to!==(null==s?void 0:s.id)||"all"!==S.assignee&&"me"!==S.assignee&&e.assigned_to!==S.assignee)return!1;if("all"!==S.dueDate){let t=new Date(e.due_date),s=new Date,a=new Date(s);a.setDate(s.getDate()+1);let l=new Date(s);switch(l.setDate(s.getDate()+7),S.dueDate){case"overdue":if(t>=s)return!1;break;case"today":if(t.toDateString()!==s.toDateString())return!1;break;case"tomorrow":if(t.toDateString()!==a.toDateString())return!1;break;case"this_week":if(t>l)return!1}}return!D||!!e.title.toLowerCase().includes(D.toLowerCase())}),[p,S,D,null==s?void 0:s.id]),E=async e=>{if(h&&s)try{let{error:t}=await i.OQ.from("todos").insert([{title:e.title,description:e.description,assigned_to:e.assigned_to,due_date:e.due_date,priority:e.priority,team_id:h,created_by:(null==s?void 0:s.id)||"anonymous",status:"pending"}]);if(t)throw t;N(!1)}catch(e){}},U=async(e,t)=>{try{let s={};void 0!==t.title&&(s.title=t.title),void 0!==t.description&&(s.description=t.description),void 0!==t.status&&(s.status=t.status),void 0!==t.priority&&(s.priority=t.priority),void 0!==t.assigned_to&&(s.assigned_to=t.assigned_to),void 0!==t.due_date&&(s.due_date=t.due_date),"completed"!==t.status||t.completed_at||(s.completed_at=new Date().toISOString()),t.status&&"completed"!==t.status&&(s.completed_at=null);let{error:a}=await i.OQ.from("todos").update(s).eq("id",e);if(a)throw a}catch(e){}},q=async e=>{try{let{error:t}=await i.OQ.from("todos").delete().eq("id",e);if(t)throw t}catch(e){}},W=(0,l.useMemo)(()=>{let e=p.length,t=p.filter(e=>"completed"===e.status).length,s=p.filter(e=>"pending"===e.status).length;return{total:e,completed:t,pending:s,inProgress:p.filter(e=>"in_progress"===e.status).length,overdue:p.filter(e=>"completed"!==e.status&&new Date(e.due_date)<new Date).length,completionRate:e>0?Math.round(t/e*100):0}},[p]);return h?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between py-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(d.Z,{className:"h-8 w-8 text-eos-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Todos"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Track action items and assignments"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("div",{className:"flex items-center bg-gray-100 rounded-lg p-1",children:[(0,a.jsx)("button",{onClick:()=>P("list"),className:"px-3 py-1 rounded text-sm transition-colors ".concat("list"===T?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"List"}),(0,a.jsx)("button",{onClick:()=>P("board"),className:"px-3 py-1 rounded text-sm transition-colors ".concat("board"===T?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Board"})]}),(0,a.jsx)("button",{onClick:()=>C(!w),className:"p-2 rounded-lg border transition-colors ".concat(w||Object.values(S).some(e=>"all"!==e&&"active"!==e)?"bg-eos-50 border-eos-200 text-eos-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"),children:(0,a.jsx)(n.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("button",{onClick:()=>N(!0),className:"bg-eos-600 text-white px-4 py-2 rounded-lg hover:bg-eos-700 flex items-center space-x-2",children:[(0,a.jsx)(c.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"hidden sm:block",children:"Add Todo"})]})]})]})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4 mb-6",children:[(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:W.total})]}),(0,a.jsx)(d.Z,{className:"h-8 w-8 text-gray-400"})]})}),(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:W.completed})]}),(0,a.jsx)(d.Z,{className:"h-8 w-8 text-green-400"})]})}),(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"In Progress"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:W.inProgress})]}),(0,a.jsx)(x.Z,{className:"h-8 w-8 text-blue-400"})]})}),(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:W.pending})]}),(0,a.jsx)(m.Z,{className:"h-8 w-8 text-yellow-400"})]})}),(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Overdue"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-red-600",children:W.overdue})]}),(0,a.jsx)(u.Z,{className:"h-8 w-8 text-red-400"})]})}),(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Rate"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-eos-600",children:[W.completionRate,"%"]})]}),(0,a.jsx)(g.Z,{className:"h-8 w-8 text-eos-400"})]})})]}),(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200 mb-6",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(b.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search todos...",value:D,onChange:e=>Z(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-eos-500 focus:border-transparent"})]})}),w&&(0,a.jsx)(B,{filters:S,onFiltersChange:O,onClose:()=>C(!1)}),j?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)("div",{className:"w-8 h-8 border-4 border-eos-200 border-t-eos-600 rounded-full animate-spin"})}):"board"===T?(0,a.jsx)(X,{todos:M,onUpdateTodo:U,onDeleteTodo:q,onEditTodo:k}):(0,a.jsx)("div",{className:"space-y-3",children:0===M.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(d.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No todos found"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:D||Object.values(S).some(e=>"all"!==e&&"active"!==e)?"Try adjusting your search or filters":"Get started by creating your first todo item"}),!D&&!Object.values(S).some(e=>"all"!==e&&"active"!==e)&&(0,a.jsx)("button",{onClick:()=>N(!0),className:"mt-4 bg-eos-600 text-white px-4 py-2 rounded-lg hover:bg-eos-700",children:"Add Todo"})]}):M.map(e=>(0,a.jsx)(A,{todo:e,onUpdate:U,onDelete:q,onClick:()=>k(e)},e.id))})]}),(f||_)&&(0,a.jsx)(Q,{onSubmit:_?e=>U(_.id,e).then(()=>k(null)):E,onClose:()=>{N(!1),k(null)},initialData:_?{title:_.title,description:_.description||"",assigned_to:_.assigned_to,due_date:_.due_date,priority:_.priority}:void 0})]}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Please select a team"}),(0,a.jsx)("button",{onClick:()=>e.push("/"),className:"bg-eos-600 text-white px-6 py-3 rounded-lg hover:bg-eos-700",children:"Back to Dashboard"})]})})}}},function(e){e.O(0,[120,610,973,128,888,774,179],function(){return e(e.s=6407)}),_N_E=e.O()}]);