(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[765],{6038:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});let l=(0,t(9284).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},962:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});let l=(0,t(9284).Z)("message-circle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]])},9821:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});let l=(0,t(9284).Z)("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},6385:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/issues",function(){return t(7842)}])},7842:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return B}});var l=t(1549),a=t(4194),r=t(1700),i=t(4694),o=t(1774),c=t(755),n=t(2765),d=t(2761),x=t(1740),u=t(3616),m=t(119),p=t(9821),g=t(6698),h=t(9284);let b=(0,h.Z)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var y=t(2520),v=t(675),j=t(2746);let f={critical:{color:"bg-red-500",textColor:"text-red-700",bgColor:"bg-red-50"},high:{color:"bg-orange-500",textColor:"text-orange-700",bgColor:"bg-orange-50"},medium:{color:"bg-yellow-500",textColor:"text-yellow-700",bgColor:"bg-yellow-50"},low:{color:"bg-gray-500",textColor:"text-gray-700",bgColor:"bg-gray-50"}},N={obstacle:{icon:d.Z,label:"Obstacle",color:"text-red-600"},opportunity:{icon:x.Z,label:"Opportunity",color:"text-green-600"},process:{icon:u.Z,label:"Process",color:"text-blue-600"},people:{icon:m.Z,label:"People",color:"text-purple-600"},other:{icon:p.Z,label:"Other",color:"text-gray-600"}},w={identified:{label:"Identified",color:"bg-gray-100 text-gray-700"},discussing:{label:"Discussing",color:"bg-blue-100 text-blue-700"},solved:{label:"Solved",color:"bg-green-100 text-green-700"},dropped:{label:"Dropped",color:"bg-gray-100 text-gray-500"}};function k(e){let{issue:s,onUpdate:t,onClick:r,compact:i=!1,dragging:o=!1}=e,[c,d]=(0,a.useState)(!1),[x,m]=(0,a.useState)(!1),p=f[s.priority],h=N[s.type],k=w[s.status],C=h.icon,Z=async e=>{m(!0);try{let l={status:e};"solved"===e&&"solved"!==s.status&&(l.solved_at=new Date().toISOString()),await t(s.id,l)}catch(e){}finally{m(!1),d(!1)}},S=async e=>{m(!0);try{await t(s.id,{priority:e})}catch(e){}finally{m(!1),d(!1)}};return(0,l.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg transition-all duration-200 hover:shadow-md ".concat(o?"shadow-xl ring-2 ring-eos-500 ring-opacity-50":""," ").concat(r?"cursor-pointer":""," ").concat(i?"p-3":"p-4"),onClick:r,children:[(0,l.jsxs)("div",{className:"flex items-start justify-between",children:[(0,l.jsxs)("div",{className:"flex items-start space-x-3 flex-1 min-w-0",children:[(0,l.jsx)("div",{className:"w-1 h-12 ".concat(p.color," rounded-full flex-shrink-0")}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsx)("h3",{className:"font-medium text-gray-900 ".concat(i?"text-sm":"text-base"),children:s.title}),s.description&&!i&&(0,l.jsx)("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:s.description}),(0,l.jsxs)("div",{className:"flex items-center mt-2 space-x-3 text-xs text-gray-500",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,l.jsx)(C,{className:"h-3 w-3 ".concat(h.color)}),(0,l.jsx)("span",{children:h.label})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,l.jsx)(g.Z,{className:"h-3 w-3"}),(0,l.jsx)("span",{children:s.solved_at?"Solved ".concat((0,n.Q)(new Date(s.solved_at))," ago"):"Created ".concat((0,n.Q)(new Date(s.created_at))," ago")})]}),s.owner_id&&(0,l.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,l.jsx)(b,{className:"h-3 w-3"}),(0,l.jsx)("span",{children:"Assigned"})]})]})]})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("button",{onClick:e=>{e.stopPropagation(),d(!c)},className:"p-1 hover:bg-gray-100 rounded text-gray-400 hover:text-gray-600",disabled:x,children:(0,l.jsx)(y.Z,{className:"h-4 w-4"})}),c&&(0,l.jsxs)("div",{className:"absolute right-0 top-8 bg-white shadow-lg border border-gray-200 rounded-lg py-1 z-10 min-w-48",children:[(0,l.jsxs)("div",{className:"px-3 py-2 border-b border-gray-100",children:[(0,l.jsx)("p",{className:"text-xs font-medium text-gray-500 mb-2",children:"CHANGE STATUS"}),(0,l.jsx)("div",{className:"space-y-1",children:Object.entries(w).map(e=>{let[t,a]=e;return(0,l.jsx)("button",{onClick:e=>{e.stopPropagation(),Z(t)},disabled:s.status===t||x,className:"w-full text-left px-2 py-1 text-xs rounded hover:bg-gray-50 disabled:opacity-50 ".concat(s.status===t?"bg-gray-100":""),children:(0,l.jsx)("span",{className:"inline-block px-2 py-1 rounded-full ".concat(a.color),children:a.label})},t)})})]}),(0,l.jsxs)("div",{className:"px-3 py-2 border-b border-gray-100",children:[(0,l.jsx)("p",{className:"text-xs font-medium text-gray-500 mb-2",children:"CHANGE PRIORITY"}),(0,l.jsx)("div",{className:"space-y-1",children:Object.entries(f).map(e=>{let[t,a]=e;return(0,l.jsxs)("button",{onClick:e=>{e.stopPropagation(),S(t)},disabled:s.priority===t||x,className:"w-full text-left px-2 py-1 text-xs rounded hover:bg-gray-50 disabled:opacity-50 flex items-center space-x-2 ".concat(s.priority===t?"bg-gray-100":""),children:[(0,l.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(a.color)}),(0,l.jsx)("span",{className:"capitalize",children:t})]},t)})})]}),(0,l.jsxs)("div",{className:"px-3 py-2",children:[(0,l.jsxs)("button",{onClick:e=>{e.stopPropagation(),d(!1),null==r||r()},className:"w-full text-left px-2 py-1 text-xs rounded hover:bg-gray-50 flex items-center space-x-2",children:[(0,l.jsx)(v.Z,{className:"h-3 w-3"}),(0,l.jsx)("span",{children:"Edit Details"})]}),(0,l.jsxs)("button",{onClick:e=>{e.stopPropagation(),confirm("Are you sure you want to delete this issue?")&&d(!1)},className:"w-full text-left px-2 py-1 text-xs rounded hover:bg-red-50 text-red-600 flex items-center space-x-2",children:[(0,l.jsx)(j.Z,{className:"h-3 w-3"}),(0,l.jsx)("span",{children:"Delete Issue"})]})]})]})]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-100",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat(k.color),children:k.label}),(0,l.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat(p.textColor," ").concat(p.bgColor),children:s.priority})]}),s.solution&&(0,l.jsxs)("div",{className:"flex items-center space-x-1 text-green-600",children:[(0,l.jsx)(u.Z,{className:"h-3 w-3"}),(0,l.jsx)("span",{className:"text-xs",children:"Has Solution"})]})]}),c&&(0,l.jsx)("div",{className:"fixed inset-0 z-0",onClick:()=>d(!1)})]})}var C=t(2162),Z=t(1335),S=t(6468),I=t(4032);let O=[{value:"obstacle",label:"Obstacle",icon:d.Z,color:"text-red-600",description:"Something blocking progress"},{value:"opportunity",label:"Opportunity",icon:x.Z,color:"text-green-600",description:"Potential improvement or growth"},{value:"process",label:"Process",icon:u.Z,color:"text-blue-600",description:"Process improvement needed"},{value:"people",label:"People",icon:m.Z,color:"text-purple-600",description:"People-related issue"},{value:"other",label:"Other",icon:p.Z,color:"text-gray-600",description:"General issue or topic"}],_=[{value:"low",label:"Low",color:"bg-gray-500",description:"Can wait for future discussion"},{value:"medium",label:"Medium",color:"bg-yellow-500",description:"Should be addressed soon"},{value:"high",label:"High",color:"bg-orange-500",description:"Needs attention this week"},{value:"critical",label:"Critical",color:"bg-red-500",description:"Urgent - blocks team progress"}];function P(e){let{onSubmit:s,onClose:t,initialData:r}=e,i=[],[o,c]=(0,a.useState)(!1),{register:n,handleSubmit:d,watch:x,setValue:u,formState:{errors:m}}=(0,C.cI)({defaultValues:{title:(null==r?void 0:r.title)||"",description:(null==r?void 0:r.description)||"",type:(null==r?void 0:r.type)||"other",priority:(null==r?void 0:r.priority)||"medium",owner_id:(null==r?void 0:r.owner_id)||void 0}}),p=x("type"),g=x("priority"),h=async e=>{c(!0);try{await s(e)}catch(e){}finally{c(!1)}};return(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-end sm:items-center justify-center z-50 p-4",children:(0,l.jsxs)("div",{className:"bg-white rounded-t-2xl sm:rounded-2xl w-full max-w-lg max-h-[90vh] overflow-hidden",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:r?"Edit Issue":"Identify New Issue"}),(0,l.jsx)("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,l.jsx)(Z.Z,{className:"h-5 w-5 text-gray-500"})})]}),(0,l.jsxs)("form",{onSubmit:d(h),className:"overflow-y-auto max-h-[calc(90vh-80px)]",children:[(0,l.jsxs)("div",{className:"p-4 space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Issue Title *"}),(0,l.jsx)("input",{...n("title",{required:"Issue title is required",minLength:{value:3,message:"Title must be at least 3 characters"}}),type:"text",placeholder:"Describe the issue in one line...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-eos-500 focus:border-transparent"}),m.title&&(0,l.jsx)("p",{className:"mt-1 text-sm text-red-600",children:m.title.message})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Issue Type *"}),(0,l.jsx)("div",{className:"grid grid-cols-1 gap-2",children:O.map(e=>{let s=e.icon,t=p===e.value;return(0,l.jsx)("button",{type:"button",onClick:()=>u("type",e.value),className:"p-3 rounded-lg border-2 text-left transition-all ".concat(t?"border-eos-500 bg-eos-50":"border-gray-200 hover:border-gray-300"),children:(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)(s,{className:"h-5 w-5 ".concat(e.color)}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("p",{className:"font-medium text-gray-900",children:e.label}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]}),t&&(0,l.jsx)("div",{className:"w-2 h-2 bg-eos-500 rounded-full"})]})},e.value)})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Priority *"}),(0,l.jsx)("div",{className:"grid grid-cols-2 gap-2",children:_.map(e=>{let s=g===e.value;return(0,l.jsx)("button",{type:"button",onClick:()=>u("priority",e.value),className:"p-3 rounded-lg border-2 text-left transition-all ".concat(s?"border-eos-500 bg-eos-50":"border-gray-200 hover:border-gray-300"),children:(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(e.color)}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsx)("p",{className:"font-medium text-gray-900",children:e.label}),(0,l.jsx)("p",{className:"text-xs text-gray-600 truncate",children:e.description})]}),s&&(0,l.jsx)("div",{className:"w-2 h-2 bg-eos-500 rounded-full flex-shrink-0"})]})},e.value)})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,l.jsx)("textarea",{...n("description"),rows:4,placeholder:"Provide more details about the issue...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-eos-500 focus:border-transparent resize-none"}),(0,l.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Optional: Add context, examples, or potential impact"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign to Team Member"}),(0,l.jsxs)("select",{...n("owner_id"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-eos-500 focus:border-transparent",children:[(0,l.jsx)("option",{value:"",children:"No assignment (discuss as team)"}),null==i?void 0:i.map(e=>(0,l.jsxs)("option",{value:e.user_id,children:[e.user.full_name," (",e.seat,")"]},e.user_id))]}),(0,l.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Optional: Who should take ownership of this issue?"})]})]}),(0,l.jsxs)("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:[(0,l.jsxs)("div",{className:"flex space-x-3",children:[(0,l.jsx)("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,l.jsx)("button",{type:"submit",disabled:o,className:"flex-1 bg-eos-600 text-white px-4 py-2 rounded-lg hover:bg-eos-700 disabled:opacity-50 transition-colors flex items-center justify-center space-x-2",children:o?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,l.jsx)("span",{children:"Saving..."})]}):(0,l.jsxs)(l.Fragment,{children:[r?(0,l.jsx)(S.Z,{className:"h-4 w-4"}):(0,l.jsx)(I.Z,{className:"h-4 w-4"}),(0,l.jsx)("span",{children:r?"Update Issue":"Create Issue"})]})})]}),(0,l.jsx)("p",{className:"text-xs text-gray-500 text-center mt-3",children:"Issues will be reviewed in your next Level 10 meeting"})]})]})]})})}var D=t(4919),A=t(3090);let M=[{value:"all",label:"All Statuses"},{value:"identified",label:"Identified"},{value:"discussing",label:"Discussing"},{value:"solved",label:"Solved"},{value:"dropped",label:"Dropped"}],z=[{value:"all",label:"All Priorities"},{value:"critical",label:"Critical",color:"bg-red-500"},{value:"high",label:"High",color:"bg-orange-500"},{value:"medium",label:"Medium",color:"bg-yellow-500"},{value:"low",label:"Low",color:"bg-gray-500"}],E=[{value:"all",label:"All Types"},{value:"obstacle",label:"Obstacle",icon:d.Z,color:"text-red-600"},{value:"opportunity",label:"Opportunity",icon:x.Z,color:"text-green-600"},{value:"process",label:"Process",icon:u.Z,color:"text-blue-600"},{value:"people",label:"People",icon:m.Z,color:"text-purple-600"},{value:"other",label:"Other",icon:p.Z,color:"text-gray-600"}];function T(e){let{filters:s,onFiltersChange:t,onClose:a}=e,r=[],i=(e,l)=>{t({...s,[e]:l})},o=()=>{t({status:"all",priority:"all",type:"all",owner:"all"})},c=Object.values(s).some(e=>"all"!==e),n=[{value:"all",label:"All Owners"},{value:"unassigned",label:"Unassigned Issues"},...(null==r?void 0:r.map(e=>({value:e.user_id,label:e.user.full_name})))||[]];return(0,l.jsxs)("div",{className:"bg-white border-b border-gray-200 p-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(D.Z,{className:"h-5 w-5 text-gray-600"}),(0,l.jsx)("h3",{className:"font-medium text-gray-900",children:"Filters"}),c&&(0,l.jsx)("span",{className:"bg-eos-100 text-eos-700 px-2 py-1 rounded-full text-xs",children:"Active"})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[c&&(0,l.jsxs)("button",{onClick:o,className:"flex items-center space-x-1 text-sm text-gray-600 hover:text-gray-800",children:[(0,l.jsx)(A.Z,{className:"h-4 w-4"}),(0,l.jsx)("span",{children:"Clear"})]}),(0,l.jsx)("button",{onClick:a,className:"p-1 hover:bg-gray-100 rounded",children:(0,l.jsx)(Z.Z,{className:"h-4 w-4 text-gray-500"})})]})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:M.map(e=>(0,l.jsx)("button",{onClick:()=>i("status",e.value),className:"px-3 py-1 rounded-full text-sm transition-colors ".concat(s.status===e.value?"bg-eos-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e.label},e.value))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:z.map(e=>(0,l.jsxs)("button",{onClick:()=>i("priority",e.value),className:"px-3 py-1 rounded-full text-sm transition-colors flex items-center space-x-2 ".concat(s.priority===e.value?"bg-eos-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[e.color&&"all"!==e.value&&(0,l.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(s.priority===e.value?"bg-white":e.color)}),(0,l.jsx)("span",{children:e.label})]},e.value))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:E.map(e=>{let t=e.icon;return(0,l.jsxs)("button",{onClick:()=>i("type",e.value),className:"px-3 py-1 rounded-full text-sm transition-colors flex items-center space-x-2 ".concat(s.type===e.value?"bg-eos-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[t&&(0,l.jsx)(t,{className:"h-3 w-3 ".concat(s.type===e.value?"text-white":e.color)}),(0,l.jsx)("span",{children:e.label})]},e.value)})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Owner"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:n.map(e=>(0,l.jsx)("button",{onClick:()=>i("owner",e.value),className:"px-3 py-1 rounded-full text-sm transition-colors ".concat(s.owner===e.value?"bg-eos-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e.label},e.value))})]})]}),c&&(0,l.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,l.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,l.jsxs)("span",{className:"text-gray-600",children:["Active filters: ",Object.values(s).filter(e=>"all"!==e).length]}),(0,l.jsx)("button",{onClick:o,className:"text-eos-600 hover:text-eos-700 font-medium",children:"Clear all filters"})]})})]})}var H=t(777),L=t(6038),q=t(962);let F=(0,h.Z)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),U={identified:{title:"Identify",description:"New issues identified",icon:L.Z,color:"gray",bgColor:"bg-gray-50",borderColor:"border-gray-200",textColor:"text-gray-700"},discussing:{title:"Discuss",description:"Issues being discussed",icon:q.Z,color:"blue",bgColor:"bg-blue-50",borderColor:"border-blue-200",textColor:"text-blue-700"},solved:{title:"Solve",description:"Issues resolved",icon:u.Z,color:"green",bgColor:"bg-green-50",borderColor:"border-green-200",textColor:"text-green-700"},dropped:{title:"Dropped",description:"Issues no longer relevant",icon:Z.Z,color:"gray",bgColor:"bg-gray-50",borderColor:"border-gray-300",textColor:"text-gray-500"}};function G(e){let{issuesByStatus:s,onUpdateIssue:t,onSelectIssue:r}=e,[i,o]=(0,a.useState)(null),c=e=>{let a=U[e],i=s[e],o=a.icon;return(0,l.jsx)("div",{className:"flex-1 min-w-0",children:(0,l.jsxs)("div",{className:"".concat(a.bgColor," ").concat(a.borderColor," border rounded-lg h-full flex flex-col"),children:[(0,l.jsxs)("div",{className:"p-3 border-b border-gray-200",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(o,{className:"h-4 w-4 ".concat(a.textColor)}),(0,l.jsx)("h3",{className:"font-medium ".concat(a.textColor),children:a.title}),(0,l.jsx)("span",{className:"bg-white px-2 py-1 rounded text-xs font-medium text-gray-600",children:i.length})]}),(0,l.jsx)("button",{className:"p-1 hover:bg-white hover:bg-opacity-50 rounded",children:(0,l.jsx)(F,{className:"h-4 w-4 text-gray-500"})})]}),(0,l.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:a.description})]}),(0,l.jsx)(H.bK,{droppableId:e,children:(s,a)=>(0,l.jsxs)("div",{ref:s.innerRef,...s.droppableProps,className:"flex-1 p-3 space-y-3 min-h-32 transition-colors ".concat(a.isDraggingOver?"bg-white bg-opacity-50":""),children:[i.map((e,s)=>(0,l.jsx)(H._l,{draggableId:e.id,index:s,children:(s,a)=>(0,l.jsx)("div",{ref:s.innerRef,...s.draggableProps,...s.dragHandleProps,className:"transition-transform ".concat(a.isDragging?"rotate-2 scale-105 shadow-lg":""),style:{...s.draggableProps.style},children:(0,l.jsx)(k,{issue:e,onUpdate:t,onClick:()=>r(e),compact:!0,dragging:a.isDragging})})},e.id)),s.placeholder,0===i.length&&(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[(0,l.jsx)(o,{className:"h-8 w-8 text-gray-300 mb-2"}),(0,l.jsxs)("p",{className:"text-sm text-gray-500",children:["identified"===e&&"No new issues","discussing"===e&&"No active discussions","solved"===e&&"No solved issues","dropped"===e&&"No dropped issues"]}),"identified"===e&&(0,l.jsxs)("button",{className:"mt-2 text-xs text-eos-600 hover:text-eos-700 flex items-center",children:[(0,l.jsx)(I.Z,{className:"h-3 w-3 mr-1"}),"Add Issue"]})]})]})})]})},e)};return(0,l.jsxs)("div",{className:"h-full overflow-hidden",children:[(0,l.jsx)(H.Z5,{onDragStart:e=>{let t=e.draggableId;o(Object.values(s).flat().find(e=>e.id===t)||null)},onDragEnd:e=>{o(null);let{destination:s,source:l,draggableId:a}=e;if(!s||s.droppableId===l.droppableId&&s.index===l.index)return;let r=s.droppableId,i={status:r};"solved"===r&&"solved"!==l.droppableId&&(i.solved_at=new Date().toISOString()),t(a,i)},children:(0,l.jsx)("div",{className:"h-full overflow-x-auto",children:(0,l.jsx)("div",{className:"flex space-x-4 p-4 min-w-max h-full",children:Object.keys(U).map(e=>c(e))})})}),i&&(0,l.jsxs)("div",{className:"fixed top-4 right-4 bg-white shadow-lg rounded-lg p-3 z-50 max-w-xs",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("critical"===i.priority?"bg-red-500":"high"===i.priority?"bg-orange-500":"medium"===i.priority?"bg-yellow-500":"bg-gray-500")}),(0,l.jsx)("span",{className:"text-sm font-medium text-gray-900",children:i.title})]}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Drag to update status"})]})]})}let Q=(0,h.Z)("layout-grid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),R=(0,h.Z)("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]),V=(0,h.Z)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var X=t(5985);function B(e){let{}=e,{activeTeam:s,user:t}=(0,r.aC)(),{issues:n,loading:d,error:x}=(0,i.F)(),[u,m]=(0,a.useState)(!1),[p,g]=(0,a.useState)(null),[h,b]=(0,a.useState)("board"),[y,v]=(0,a.useState)({status:"all",priority:"all",type:"all",owner:"all"}),[j,f]=(0,a.useState)(""),[N,w]=(0,a.useState)(!1),C=n.filter(e=>("all"===y.status||e.status===y.status)&&("all"===y.priority||e.priority===y.priority)&&("all"===y.type||e.type===y.type)&&("all"===y.owner||e.owner_id===y.owner)&&(!j||!!e.title.toLowerCase().includes(j.toLowerCase()))),Z={identified:C.filter(e=>"identified"===e.status),discussing:C.filter(e=>"discussing"===e.status),solved:C.filter(e=>"solved"===e.status),dropped:C.filter(e=>"dropped"===e.status)},S=async e=>{if(s&&t)try{let l={team_id:s.id,created_by:t.id,...e,status:"identified"},{error:a}=await o.OQ.from("issues").insert([l]);if(a)throw a;m(!1)}catch(e){}},O=async(e,s)=>{try{let{error:t}=await o.OQ.from("issues").update({...s,updated_at:new Date().toISOString()}).eq("id",e);if(t)throw t}catch(e){}};if(d)return(0,l.jsx)(c.Z,{children:(0,l.jsx)("div",{className:"p-4",children:(0,l.jsx)("div",{className:"animate-pulse space-y-4",children:[void 0,void 0,void 0].map((e,s)=>(0,l.jsx)("div",{className:"h-32 bg-gray-200 rounded-lg"},s))})})});if(x)return(0,l.jsx)(c.Z,{children:(0,l.jsx)("div",{className:"p-4",children:(0,l.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,l.jsxs)("p",{className:"text-red-800",children:["Error loading issues: ",x]})})})});let _={critical:C.filter(e=>"critical"===e.priority).length,high:C.filter(e=>"high"===e.priority).length,medium:C.filter(e=>"medium"===e.priority).length,low:C.filter(e=>"low"===e.priority).length},A={identified:Z.identified.length,discussing:Z.discussing.length,solved:Z.solved.length,dropped:Z.dropped.length};return(0,l.jsxs)(c.Z,{children:[(0,l.jsxs)("div",{className:"bg-white border-b border-gray-200 px-4 py-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsxs)("h1",{className:"text-lg font-semibold text-gray-900",children:["Issues (",C.length,")"]}),(0,l.jsx)("div",{className:"text-sm text-gray-500",children:"IDS Methodology"})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsxs)("button",{onClick:()=>w(!N),className:"p-2 hover:bg-gray-100 rounded-lg relative",children:[(0,l.jsx)(D.Z,{className:"h-5 w-5 text-gray-600"}),Object.values(y).some(e=>"all"!==e)&&(0,l.jsx)("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-eos-500 rounded-full"})]}),(0,l.jsxs)("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[(0,l.jsx)("button",{onClick:()=>b("board"),className:"p-1 rounded ".concat("board"===h?"bg-white text-eos-600 shadow-sm":"text-gray-600"),children:(0,l.jsx)(Q,{className:"h-4 w-4"})}),(0,l.jsx)("button",{onClick:()=>b("list"),className:"p-1 rounded ".concat("list"===h?"bg-white text-eos-600 shadow-sm":"text-gray-600"),children:(0,l.jsx)(R,{className:"h-4 w-4"})})]}),(0,l.jsx)("button",{onClick:()=>m(!0),className:"bg-eos-600 text-white p-2 rounded-lg hover:bg-eos-700 transition-colors",children:(0,l.jsx)(I.Z,{className:"h-5 w-5"})})]})]}),(0,l.jsxs)("div",{className:"mt-3 grid grid-cols-2 gap-3 text-sm",children:[(0,l.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Priority Distribution"}),(0,l.jsx)(V,{className:"h-4 w-4 text-gray-400"})]}),(0,l.jsxs)("div",{className:"mt-2 flex space-x-2",children:[_.critical>0&&(0,l.jsxs)("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded text-xs",children:[_.critical," Critical"]}),_.high>0&&(0,l.jsxs)("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded text-xs",children:[_.high," High"]}),_.medium>0&&(0,l.jsxs)("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs",children:[_.medium," Med"]})]})]}),(0,l.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Status Overview"}),(0,l.jsx)(X.Z,{className:"h-4 w-4 text-gray-400"})]}),(0,l.jsxs)("div",{className:"mt-2 grid grid-cols-2 gap-1 text-xs",children:[(0,l.jsxs)("span",{className:"text-gray-700",children:[A.identified," New"]}),(0,l.jsxs)("span",{className:"text-blue-700",children:[A.discussing," Discussing"]}),(0,l.jsxs)("span",{className:"text-green-700",children:[A.solved," Solved"]}),(0,l.jsxs)("span",{className:"text-gray-500",children:[A.dropped," Dropped"]})]})]})]}),(0,l.jsx)("div",{className:"mt-3",children:(0,l.jsx)("input",{type:"text",placeholder:"Search issues...",value:j,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-eos-500 focus:border-transparent"})})]}),N&&(0,l.jsx)(T,{filters:y,onFiltersChange:v,onClose:()=>w(!1)}),(0,l.jsx)("div",{className:"flex-1 overflow-hidden",children:"board"===h?(0,l.jsx)(G,{issuesByStatus:Z,onUpdateIssue:O,onSelectIssue:g}):(0,l.jsx)("div",{className:"p-4 space-y-3 overflow-y-auto",children:0===C.length?(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,l.jsx)(I.Z,{className:"h-8 w-8 text-gray-400"})}),(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Issues Found"}),(0,l.jsx)("p",{className:"text-gray-500 mb-4",children:Object.values(y).some(e=>"all"!==e)||j?"No issues match your current filters.":"Get started by identifying your first issue."}),(0,l.jsx)("button",{onClick:()=>m(!0),className:"bg-eos-600 text-white px-4 py-2 rounded-lg hover:bg-eos-700 transition-colors",children:"Create First Issue"})]}):C.map(e=>(0,l.jsx)(k,{issue:e,onUpdate:O,onClick:()=>g(e)},e.id))})}),u&&(0,l.jsx)(P,{onSubmit:S,onClose:()=>m(!1)})]})}}},function(e){e.O(0,[120,610,973,755,810,888,774,179],function(){return e(e.s=6385)}),_N_E=e.O()}]);