(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[972],{9284:function(e,s,t){"use strict";t.d(s,{Z:function(){return x}});var a=t(4194);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,t)=>t?t.toUpperCase():s.toLowerCase()),n=e=>{let s=l(e);return s.charAt(0).toUpperCase()+s.slice(1)},i=(...e)=>e.filter((e,s,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===s).join(" ").trim(),c=e=>{for(let s in e)if(s.startsWith("aria-")||"role"===s||"title"===s)return!0};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,a.forwardRef)(({color:e="currentColor",size:s=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:l="",children:n,iconNode:o,...x},m)=>(0,a.createElement)("svg",{ref:m,...d,width:s,height:s,stroke:e,strokeWidth:r?24*Number(t)/Number(s):t,className:i("lucide",l),...!n&&!c(x)&&{"aria-hidden":"true"},...x},[...o.map(([e,s])=>(0,a.createElement)(e,s)),...Array.isArray(n)?n:[n]])),x=(e,s)=>{let t=(0,a.forwardRef)(({className:t,...l},c)=>(0,a.createElement)(o,{ref:c,iconNode:s,className:i(`lucide-${r(n(e))}`,`lucide-${e}`,t),...l}));return t.displayName=n(e),t}},8504:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9284).Z)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},2995:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9284).Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},4916:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9284).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3616:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9284).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},2022:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9284).Z)("circle-play",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]])},8107:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9284).Z)("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},6698:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9284).Z)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},6038:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9284).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},962:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9284).Z)("message-circle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]])},9821:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9284).Z)("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},4401:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9284).Z)("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},4032:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9284).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8534:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9284).Z)("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},254:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9284).Z)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]])},2802:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9284).Z)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},7241:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9284).Z)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]])},361:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9284).Z)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},2761:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9284).Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},119:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9284).Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},5985:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9284).Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},9526:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/meeting/start",function(){return t(4158)}])},4158:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return z}});var a=t(1549),r=t(4194),l=t(6393),n=t(1700),i=t(1774),c=t(2022),d=t(9821),o=t(8504),x=t(2802),m=t(5985),u=t(8534),h=t(4916),g=t(3616),p=t(6698);function j(e){let{startTime:s,className:t=""}=e,[l,n]=(0,r.useState)(0);return(0,r.useEffect)(()=>{let e=new Date(s).getTime(),t=()=>{n(Math.floor((new Date().getTime()-e)/1e3))};t();let a=setInterval(t,1e3);return()=>clearInterval(a)},[s]),(0,a.jsxs)("div",{className:"flex items-center space-x-2 ".concat(t),children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"font-mono text-sm font-medium ".concat((()=>{let e=Math.floor(l/60);return e>=90?"text-red-600":e>=75?"text-yellow-600":"text-green-600"})()),children:(e=>{let s=Math.floor(e/3600),t=Math.floor(e%3600/60),a=e%60;return s>0?"".concat(s,":").concat(t.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0")):"".concat(t,":").concat(a.toString().padStart(2,"0"))})(l)})]})}var b=t(8107);function y(e){let{participants:s,className:t=""}=e,r=e=>{switch(e){case"online":return"bg-green-500";case"away":return"bg-yellow-500";default:return"bg-gray-400"}},l=e=>e.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2);return(0,a.jsxs)("div",{className:"flex items-center space-x-3 ".concat(t),children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:s.length})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[s.slice(0,5).map(e=>{var s,t,n;return(0,a.jsxs)("div",{className:"relative",title:"".concat((null===(s=e.user)||void 0===s?void 0:s.full_name)||"Anonymous"," (").concat(e.status,")"),children:[(null===(t=e.user)||void 0===t?void 0:t.avatar_url)?(0,a.jsx)("img",{src:e.user.avatar_url,alt:e.user.full_name,className:"w-8 h-8 rounded-full border-2 border-white"}):(0,a.jsx)("div",{className:"w-8 h-8 bg-eos-600 rounded-full border-2 border-white flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-xs font-medium text-white",children:l((null===(n=e.user)||void 0===n?void 0:n.full_name)||"Unknown")})}),(0,a.jsx)("div",{className:"absolute -bottom-0.5 -right-0.5",children:(0,a.jsx)(b.Z,{className:"h-3 w-3 border border-white rounded-full ".concat(r(e.status)),fill:"currentColor"})})]},e.id)}),s.length>5&&(0,a.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded-full border-2 border-white flex items-center justify-center",children:(0,a.jsxs)("span",{className:"text-xs font-medium text-gray-600",children:["+",s.length-5]})})]})]})}var f=t(2995),N=t(4401);let v=[{key:"segue",title:"Segue",description:"Good news & personal/business best",icon:d.Z,color:"bg-blue-500"},{key:"scorecard",title:"Scorecard",description:"Review weekly metrics",icon:o.Z,color:"bg-green-500"},{key:"rock_review",title:"Rock Review",description:"Quarterly goals progress",icon:x.Z,color:"bg-purple-500"},{key:"customer_employee_headlines",title:"Headlines",description:"Customer & employee updates",icon:m.Z,color:"bg-orange-500"},{key:"todo_review",title:"To-Do Review",description:"Previous week assignments",icon:u.Z,color:"bg-indigo-500"},{key:"ids",title:"IDS",description:"Identify, Discuss, Solve",icon:h.Z,color:"bg-red-500"},{key:"conclude",title:"Conclude",description:"Recap & next steps",icon:g.Z,color:"bg-gray-500"}];function w(e){let{agenda:s,currentSegment:t,onSegmentClick:r}=e,l=e=>{if(s[e].completed)return"completed";if(e===t)return"current";let a=v.findIndex(e=>e.key===t),r=v.findIndex(s=>s.key===e);return r<a?"completed":r===a?"current":"upcoming"},n=Object.values(s).reduce((e,s)=>e+s.duration,0),i=Object.values(s).filter(e=>e.completed).reduce((e,s)=>e+s.duration,0);return(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Meeting Agenda"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mb-4",children:["Progress: ",i," / ",n," minutes"]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-eos-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(i/n*100,"%")}})})]}),(0,a.jsx)("div",{className:"space-y-3",children:v.map((e,t)=>{e.icon;let n=l(e.key),i=s[e.key];return(0,a.jsx)("button",{onClick:()=>r(e.key),className:"w-full text-left p-3 rounded-lg transition-all duration-200 ".concat("current"===n?"bg-eos-50 border-2 border-eos-200 shadow-sm":"completed"===n?"bg-green-50 border border-green-200":"bg-gray-50 border border-gray-200 hover:bg-gray-100"),disabled:"upcoming"===n,children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-lg flex items-center justify-center ".concat("completed"===n?"bg-green-100":"current"===n?"bg-eos-100":"bg-gray-100"),children:"completed"===n?(0,a.jsx)(f.Z,{className:"h-4 w-4 text-green-600"}):"current"===n?(0,a.jsx)(N.Z,{className:"h-4 w-4 text-eos-600"}):(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600",children:t+1})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h4",{className:"text-sm font-medium ".concat("current"===n?"text-eos-700":"completed"===n?"text-green-700":"text-gray-900"),children:e.title}),(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-xs text-gray-500",children:[(0,a.jsx)(p.Z,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:[i.duration,"m"]})]})]}),(0,a.jsx)("p",{className:"text-xs text-gray-600 mt-0.5 truncate",children:e.description})]})]})},e.key)})}),(0,a.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"text-xs text-gray-500 text-center",children:[(0,a.jsx)("p",{children:"Tip: Click on segments to navigate"}),(0,a.jsx)("p",{children:"Stay focused and keep time"})]})})]})}var k=t(9284);let _=(0,k.Z)("heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),S=(0,k.Z)("thumbs-up",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);function Z(e){let{onComplete:s,duration:t}=e,l=[],{user:i}=(0,n.aC)(),[c,o]=(0,r.useState)([]),[x,m]=(0,r.useState)(""),[u,h]=(0,r.useState)("personal"),[j,b]=(0,r.useState)(60*t),[y,f]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e;return y&&j>0&&(e=setInterval(()=>{b(e=>e-1)},1e3)),()=>clearInterval(e)},[y,j]);let N=()=>{var e;if(!x.trim()||!i)return;let s={id:Date.now().toString(),user_id:(null==i?void 0:i.id)||"",user_name:(null==i?void 0:null===(e=i.user_metadata)||void 0===e?void 0:e.full_name)||(null==i?void 0:i.email)||"User",content:x.trim(),type:u,timestamp:new Date().toISOString()};o(e=>[...e,s]),m("")};return(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-10 h-10 bg-blue-100 rounded-lg",children:(0,a.jsx)(d.Z,{className:"h-6 w-6 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Segue"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Share good news & personal/business highlights"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[y&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"font-mono text-sm ".concat(j<=60?"text-red-600":"text-gray-600"),children:"".concat(Math.floor(j/60),":").concat((j%60).toString().padStart(2,"0"))})]}),y?(0,a.jsxs)("button",{onClick:s,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center space-x-2",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Complete"})]}):(0,a.jsxs)("button",{onClick:()=>{f(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Start Segue"})]})]})]}),y?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Share your good news:"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("button",{onClick:()=>h("personal"),className:"px-3 py-1 rounded-full text-xs transition-colors ".concat("personal"===u?"bg-pink-100 text-pink-700 border border-pink-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[(0,a.jsx)(_,{className:"h-3 w-3 inline mr-1"}),"Personal"]}),(0,a.jsxs)("button",{onClick:()=>h("business"),className:"px-3 py-1 rounded-full text-xs transition-colors ".concat("business"===u?"bg-blue-100 text-blue-700 border border-blue-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[(0,a.jsx)(S,{className:"h-3 w-3 inline mr-1"}),"Business"]})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("input",{type:"text",value:x,onChange:e=>m(e.target.value),onKeyPress:e=>"Enter"===e.key&&N(),placeholder:"Share your ".concat(u," good news..."),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,a.jsx)("button",{onClick:N,disabled:!x.trim(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add"})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[c.map(e=>(0,a.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat("personal"===e.type?"bg-pink-100 text-pink-600":"bg-blue-100 text-blue-600"),children:"personal"===e.type?(0,a.jsx)(_,{className:"h-4 w-4"}):(0,a.jsx)(S,{className:"h-4 w-4"})})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:e.user_name}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("personal"===e.type?"bg-pink-100 text-pink-700":"bg-blue-100 text-blue-700"),children:e.type})]}),(0,a.jsx)("p",{className:"text-gray-700 mt-1",children:e.content}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:new Date(e.timestamp).toLocaleTimeString()})]})]})},e.id)),0===c.length&&(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(d.Z,{className:"mx-auto h-8 w-8 mb-2"}),(0,a.jsx)("p",{children:"No items shared yet. Be the first to share some good news!"})]})]}),l&&l.length>0&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Team Participation"}),(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:l.map(e=>{let s=c.some(s=>s.user_id===e.user_id);return(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-2 rounded ".concat(s?"bg-green-100 text-green-700":"bg-white text-gray-600"),children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(s?"bg-green-500":"bg-gray-300")}),(0,a.jsx)("span",{className:"text-xs font-medium truncate",children:e.user.full_name})]},e.id)})})]})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(d.Z,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Ready to start the Segue?"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:["Take ",t," minutes for everyone to share good news and highlights from their personal and business life. This helps connect the team and start on a positive note."]}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 max-w-md mx-auto",children:[(0,a.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"Segue Guidelines:"}),(0,a.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1 text-left",children:[(0,a.jsx)("li",{children:"• Share personal good news or wins"}),(0,a.jsx)("li",{children:"• Mention business accomplishments"}),(0,a.jsx)("li",{children:"• Keep it positive and brief"}),(0,a.jsx)("li",{children:"• Everyone should participate"})]})]})]})]})}var C=t(361),D=t(2761),I=t(7241);function M(e){let{teamId:s,onComplete:t,duration:l}=e,[n,c]=(0,r.useState)([]),[d,x]=(0,r.useState)([]),[m,u]=(0,r.useState)(!0),[h,j]=(0,r.useState)(60*l),[b,y]=(0,r.useState)(!1);(0,r.useEffect)(()=>{f()},[s]),(0,r.useEffect)(()=>{let e;return b&&h>0&&(e=setInterval(()=>{j(e=>e-1)},1e3)),()=>clearInterval(e)},[b,h]);let f=async()=>{try{u(!0);let e=new Date,t=new Date(e);t.setDate(e.getDate()-e.getDay());let a=t.toISOString().split("T")[0],{data:r,error:l}=await i.OQ.from("scorecard_metrics").select("\n          *,\n          owner:users(full_name, email, avatar_url)\n        ").eq("scorecard.team_id",s).eq("active",!0).order("sort_order");if(l)throw l;let{data:n,error:d}=await i.OQ.from("scorecard_entries").select("*").eq("week_ending",a).in("metric_id",(r||[]).map(e=>e.id));if(d)throw d;c(r||[]),x(n||[])}catch(e){}finally{u(!1)}},N=e=>{let s=d.find(s=>s.metric_id===e.id);return s?s.value>=e.goal?"green":s.value>=.8*e.goal?"yellow":"red":"missing"},v=e=>{switch(e){case"green":return"text-green-600 bg-green-100";case"yellow":return"text-yellow-600 bg-yellow-100";case"red":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},w=e=>{switch(e){case"green":return(0,a.jsx)(C.Z,{className:"h-4 w-4"});case"yellow":return(0,a.jsx)(D.Z,{className:"h-4 w-4"});case"red":return(0,a.jsx)(I.Z,{className:"h-4 w-4"});default:return(0,a.jsx)(p.Z,{className:"h-4 w-4"})}},k=(e,s)=>{switch(s){case"currency":return"$".concat(e.toLocaleString());case"percentage":return"".concat(e,"%");case"boolean":return e?"Yes":"No";default:return e.toString()}};return m?(0,a.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)("div",{className:"w-8 h-8 border-4 border-eos-200 border-t-eos-600 rounded-full animate-spin"})})}):(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-10 h-10 bg-green-100 rounded-lg",children:(0,a.jsx)(o.Z,{className:"h-6 w-6 text-green-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Scorecard Review"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Review weekly metrics and performance"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[b&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"font-mono text-sm ".concat(h<=60?"text-red-600":"text-gray-600"),children:"".concat(Math.floor(h/60),":").concat((h%60).toString().padStart(2,"0"))})]}),b?(0,a.jsxs)("button",{onClick:t,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center space-x-2",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Complete"})]}):(0,a.jsxs)("button",{onClick:()=>{y(!0)},className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center space-x-2",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Start Review"})]})]})]}),b?(0,a.jsx)("div",{className:"space-y-4",children:0===n.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(o.Z,{className:"mx-auto h-8 w-8 mb-2"}),(0,a.jsx)("p",{children:"No scorecard metrics found. Set up your scorecard in the Scorecard section."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"grid grid-cols-4 gap-4 mb-6",children:["green","yellow","red","missing"].map(e=>{let s=n.filter(s=>N(s)===e).length;return(0,a.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-sm font-medium ".concat(v(e)),children:[w(e),(0,a.jsx)("span",{className:"ml-1",children:s})]}),(0,a.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:{green:"On Track",yellow:"At Risk",red:"Off Track",missing:"Missing Data"}[e]})]},e)})}),(0,a.jsx)("div",{className:"space-y-3",children:n.map(e=>{var s;let t=d.find(s=>s.metric_id===e.id),r=N(e);return(0,a.jsx)("div",{className:"p-4 rounded-lg border-2 transition-colors ".concat("red"===r||"missing"===r?"border-red-200 bg-red-50":"yellow"===r?"border-yellow-200 bg-yellow-50":"border-green-200 bg-green-50"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsxs)("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat(v(r)),children:[w(r),(0,a.jsx)("span",{className:"ml-1",children:"missing"===r?"No Data":r.toUpperCase()})]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-sm",children:[(0,a.jsxs)("span",{className:"text-gray-600",children:["Owner: ",(0,a.jsx)("span",{className:"font-medium",children:null===(s=e.owner)||void 0===s?void 0:s.full_name})]}),(0,a.jsxs)("span",{className:"text-gray-600",children:["Goal: ",(0,a.jsx)("span",{className:"font-medium",children:k(e.goal,e.measurement_type)})]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:t?k(t.value,e.measurement_type):"—"}),t&&t.notes&&(0,a.jsx)("p",{className:"text-xs text-gray-600 mt-1 max-w-xs",children:t.notes})]})]})},e.id)})}),(0,a.jsxs)("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"During Scorecard Review:"}),(0,a.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,a.jsx)("li",{children:"• Call out red and yellow metrics"}),(0,a.jsx)("li",{children:"• Ask metric owners for quick explanations"}),(0,a.jsx)("li",{children:"• Add systemic issues to the Issues List"}),(0,a.jsx)("li",{children:"• Don't solve problems here - just identify them"})]})]})]})}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(o.Z,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Ready to review the Scorecard?"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:["Take ",l," minutes to review this week's metrics. Focus on what's off track and identify any issues that need to be added to the Issues List."]}),(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 max-w-md mx-auto",children:[(0,a.jsx)("h4",{className:"font-medium text-green-900 mb-2",children:"Review Guidelines:"}),(0,a.jsxs)("ul",{className:"text-sm text-green-800 space-y-1 text-left",children:[(0,a.jsx)("li",{children:"• Quickly scan all metrics"}),(0,a.jsx)("li",{children:"• Focus on red and yellow items"}),(0,a.jsx)("li",{children:"• Identify patterns and trends"}),(0,a.jsx)("li",{children:"• Add issues to the Issues List"}),(0,a.jsx)("li",{children:"• Keep discussion brief"})]})]})]})]})}function O(e){let{teamId:s,onComplete:t,duration:l}=e,[n,c]=(0,r.useState)([]),[d,o]=(0,r.useState)(!0),[m,u]=(0,r.useState)(60*l),[h,j]=(0,r.useState)(!1);(0,r.useEffect)(()=>{b()},[s]),(0,r.useEffect)(()=>{let e;return h&&m>0&&(e=setInterval(()=>{u(e=>e-1)},1e3)),()=>clearInterval(e)},[h,m]);let b=async()=>{try{o(!0);let e=new Date,t="Q".concat(Math.ceil((e.getMonth()+1)/3)," ").concat(e.getFullYear()),{data:a,error:r}=await i.OQ.from("rocks").select("\n          *,\n          owner:users(full_name, email, avatar_url)\n        ").eq("team_id",s).eq("quarter",t).order("priority",{ascending:!0});if(r)throw r;c(a||[])}catch(e){}finally{o(!1)}},y=async(e,s)=>{try{let{error:t}=await i.OQ.from("rocks").update({status:s,updated_at:new Date().toISOString()}).eq("id",e);if(t)throw t;c(t=>t.map(t=>t.id===e?{...t,status:s}:t))}catch(e){}},f=e=>{switch(e){case"complete":return"text-green-600 bg-green-100 border-green-200";case"on_track":return"text-blue-600 bg-blue-100 border-blue-200";case"off_track":return"text-red-600 bg-red-100 border-red-200";default:return"text-gray-600 bg-gray-100 border-gray-200"}},N=e=>{switch(e){case"complete":return(0,a.jsx)(g.Z,{className:"h-4 w-4"});case"on_track":return(0,a.jsx)(C.Z,{className:"h-4 w-4"});case"off_track":return(0,a.jsx)(I.Z,{className:"h-4 w-4"});default:return(0,a.jsx)(D.Z,{className:"h-4 w-4"})}},v=e=>e>=90?"bg-green-500":e>=70?"bg-blue-500":e>=50?"bg-yellow-500":"bg-red-500";return d?(0,a.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)("div",{className:"w-8 h-8 border-4 border-eos-200 border-t-eos-600 rounded-full animate-spin"})})}):(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-10 h-10 bg-purple-100 rounded-lg",children:(0,a.jsx)(x.Z,{className:"h-6 w-6 text-purple-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Rock Review"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Review quarterly goal progress"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[h&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"font-mono text-sm ".concat(m<=60?"text-red-600":"text-gray-600"),children:"".concat(Math.floor(m/60),":").concat((m%60).toString().padStart(2,"0"))})]}),h?(0,a.jsxs)("button",{onClick:t,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center space-x-2",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Complete"})]}):(0,a.jsxs)("button",{onClick:()=>{j(!0)},className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 flex items-center space-x-2",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Start Review"})]})]})]}),h?(0,a.jsx)("div",{className:"space-y-4",children:0===n.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(x.Z,{className:"mx-auto h-8 w-8 mb-2"}),(0,a.jsx)("p",{children:"No rocks found for this quarter. Create rocks in the Rocks section."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"grid grid-cols-4 gap-4 mb-6",children:["complete","on_track","off_track","not_started"].map(e=>{let s=n.filter(s=>s.status===e).length;return(0,a.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-sm font-medium border ".concat(f(e)),children:[N(e),(0,a.jsx)("span",{className:"ml-1",children:s})]}),(0,a.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:{complete:"Complete",on_track:"On Track",off_track:"Off Track",not_started:"Not Started"}[e]})]},e)})}),(0,a.jsx)("div",{className:"space-y-4",children:n.map(e=>{var s;return(0,a.jsx)("div",{className:"p-4 rounded-lg border-2 transition-colors ".concat("off_track"===e.status||"not_started"===e.status?"border-red-200 bg-red-50":"complete"===e.status?"border-green-200 bg-green-50":"border-blue-200 bg-blue-50"),children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.title}),(0,a.jsxs)("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:["Priority ",e.priority]})]}),e.description&&(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,a.jsxs)("span",{className:"text-gray-600",children:["Owner: ",(0,a.jsx)("span",{className:"font-medium",children:null===(s=e.owner)||void 0===s?void 0:s.full_name})]}),(0,a.jsxs)("span",{className:"text-gray-600",children:["Due: ",(0,a.jsx)("span",{className:"font-medium",children:new Date(e.due_date).toLocaleDateString()})]})]}),(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm mb-1",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Progress"}),(0,a.jsxs)("span",{className:"font-medium",children:[e.completion_percentage,"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(v(e.completion_percentage)),style:{width:"".concat(e.completion_percentage,"%")}})})]})]}),(0,a.jsx)("div",{className:"ml-4 flex flex-col space-y-2",children:(0,a.jsx)("div",{className:"flex flex-col space-y-1",children:["on_track","off_track","complete"].map(s=>(0,a.jsxs)("button",{onClick:()=>y(e.id,s),className:"px-3 py-1 rounded text-xs font-medium transition-colors border ".concat(e.status===s?f(s):"bg-white text-gray-600 border-gray-300 hover:bg-gray-50"),children:[N(s),(0,a.jsx)("span",{className:"ml-1",children:"on_track"===s?"On Track":"off_track"===s?"Off Track":"Complete"})]},s))})})]})},e.id)})}),(0,a.jsxs)("div",{className:"mt-6 p-4 bg-purple-50 border border-purple-200 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium text-purple-900 mb-2",children:"During Rock Review:"}),(0,a.jsxs)("ul",{className:"text-sm text-purple-800 space-y-1",children:[(0,a.jsx)("li",{children:"• Each owner gives a quick status update"}),(0,a.jsx)("li",{children:"• Focus on off-track rocks"}),(0,a.jsx)("li",{children:"• Identify obstacles and add them to Issues"}),(0,a.jsx)("li",{children:"• Update completion percentages"}),(0,a.jsx)("li",{children:"• Don't solve problems here - just report status"})]})]})]})}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(x.Z,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Ready to review quarterly Rocks?"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:["Take ",l," minutes to review progress on quarterly goals. Update status for each rock and identify any obstacles that need to become issues."]}),(0,a.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 max-w-md mx-auto",children:[(0,a.jsx)("h4",{className:"font-medium text-purple-900 mb-2",children:"Review Guidelines:"}),(0,a.jsxs)("ul",{className:"text-sm text-purple-800 space-y-1 text-left",children:[(0,a.jsx)("li",{children:"• Go through each rock quickly"}),(0,a.jsx)("li",{children:"• Owner reports: On Track or Off Track"}),(0,a.jsx)("li",{children:"• Update completion percentage"}),(0,a.jsx)("li",{children:"• Add obstacles to Issues List"}),(0,a.jsx)("li",{children:"• Keep updates brief"})]})]})]})]})}var R=t(119);let T=(0,k.Z)("building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);function A(e){let{onComplete:s,duration:t}=e,l=[],[n,i]=(0,r.useState)([]),[c,d]=(0,r.useState)(""),[o,x]=(0,r.useState)("customer"),[u,h]=(0,r.useState)(60*t),[j,b]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e;return j&&u>0&&(e=setInterval(()=>{h(e=>e-1)},1e3)),()=>clearInterval(e)},[j,u]);let y=()=>{c.trim()},f=n.filter(e=>"customer"===e.type),N=n.filter(e=>"employee"===e.type);return(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-10 h-10 bg-orange-100 rounded-lg",children:(0,a.jsx)(m.Z,{className:"h-6 w-6 text-orange-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Headlines"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Customer & employee updates and news"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[j&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"font-mono text-sm ".concat(u<=60?"text-red-600":"text-gray-600"),children:"".concat(Math.floor(u/60),":").concat((u%60).toString().padStart(2,"0"))})]}),j?(0,a.jsxs)("button",{onClick:s,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center space-x-2",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Complete"})]}):(0,a.jsxs)("button",{onClick:()=>{b(!0)},className:"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 flex items-center space-x-2",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Start Headlines"})]})]})]}),j?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Share a headline:"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("button",{onClick:()=>x("customer"),className:"px-3 py-1 rounded-full text-xs transition-colors ".concat("customer"===o?"bg-blue-100 text-blue-700 border border-blue-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[(0,a.jsx)(R.Z,{className:"h-3 w-3 inline mr-1"}),"Customer"]}),(0,a.jsxs)("button",{onClick:()=>x("employee"),className:"px-3 py-1 rounded-full text-xs transition-colors ".concat("employee"===o?"bg-green-100 text-green-700 border border-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[(0,a.jsx)(T,{className:"h-3 w-3 inline mr-1"}),"Employee"]})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value),onKeyPress:e=>"Enter"===e.key&&y(),placeholder:"Share ".concat(o," news or updates..."),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),(0,a.jsx)("button",{onClick:y,disabled:!c.trim(),className:"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,a.jsx)(R.Z,{className:"h-5 w-5 text-blue-600"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Customer Headlines"}),(0,a.jsx)("span",{className:"bg-blue-100 text-blue-700 px-2 py-1 rounded-full text-xs",children:f.length})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[f.map(e=>(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(R.Z,{className:"h-4 w-4 text-blue-600"})})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-blue-900",children:e.user_name}),(0,a.jsx)("span",{className:"text-xs text-blue-600",children:new Date(e.timestamp).toLocaleTimeString()})]}),(0,a.jsx)("p",{className:"text-sm text-blue-800 mt-1",children:e.content})]})]})},e.id)),0===f.length&&(0,a.jsxs)("div",{className:"text-center py-6 text-gray-500",children:[(0,a.jsx)(R.Z,{className:"mx-auto h-6 w-6 mb-2"}),(0,a.jsx)("p",{className:"text-sm",children:"No customer headlines yet"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,a.jsx)(T,{className:"h-5 w-5 text-green-600"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Employee Headlines"}),(0,a.jsx)("span",{className:"bg-green-100 text-green-700 px-2 py-1 rounded-full text-xs",children:N.length})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[N.map(e=>(0,a.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(T,{className:"h-4 w-4 text-green-600"})})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-green-900",children:e.user_name}),(0,a.jsx)("span",{className:"text-xs text-green-600",children:new Date(e.timestamp).toLocaleTimeString()})]}),(0,a.jsx)("p",{className:"text-sm text-green-800 mt-1",children:e.content})]})]})},e.id)),0===N.length&&(0,a.jsxs)("div",{className:"text-center py-6 text-gray-500",children:[(0,a.jsx)(T,{className:"mx-auto h-6 w-6 mb-2"}),(0,a.jsx)("p",{className:"text-sm",children:"No employee headlines yet"})]})]})]})]}),l&&l.length>0&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Team Participation"}),(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:l.map(e=>{let s=n.some(s=>s.user_id===e.user_id);return(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-2 rounded ".concat(s?"bg-green-100 text-green-700":"bg-white text-gray-600"),children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(s?"bg-green-500":"bg-gray-300")}),(0,a.jsx)("span",{className:"text-xs font-medium truncate",children:e.user.full_name})]},e.id)})})]}),(0,a.jsxs)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-orange-900 mb-2",children:"Examples of Good Headlines:"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-orange-800",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"font-medium mb-1",children:"Customer:"}),(0,a.jsxs)("ul",{className:"space-y-1",children:[(0,a.jsx)("li",{children:'• "ABC Corp renewed for 3 more years"'}),(0,a.jsx)("li",{children:'• "Customer complaint about delivery times"'}),(0,a.jsx)("li",{children:'• "New referral from satisfied client"'})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"font-medium mb-1",children:"Employee:"}),(0,a.jsxs)("ul",{className:"space-y-1",children:[(0,a.jsx)("li",{children:'• "Sarah completed her certification"'}),(0,a.jsx)("li",{children:'• "Marketing team launched new campaign"'}),(0,a.jsx)("li",{children:'• "IT resolved server issues"'})]})]})]})]})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(m.Z,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Ready to share Headlines?"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:["Take ",t," minutes to share important customer feedback, employee updates, wins, challenges, and any news that affects the team."]}),(0,a.jsxs)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 max-w-md mx-auto",children:[(0,a.jsx)("h4",{className:"font-medium text-orange-900 mb-2",children:"Headlines Guidelines:"}),(0,a.jsxs)("ul",{className:"text-sm text-orange-800 space-y-1 text-left",children:[(0,a.jsx)("li",{children:"• Share customer feedback and wins"}),(0,a.jsx)("li",{children:"• Report employee updates and changes"}),(0,a.jsx)("li",{children:"• Mention competitive intelligence"}),(0,a.jsx)("li",{children:"• Keep each headline brief"}),(0,a.jsx)("li",{children:"• Focus on what impacts the team"})]})]})]})]})}var E=t(254);function L(e){let{teamId:s,onComplete:t,duration:l}=e,[n,c]=(0,r.useState)([]),[d,o]=(0,r.useState)(!0),[x,m]=(0,r.useState)(60*l),[h,j]=(0,r.useState)(!1);(0,r.useEffect)(()=>{b()},[s]),(0,r.useEffect)(()=>{let e;return h&&x>0&&(e=setInterval(()=>{m(e=>e-1)},1e3)),()=>clearInterval(e)},[h,x]);let b=async()=>{try{o(!0);let e=new Date;e.setDate(e.getDate()-7);let{data:t,error:a}=await i.OQ.from("todos").select("\n          *,\n          assignee:users!assigned_to(full_name, email, avatar_url),\n          creator:users!created_by(full_name, email, avatar_url)\n        ").eq("team_id",s).gte("created_at",e.toISOString()).order("created_at",{ascending:!1});if(a)throw a;c(t||[])}catch(e){}finally{o(!1)}},y=async(e,s)=>{try{let t={status:s,updated_at:new Date().toISOString()};"completed"===s?t.completed_at=new Date().toISOString():t.completed_at=null;let{error:a}=await i.OQ.from("todos").update(t).eq("id",e);if(a)throw a;c(a=>a.map(a=>a.id===e?{...a,status:s,completed_at:t.completed_at}:a))}catch(e){}},f=e=>{switch(e){case"completed":return"text-green-600 bg-green-100 border-green-200";case"in_progress":return"text-blue-600 bg-blue-100 border-blue-200";case"dropped":default:return"text-gray-600 bg-gray-100 border-gray-200";case"pending":return"text-yellow-600 bg-yellow-100 border-yellow-200"}},N=e=>{switch(e){case"completed":return(0,a.jsx)(g.Z,{className:"h-4 w-4"});case"in_progress":return(0,a.jsx)(p.Z,{className:"h-4 w-4"});case"dropped":default:return(0,a.jsx)(E.Z,{className:"h-4 w-4"});case"pending":return(0,a.jsx)(D.Z,{className:"h-4 w-4"})}},v=e=>new Date(e)<new Date;return d?(0,a.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)("div",{className:"w-8 h-8 border-4 border-eos-200 border-t-eos-600 rounded-full animate-spin"})})}):(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-10 h-10 bg-indigo-100 rounded-lg",children:(0,a.jsx)(u.Z,{className:"h-6 w-6 text-indigo-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"To-Do Review"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Review and update previous week's assignments"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[h&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"font-mono text-sm ".concat(x<=60?"text-red-600":"text-gray-600"),children:"".concat(Math.floor(x/60),":").concat((x%60).toString().padStart(2,"0"))})]}),h?(0,a.jsxs)("button",{onClick:t,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center space-x-2",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Complete"})]}):(0,a.jsxs)("button",{onClick:()=>{j(!0)},className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 flex items-center space-x-2",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Start Review"})]})]})]}),h?(0,a.jsx)("div",{className:"space-y-4",children:0===n.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(u.Z,{className:"mx-auto h-8 w-8 mb-2"}),(0,a.jsx)("p",{children:"No to-dos found from the last week."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"grid grid-cols-4 gap-4 mb-6",children:["completed","in_progress","pending","dropped"].map(e=>{let s=n.filter(s=>s.status===e).length;return(0,a.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-sm font-medium border ".concat(f(e)),children:[N(e),(0,a.jsx)("span",{className:"ml-1",children:s})]}),(0,a.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:{completed:"Completed",in_progress:"In Progress",pending:"Pending",dropped:"Dropped"}[e]})]},e)})}),(0,a.jsx)("div",{className:"space-y-6",children:Array.from(new Set(n.map(e=>e.assigned_to))).map(e=>{let s=n.filter(s=>s.assigned_to===e),t={full_name:e};return(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:(null==t?void 0:t.full_name)||"Unknown Assignee"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,a.jsxs)("span",{children:[s.length," total"]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:[s.filter(e=>"completed"===e.status).length," completed"]})]})]}),(0,a.jsx)("div",{className:"space-y-3",children:s.map(e=>(0,a.jsx)("div",{className:"p-3 bg-white rounded-lg border transition-colors ".concat("completed"===e.status?"border-green-200":v(e.due_date)&&["pending","in_progress","dropped"].includes(e.status)?"border-red-200 bg-red-50":"border-gray-200"),children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,a.jsx)("h4",{className:"font-medium ".concat("completed"===e.status?"line-through text-gray-500":"text-gray-900"),children:e.title}),v(e.due_date)&&"completed"!==e.status&&(0,a.jsx)("span",{className:"bg-red-100 text-red-700 px-2 py-1 rounded-full text-xs",children:"Overdue"})]}),e.description&&(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:["Due: ",new Date(e.due_date).toLocaleDateString()]}),(0,a.jsxs)("span",{children:["Priority: ",e.priority]}),(0,a.jsxs)("span",{children:["Created: ",new Date(e.created_at).toLocaleDateString()]})]})]}),(0,a.jsx)("div",{className:"ml-4 flex space-x-1",children:["pending","in_progress","completed","dropped"].map(s=>(0,a.jsx)("button",{onClick:()=>y(e.id,s),className:"px-2 py-1 rounded text-xs font-medium transition-colors border ".concat(e.status===s?f(s):"bg-white text-gray-600 border-gray-300 hover:bg-gray-50"),title:s.charAt(0).toUpperCase()+s.slice(1).replace("_"," "),children:N(s)},s))})]})},e.id))})]},e)})}),(0,a.jsxs)("div",{className:"mt-6 p-4 bg-indigo-50 border border-indigo-200 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium text-indigo-900 mb-2",children:"During To-Do Review:"}),(0,a.jsxs)("ul",{className:"text-sm text-indigo-800 space-y-1",children:[(0,a.jsx)("li",{children:"• Each person reports on their assigned to-dos"}),(0,a.jsx)("li",{children:"• Mark completed items as done"}),(0,a.jsx)("li",{children:"• Update status on in-progress items"}),(0,a.jsx)("li",{children:"• Address overdue assignments"}),(0,a.jsx)("li",{children:"• Add systemic issues to the Issues List"}),(0,a.jsx)("li",{children:"• Don't create new to-dos here - that happens after IDS"})]})]})]})}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(u.Z,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Ready to review To-Dos?"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:["Take ",l," minutes to review last week's to-dos. Update status, mark items complete, and identify any issues that need to be addressed."]}),(0,a.jsxs)("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4 max-w-md mx-auto",children:[(0,a.jsx)("h4",{className:"font-medium text-indigo-900 mb-2",children:"Review Guidelines:"}),(0,a.jsxs)("ul",{className:"text-sm text-indigo-800 space-y-1 text-left",children:[(0,a.jsx)("li",{children:"• Go through each person's to-dos"}),(0,a.jsx)("li",{children:"• Mark completed items as done"}),(0,a.jsx)("li",{children:"• Update status on in-progress items"}),(0,a.jsx)("li",{children:"• Address overdue assignments"}),(0,a.jsx)("li",{children:"• Add obstacles to Issues List"})]})]})]})]})}var q=t(6038),P=t(962),Q=t(4032);function U(e){var s;let{teamId:t,meetingId:l,onComplete:c,duration:d}=e,o=[],{user:x}=(0,n.aC)(),[m,u]=(0,r.useState)([]),[j,b]=(0,r.useState)(null),[y,N]=(0,r.useState)([]),[v,w]=(0,r.useState)(!0),[k,_]=(0,r.useState)(60*d),[S,Z]=(0,r.useState)(!1),[C,D]=(0,r.useState)(""),[I,M]=(0,r.useState)(""),[O,R]=(0,r.useState)({title:"",assigned_to:"",due_date:"",priority:"medium"});(0,r.useEffect)(()=>{T()},[t]),(0,r.useEffect)(()=>{let e;return S&&k>0&&(e=setInterval(()=>{_(e=>e-1)},1e3)),()=>clearInterval(e)},[S,k]);let T=async()=>{try{w(!0);let{data:e,error:s}=await i.OQ.from("issues").select("\n          *,\n          owner:users!owner_id(full_name, email, avatar_url),\n          creator:users!created_by(full_name, email, avatar_url)\n        ").eq("team_id",t).eq("status","identified").order("priority",{ascending:!1}).order("created_at",{ascending:!0});if(s)throw s;u(e||[])}catch(e){}finally{w(!1)}},A=()=>{j&&("identify"===j.step?b(e=>e?{...e,step:"discuss"}:null):"discuss"===j.step?b(e=>e?{...e,step:"solve"}:null):"solve"===j.step&&E())},E=async()=>{if(j)try{for(let e of(await i.OQ.from("issues").update({status:"solved",solution:j.solution,solved_at:new Date().toISOString(),meeting_id:l}).eq("id",j.issue.id),j.todos))e.title&&e.assigned_to&&e.due_date&&await i.OQ.from("todos").insert([{...e,team_id:t,created_by:(null==x?void 0:x.id)||"anonymous",status:"pending",meeting_id:l}]);N(e=>[...e,j]);let e=m.filter(e=>e.id!==j.issue.id&&!y.some(s=>s.issue.id===e.id));e.length>0?b({issue:e[0],step:"identify",discussion:[],todos:[]}):b(null),M(""),D(""),R({title:"",assigned_to:"",due_date:"",priority:"medium"})}catch(e){}},L=()=>{C.trim()&&j&&(b(e=>e?{...e,discussion:[...e.discussion,C.trim()]}:null),D(""))};return v?(0,a.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)("div",{className:"w-8 h-8 border-4 border-eos-200 border-t-eos-600 rounded-full animate-spin"})})}):(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-10 h-10 bg-red-100 rounded-lg",children:(0,a.jsx)(h.Z,{className:"h-6 w-6 text-red-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"IDS (Issues)"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Identify, Discuss, Solve team issues"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[S&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"font-mono text-sm ".concat(k<=300?"text-red-600":"text-gray-600"),children:"".concat(Math.floor(k/60),":").concat((k%60).toString().padStart(2,"0"))})]}),S?(0,a.jsxs)("button",{onClick:c,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center space-x-2",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Complete"})]}):(0,a.jsxs)("button",{onClick:()=>{Z(!0),m.length>0&&b({issue:m[0],step:"identify",discussion:[],todos:[]})},disabled:0===m.length,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Start IDS"})]})]})]}),S?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"IDS Progress"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[y.length," solved, ",m.length-y.length," remaining"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-red-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(m.length>0?y.length/m.length*100:0,"%")}})})]}),j?(0,a.jsxs)("div",{className:"border border-red-200 rounded-lg p-6 bg-red-50",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-red-900",children:j.issue.title}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:["identify","discuss","solve"].map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-1 px-3 py-1 rounded-full text-xs font-medium ".concat(j.step===e?"bg-red-600 text-white":s<["identify","discuss","solve"].indexOf(j.step)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"),children:["identify"===e&&(0,a.jsx)(q.Z,{className:"h-3 w-3"}),"discuss"===e&&(0,a.jsx)(P.Z,{className:"h-3 w-3"}),"solve"===e&&(0,a.jsx)(f.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:e.charAt(0).toUpperCase()+e.slice(1)})]},e))})]}),(0,a.jsxs)("div",{className:"mb-6 p-4 bg-white rounded-lg border border-red-200",children:[(0,a.jsx)("p",{className:"text-gray-700 mb-2",children:j.issue.description}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,a.jsxs)("span",{children:["Type: ",j.issue.type]}),(0,a.jsxs)("span",{children:["Priority: ",j.issue.priority]}),(0,a.jsxs)("span",{children:["Owner: ",(null===(s=j.issue.owner)||void 0===s?void 0:s.full_name)||"Unassigned"]})]})]}),"identify"===j.step&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"Identify Phase"}),(0,a.jsx)("p",{className:"text-sm text-blue-800",children:"Make sure everyone understands the issue clearly. Is this the real issue or just a symptom? Get to the root cause."})]}),(0,a.jsx)("button",{onClick:A,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Move to Discuss"})]}),"discuss"===j.step&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-yellow-900 mb-2",children:"Discuss Phase"}),(0,a.jsx)("p",{className:"text-sm text-yellow-800",children:"Openly discuss the issue. Share ideas, perspectives, and potential solutions. Keep discussion focused and productive."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Discussion Notes"}),(0,a.jsxs)("div",{className:"flex space-x-2 mb-3",children:[(0,a.jsx)("input",{type:"text",value:C,onChange:e=>D(e.target.value),onKeyPress:e=>"Enter"===e.key&&L(),placeholder:"Add discussion point...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent"}),(0,a.jsx)("button",{onClick:L,disabled:!C.trim(),className:"bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 disabled:opacity-50",children:"Add"})]}),j.discussion.length>0&&(0,a.jsx)("div",{className:"space-y-2",children:j.discussion.map((e,s)=>(0,a.jsx)("div",{className:"bg-white p-3 rounded border border-gray-200",children:(0,a.jsx)("p",{className:"text-sm text-gray-700",children:e})},s))})]}),(0,a.jsx)("button",{onClick:A,className:"bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700",children:"Move to Solve"})]}),"solve"===j.step&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-green-900 mb-2",children:"Solve Phase"}),(0,a.jsx)("p",{className:"text-sm text-green-800",children:"Determine the solution and create specific action items. Assign owners and due dates for each to-do."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Solution"}),(0,a.jsx)("div",{className:"flex space-x-2 mb-3",children:(0,a.jsx)("input",{type:"text",value:I,onChange:e=>M(e.target.value),onBlur:()=>{I.trim()&&j&&b(e=>e?{...e,solution:I.trim()}:null)},placeholder:"Describe the solution...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})}),j.solution&&(0,a.jsx)("div",{className:"bg-white p-3 rounded border border-gray-200",children:(0,a.jsx)("p",{className:"text-sm text-gray-700",children:j.solution})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Action Items (To-Dos)"}),(0,a.jsxs)("div",{className:"bg-white border border-gray-300 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-3",children:[(0,a.jsx)("input",{type:"text",value:O.title,onChange:e=>R(s=>({...s,title:e.target.value})),placeholder:"To-do title...",className:"px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-green-500 focus:border-transparent"}),(0,a.jsxs)("select",{value:O.assigned_to,onChange:e=>R(s=>({...s,assigned_to:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"",children:"Assign to..."}),null==o?void 0:o.map(e=>(0,a.jsx)("option",{value:e.user_id,children:e.user.full_name},e.user_id))]}),(0,a.jsx)("input",{type:"date",value:O.due_date,onChange:e=>R(s=>({...s,due_date:e.target.value})),min:new Date().toISOString().split("T")[0],className:"px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-green-500 focus:border-transparent"}),(0,a.jsxs)("button",{onClick:()=>{O.title&&O.assigned_to&&O.due_date&&j&&(b(e=>e?{...e,todos:[...e.todos,O]}:null),R({title:"",assigned_to:"",due_date:"",priority:"medium"}))},disabled:!O.title||!O.assigned_to||!O.due_date,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 disabled:opacity-50 flex items-center space-x-1",children:[(0,a.jsx)(Q.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Add"})]})]}),j.todos.length>0&&(0,a.jsx)("div",{className:"space-y-2",children:j.todos.map((e,s)=>{var t;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[(0,a.jsx)("span",{className:"text-sm",children:e.title}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-600",children:[(0,a.jsx)("span",{children:null==o?void 0:null===(t=o.find(s=>s.user_id===e.assigned_to))||void 0===t?void 0:t.user.full_name}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{children:new Date(e.due_date).toLocaleDateString()})]})]},s)})})]})]}),(0,a.jsx)("button",{onClick:A,disabled:!j.solution,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:opacity-50",children:"Mark as Solved"})]})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(g.Z,{className:"mx-auto h-12 w-12 text-green-600 mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"All Issues Solved!"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Great work! Your team has worked through all identified issues."})]}),y.length>0&&(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,a.jsxs)("h4",{className:"font-medium text-green-900 mb-3",children:["Solved Issues (",y.length,")"]}),(0,a.jsx)("div",{className:"space-y-2",children:y.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-white rounded",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:e.issue.title}),(0,a.jsxs)("span",{className:"text-xs text-green-600",children:[e.todos.length," to-dos created"]})]},e.issue.id))})]})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(h.Z,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Ready for IDS?"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:["Take up to ",d," minutes to work through issues using the IDS methodology: Identify, Discuss, and Solve each issue systematically."]}),0===m.length?(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 max-w-md mx-auto",children:[(0,a.jsx)("h4",{className:"font-medium text-green-900 mb-2",children:"No Issues to Discuss!"}),(0,a.jsx)("p",{className:"text-sm text-green-800",children:"Great job! Your team has no open issues to work through."})]}):(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 max-w-md mx-auto",children:[(0,a.jsxs)("h4",{className:"font-medium text-red-900 mb-2",children:[m.length," Issue",m.length>1?"s":""," to Work Through:"]}),(0,a.jsxs)("ul",{className:"text-sm text-red-800 space-y-1 text-left",children:[m.slice(0,3).map(e=>(0,a.jsxs)("li",{children:["• ",e.title]},e.id)),m.length>3&&(0,a.jsxs)("li",{children:["• And ",m.length-3," more..."]})]})]})]})]})}let H=(0,k.Z)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);function F(e){let{meetingId:s,onComplete:t,duration:l}=e,[n,i]=(0,r.useState)([]),[c,o]=(0,r.useState)(""),[x,h]=(0,r.useState)("recap"),[j,b]=(0,r.useState)(60*l),[y,f]=(0,r.useState)(!1),[N,v]=(0,r.useState)(0);(0,r.useEffect)(()=>{let e;return y&&j>0&&(e=setInterval(()=>{b(e=>e-1)},1e3)),()=>clearInterval(e)},[y,j]);let w=()=>{c.trim()},k=n.filter(e=>"recap"===e.type),_=n.filter(e=>"action"===e.type),S=n.filter(e=>"feedback"===e.type);return(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-10 h-10 bg-gray-100 rounded-lg",children:(0,a.jsx)(g.Z,{className:"h-6 w-6 text-gray-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Conclude"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Wrap up the meeting and plan next steps"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[y&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"font-mono text-sm ".concat(j<=60?"text-red-600":"text-gray-600"),children:"".concat(Math.floor(j/60),":").concat((j%60).toString().padStart(2,"0"))})]}),y?(0,a.jsxs)("button",{onClick:t,className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 flex items-center space-x-2 text-lg font-medium",children:[(0,a.jsx)(g.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"End Meeting"})]}):(0,a.jsxs)("button",{onClick:()=>{f(!0)},className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 flex items-center space-x-2",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Start Conclude"})]})]})]}),y?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-yellow-900 mb-3",children:"Rate This Meeting"}),(0,a.jsx)("p",{className:"text-sm text-yellow-800 mb-4",children:"How effective was this Level 10 meeting? (1 = Poor, 10 = Excellent)"}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:[1,2,3,4,5,6,7,8,9,10].map(e=>(0,a.jsx)("button",{onClick:()=>v(e),className:"w-8 h-8 rounded-full border-2 transition-colors ".concat(e<=N?"bg-yellow-500 border-yellow-500 text-white":"bg-white border-gray-300 text-gray-600 hover:border-yellow-300"),children:e},e))}),N>0&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)(H,{className:"inline h-4 w-4 text-yellow-500 mr-1"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-yellow-900",children:[N,"/10 - ",N>=9?"Excellent!":N>=7?"Good meeting":N>=5?"Room for improvement":"Needs significant improvement"]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Add conclusion item:"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("button",{onClick:()=>h("recap"),className:"px-3 py-1 rounded-full text-xs transition-colors ".concat("recap"===x?"bg-blue-100 text-blue-700 border border-blue-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[(0,a.jsx)(d.Z,{className:"h-3 w-3 inline mr-1"}),"Recap"]}),(0,a.jsxs)("button",{onClick:()=>h("action"),className:"px-3 py-1 rounded-full text-xs transition-colors ".concat("action"===x?"bg-green-100 text-green-700 border border-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[(0,a.jsx)(u.Z,{className:"h-3 w-3 inline mr-1"}),"Action"]}),(0,a.jsxs)("button",{onClick:()=>h("feedback"),className:"px-3 py-1 rounded-full text-xs transition-colors ".concat("feedback"===x?"bg-purple-100 text-purple-700 border border-purple-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[(0,a.jsx)(m.Z,{className:"h-3 w-3 inline mr-1"}),"Feedback"]})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("input",{type:"text",value:c,onChange:e=>o(e.target.value),onKeyPress:e=>"Enter"===e.key&&w(),placeholder:"Add ".concat(x," item..."),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-transparent"}),(0,a.jsx)("button",{onClick:w,disabled:!c.trim(),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,a.jsx)(d.Z,{className:"h-5 w-5 text-blue-600"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Key Decisions"}),(0,a.jsx)("span",{className:"bg-blue-100 text-blue-700 px-2 py-1 rounded-full text-xs",children:k.length})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[k.map(e=>(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(d.Z,{className:"h-3 w-3 text-blue-600"})})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm text-blue-800",children:e.content}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,a.jsx)("span",{className:"text-xs text-blue-600",children:e.user_name}),(0,a.jsx)("span",{className:"text-xs text-blue-600",children:new Date(e.timestamp).toLocaleTimeString()})]})]})]})},e.id)),0===k.length&&(0,a.jsxs)("div",{className:"text-center py-6 text-gray-500",children:[(0,a.jsx)(d.Z,{className:"mx-auto h-6 w-6 mb-2"}),(0,a.jsx)("p",{className:"text-sm",children:"No key decisions recorded"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,a.jsx)(u.Z,{className:"h-5 w-5 text-green-600"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Action Items"}),(0,a.jsx)("span",{className:"bg-green-100 text-green-700 px-2 py-1 rounded-full text-xs",children:_.length})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[_.map(e=>(0,a.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(u.Z,{className:"h-3 w-3 text-green-600"})})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm text-green-800",children:e.content}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,a.jsx)("span",{className:"text-xs text-green-600",children:e.user_name}),(0,a.jsx)("span",{className:"text-xs text-green-600",children:new Date(e.timestamp).toLocaleTimeString()})]})]})]})},e.id)),0===_.length&&(0,a.jsxs)("div",{className:"text-center py-6 text-gray-500",children:[(0,a.jsx)(u.Z,{className:"mx-auto h-6 w-6 mb-2"}),(0,a.jsx)("p",{className:"text-sm",children:"No action items confirmed"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,a.jsx)(m.Z,{className:"h-5 w-5 text-purple-600"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Feedback"}),(0,a.jsx)("span",{className:"bg-purple-100 text-purple-700 px-2 py-1 rounded-full text-xs",children:S.length})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[S.map(e=>(0,a.jsx)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-3",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(m.Z,{className:"h-3 w-3 text-purple-600"})})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm text-purple-800",children:e.content}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,a.jsx)("span",{className:"text-xs text-purple-600",children:e.user_name}),(0,a.jsx)("span",{className:"text-xs text-purple-600",children:new Date(e.timestamp).toLocaleTimeString()})]})]})]})},e.id)),0===S.length&&(0,a.jsxs)("div",{className:"text-center py-6 text-gray-500",children:[(0,a.jsx)(m.Z,{className:"mx-auto h-6 w-6 mb-2"}),(0,a.jsx)("p",{className:"text-sm",children:"No feedback shared"})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Meeting Summary"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[(0,a.jsxs)("div",{className:"bg-white p-3 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:k.length}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Key Decisions"})]}),(0,a.jsxs)("div",{className:"bg-white p-3 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:_.length}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Action Items"})]}),(0,a.jsxs)("div",{className:"bg-white p-3 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:S.length}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Feedback Items"})]}),(0,a.jsxs)("div",{className:"bg-white p-3 rounded-lg",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-yellow-600",children:[N,"/10"]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Meeting Rating"})]})]})]}),(0,a.jsxs)("div",{className:"bg-eos-50 border border-eos-200 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-eos-900 mb-2",children:"Before you go:"}),(0,a.jsxs)("ul",{className:"text-sm text-eos-800 space-y-1",children:[(0,a.jsx)("li",{children:"• Confirm next week's meeting time"}),(0,a.jsx)("li",{children:"• Review all action items with owners"}),(0,a.jsx)("li",{children:"• Send meeting summary to the team"}),(0,a.jsx)("li",{children:"• Schedule any follow-up meetings needed"})]})]})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(g.Z,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Ready to conclude the meeting?"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:["Take ",l," minutes to recap key decisions, confirm action items, and rate the meeting effectiveness."]}),(0,a.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 max-w-md mx-auto",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Conclude Checklist:"}),(0,a.jsxs)("ul",{className:"text-sm text-gray-700 space-y-1 text-left",children:[(0,a.jsx)("li",{children:"• Recap key decisions made"}),(0,a.jsx)("li",{children:"• Confirm all action items"}),(0,a.jsx)("li",{children:"• Review next week's focus"}),(0,a.jsx)("li",{children:"• Rate meeting effectiveness (1-10)"}),(0,a.jsx)("li",{children:"• Schedule next meeting"})]})]})]})]})}let G={segue:{duration:5,completed:!1},scorecard:{duration:5,completed:!1},rock_review:{duration:5,completed:!1},customer_employee_headlines:{duration:5,completed:!1},todo_review:{duration:5,completed:!1},ids:{duration:60,completed:!1},conclude:{duration:5,completed:!1}};function z(){let e=(0,l.useRouter)(),{user:s,activeTeam:t,userRole:b}=(0,n.aC)(),f=null==t?void 0:t.id,[N,v]=(0,r.useState)(null),[k,_]=(0,r.useState)([]),[S,C]=(0,r.useState)("segue"),[D,I]=(0,r.useState)(0),[R,T]=(0,r.useState)(!1),[E,q]=(0,r.useState)(!0);(0,r.useRef)(null),(0,r.useEffect)(()=>{f&&(async()=>{try{let e=new Date().toISOString().split("T")[0],{data:s,error:t}=await i.OQ.from("l10_meetings").select("*").eq("team_id",f).eq("scheduled_date",e).in("status",["scheduled","in_progress"]).order("created_at",{ascending:!1}).limit(1);if(t)throw t;if(s&&s.length>0&&(v(s[0]),"in_progress"===s[0].status)){let e=s[0].agenda,t=Object.keys(e).find(s=>!e[s].completed)||"conclude";C(t)}}catch(e){}finally{q(!1)}})()},[f]),(0,r.useEffect)(()=>{if(!(null==N?void 0:N.id))return;let e=i.OQ.channel("meeting:".concat(N.id)).on("postgres_changes",{event:"*",schema:"public",table:"meeting_participants",filter:"meeting_id=eq.".concat(N.id)},()=>{P()}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"l10_meetings",filter:"id=eq.".concat(N.id)},e=>{v(e.new)}).subscribe();return P(),()=>{i.OQ.removeChannel(e)}},[null==N?void 0:N.id]),(0,r.useEffect)(()=>{(null==N?void 0:N.agenda)&&I(Object.values(N.agenda).reduce((e,s)=>e+s.duration,0))},[null==N?void 0:N.agenda]);let P=async()=>{if(null==N?void 0:N.id)try{let{data:e,error:s}=await i.OQ.from("meeting_participants").select("\n          *,\n          user:users(id, full_name, email, avatar_url)\n        ").eq("meeting_id",N.id).is("left_at",null);if(s)throw s;_(e||[])}catch(e){}},Q=async()=>{if(f&&s){T(!0);try{let e=new Date,a={team_id:f,title:"".concat(null==t?void 0:t.name," L10 Meeting - ").concat(e.toLocaleDateString()),scheduled_date:e.toISOString().split("T")[0],start_time:e.toISOString(),status:"in_progress",facilitator_id:s.id,agenda:G},{data:r,error:l}=await i.OQ.from("l10_meetings").insert([a]).select().single();if(l)throw l;await i.OQ.from("meeting_participants").insert([{meeting_id:r.id,user_id:s.id,status:"online"}]),v(r),C("segue")}catch(e){}finally{T(!1)}}},H=async()=>{if((null==N?void 0:N.id)&&s)try{let{data:e}=await i.OQ.from("meeting_participants").select("id").eq("meeting_id",N.id).eq("user_id",s.id).is("left_at",null).single();e||await i.OQ.from("meeting_participants").insert([{meeting_id:N.id,user_id:s.id,status:"online"}])}catch(e){}},z=async e=>{if(null==N?void 0:N.id)try{let s={...N.agenda,...e},{error:t}=await i.OQ.from("l10_meetings").update({agenda:s,updated_at:new Date().toISOString()}).eq("id",N.id);if(t)throw t}catch(e){}},K=async e=>{if(!N)return;let s={[e]:{...N.agenda[e],completed:!0}};await z(s);let t=Object.keys(N.agenda),a=t.indexOf(e),r=t[a+1];r?C(r):await B()},B=async()=>{if(null==N?void 0:N.id)try{await i.OQ.from("l10_meetings").update({status:"completed",end_time:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",N.id),await i.OQ.from("meeting_participants").update({left_at:new Date().toISOString()}).eq("meeting_id",N.id).is("left_at",null),e.push("/")}catch(e){}};return((0,r.useEffect)(()=>{N&&s&&!k.find(e=>e.user_id===s.id)&&H()},[N,s,k]),f)?E?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-8 h-8 border-4 border-eos-200 border-t-eos-600 rounded-full animate-spin"})}):N?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between py-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"LIVE"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:N.title}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[new Date(N.start_time).toLocaleTimeString()," • ",D," minutes total"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(y,{participants:k}),(0,a.jsx)(j,{startTime:N.start_time})]})]})})}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-3",children:["segue"===S&&(0,a.jsx)(Z,{onComplete:()=>K("segue"),duration:N.agenda.segue.duration}),"scorecard"===S&&(0,a.jsx)(M,{teamId:f,onComplete:()=>K("scorecard"),duration:N.agenda.scorecard.duration}),"rock_review"===S&&(0,a.jsx)(O,{teamId:f,onComplete:()=>K("rock_review"),duration:N.agenda.rock_review.duration}),"customer_employee_headlines"===S&&(0,a.jsx)(A,{onComplete:()=>K("customer_employee_headlines"),duration:N.agenda.customer_employee_headlines.duration}),"todo_review"===S&&(0,a.jsx)(L,{teamId:f,onComplete:()=>K("todo_review"),duration:N.agenda.todo_review.duration}),"ids"===S&&(0,a.jsx)(U,{teamId:f,meetingId:N.id,onComplete:()=>K("ids"),duration:N.agenda.ids.duration}),"conclude"===S&&(0,a.jsx)(F,{meetingId:N.id,onComplete:B,duration:N.agenda.conclude.duration})]}),(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsx)(w,{agenda:N.agenda,currentSegment:S,onSegmentClick:C})})]})})]}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,a.jsxs)("div",{className:"text-center mb-12",children:[(0,a.jsx)(c.Z,{className:"mx-auto h-16 w-16 text-eos-600 mb-4"}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Level 10 Meeting"}),(0,a.jsx)("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Start your weekly Level 10 meeting with your team. Follow the structured EOS agenda to maximize productivity and ensure every meeting is effective."})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Meeting Agenda (90 minutes)"}),(0,a.jsx)("div",{className:"space-y-4",children:Object.entries(G).map((e,s)=>{let[t,r]=e,l={segue:d.Z,scorecard:o.Z,rock_review:x.Z,customer_employee_headlines:m.Z,todo_review:u.Z,ids:h.Z,conclude:g.Z}[t];return(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-8 h-8 bg-eos-100 rounded-lg",children:(0,a.jsx)("span",{className:"text-sm font-medium text-eos-700",children:s+1})}),(0,a.jsx)(l,{className:"h-5 w-5 text-gray-600"}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:{segue:"Segue",scorecard:"Scorecard Review",rock_review:"Rock Review",customer_employee_headlines:"Customer & Employee Headlines",todo_review:"To-Do List Review",ids:"Issues (IDS)",conclude:"Conclude"}[t]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[r.duration," min"]})]})]},t)})})]}),(0,a.jsx)("div",{className:"text-center",children:"viewer"===b?(0,a.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:(0,a.jsx)("p",{className:"text-yellow-800",children:"You have viewer access. Only team leaders and members can start meetings."})}):(0,a.jsx)("button",{onClick:Q,disabled:R,className:"bg-eos-600 text-white px-8 py-4 rounded-lg hover:bg-eos-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-3 mx-auto text-lg font-medium",children:R?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("span",{children:"Starting Meeting..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Z,{className:"h-6 w-6"}),(0,a.jsx)("span",{children:"Start Level 10 Meeting"})]})})})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Please select a team"}),(0,a.jsx)("button",{onClick:()=>e.push("/"),className:"bg-eos-600 text-white px-6 py-3 rounded-lg hover:bg-eos-700",children:"Back to Dashboard"})]})})}},6393:function(e,s,t){e.exports=t(6856)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=9526)}),_N_E=e.O()}]);