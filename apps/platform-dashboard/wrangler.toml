name = "ganger-platform-dashboard"
main = "worker.js"
compatibility_date = "2024-06-12"
compatibility_flags = ["nodejs_compat"]

[build]
command = "npm run build && npm run build:worker"

[env.production]
name = "ganger-platform-dashboard-prod"
# Routes handled by staff-router.js at staff.gangerdermatology.com/dashboard

[env.staging]
name = "ganger-platform-dashboard-staging"

# R2 bucket for static assets
[[r2_buckets]]
binding = "ASSETS"
bucket_name = "ganger-platform-dashboard-assets"
preview_bucket_name = "ganger-platform-dashboard-assets-preview"

# Environment variables
[vars]
ENVIRONMENT = "production"
APP_NAME = "Platform Dashboard"

# Secrets (set via wrangler secret put)
# NEXT_PUBLIC_SUPABASE_URL
# NEXT_PUBLIC_SUPABASE_ANON_KEY