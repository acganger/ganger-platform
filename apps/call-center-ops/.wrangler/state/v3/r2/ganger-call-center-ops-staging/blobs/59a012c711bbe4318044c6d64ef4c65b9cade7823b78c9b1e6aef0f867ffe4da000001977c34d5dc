(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[114],{6190:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/supervisor",function(){return t(9056)}])},9056:function(e,a,t){"use strict";t.r(a);var s=t(1549),l=t(4194),i=t(7311),n=t(8848);let r=e=>new Date(e).toLocaleDateString();function c(e){let{journal:a,onSubmit:t,onCancel:i}=e,[r,c]=(0,l.useState)(""),[d,o]=(0,l.useState)(""),[m,u]=(0,l.useState)("");return(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t({review_score:parseInt(r),coaching_notes:d,improvement_areas:m.split(",").map(e=>e.trim()).filter(Boolean),reviewed_at:new Date().toISOString()})},className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-neutral-50 p-4 rounded-lg",children:[(0,s.jsx)("h4",{className:"font-medium text-neutral-900 mb-2",children:"Call Summary"}),(0,s.jsx)("p",{className:"text-sm text-neutral-700 mb-3",children:a.call_summary}),(0,s.jsx)("h4",{className:"font-medium text-neutral-900 mb-2",children:"Detailed Notes"}),(0,s.jsx)("p",{className:"text-sm text-neutral-700",children:a.detailed_notes})]}),(0,s.jsx)(n.Wi,{label:"Quality Score (1-100)",required:!0,children:(0,s.jsx)(n.II,{type:"number",min:"1",max:"100",value:r,onChange:e=>c(e.target.value),placeholder:"Enter score"})}),(0,s.jsx)(n.Wi,{label:"Coaching Notes",children:(0,s.jsx)("textarea",{className:"w-full min-h-[100px] p-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",value:d,onChange:e=>o(e.target.value),placeholder:"Enter coaching feedback and suggestions..."})}),(0,s.jsx)(n.Wi,{label:"Improvement Areas (comma-separated)",children:(0,s.jsx)(n.II,{value:m,onChange:e=>u(e.target.value),placeholder:"e.g. Active listening, Product knowledge, Call control"})}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,s.jsx)(n.zx,{variant:"outline",onClick:i,children:"Cancel"}),(0,s.jsx)(n.zx,{type:"submit",variant:"primary",children:"Submit Review"})]})]})}a.default=(0,i.FF)(function(){let{user:e}=(0,i.aC)(),[a,t]=(0,l.useState)({teamMetrics:{},activeAgents:[],pendingReviews:[],recentCalls:[],isLoading:!0}),[d,o]=(0,l.useState)(""),[m,u]=(0,l.useState)(!1),[x,h]=(0,l.useState)(null);(0,l.useEffect)(()=>{g();let e=setInterval(g,15e3);return()=>clearInterval(e)},[]);let g=async()=>{try{var e,a;let[s,l,i]=await Promise.all([fetch("/api/analytics/team-metrics?role=supervisor"),fetch("/api/call-journals/simple?status=submitted&limit=20"),fetch("/api/call-records/simple?limit=20")]),[n,r,c]=await Promise.all([s.json(),l.json(),i.json()]);t({teamMetrics:(null===(e=n.data)||void 0===e?void 0:e.team_summary)||{},activeAgents:(null===(a=n.data)||void 0===a?void 0:a.agent_status)||[],pendingReviews:r.data||[],recentCalls:c.data||[],isLoading:!1})}catch(e){t(e=>({...e,isLoading:!1}))}},v=e=>{h(e),u(!0)},j=async e=>{try{await fetch("/api/journals/".concat(null==x?void 0:x.id,"/review"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),u(!1),h(null),g()}catch(e){}};return a.isLoading?(0,s.jsx)(n.LN,{children:(0,s.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,s.jsx)(n.TK,{size:"lg"})})}):(0,s.jsxs)(n.LN,{children:[(0,s.jsx)(n.mr,{title:"Supervisor Dashboard",subtitle:"Team monitoring and quality assurance"}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 mb-6",children:[(0,s.jsx)(n.zx,{variant:"primary",onClick:()=>window.location.href="/performance/team",children:"\uD83D\uDCCA Team Reports"}),(0,s.jsx)(n.zx,{variant:"outline",onClick:()=>window.location.href="/management/goals",children:"\uD83C\uDFAF Manage Goals"})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,s.jsx)(n.Rm,{title:"Active Agents",value:a.activeAgents.filter(e=>"available"===e.status||"on_call"===e.status).length,icon:"users"}),(0,s.jsx)(n.Rm,{title:"Calls Today",value:a.teamMetrics.total_calls_today||0,trend:{value:5.2,direction:"up"},icon:"phone"}),(0,s.jsx)(n.Rm,{title:"Avg Quality Score",value:"".concat(a.teamMetrics.avg_quality_score||0,"%"),trend:{value:1.3,direction:"up"},icon:"star"}),(0,s.jsx)(n.Rm,{title:"Pending Reviews",value:a.pendingReviews.length,trend:{value:2,direction:"down"},icon:"clipboard"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)(n.Zb,{className:"p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-neutral-900 mb-4",children:"Team Performance Trends"}),(0,s.jsx)("div",{className:"h-64 flex items-center justify-center bg-gray-50 rounded",children:(0,s.jsx)("p",{className:"text-gray-500",children:"Team performance trends chart will be displayed here"})})]}),(0,s.jsxs)(n.Zb,{className:"p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-neutral-900 mb-4",children:"Call Queue Status"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-green-900",children:"Ann Arbor"}),(0,s.jsx)("div",{className:"text-sm text-green-700",children:"2 calls waiting"})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-lg font-bold text-green-900",children:"1:23"}),(0,s.jsx)("div",{className:"text-xs text-green-700",children:"avg wait"})]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-blue-900",children:"Wixom"}),(0,s.jsx)("div",{className:"text-sm text-blue-700",children:"5 calls waiting"})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-lg font-bold text-blue-900",children:"2:45"}),(0,s.jsx)("div",{className:"text-xs text-blue-700",children:"avg wait"})]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center p-3 bg-amber-50 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-amber-900",children:"Plymouth"}),(0,s.jsx)("div",{className:"text-sm text-amber-700",children:"8 calls waiting"})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-lg font-bold text-amber-900",children:"4:12"}),(0,s.jsx)("div",{className:"text-xs text-amber-700",children:"avg wait"})]})]})]})]})]}),(0,s.jsxs)(n.Zb,{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-neutral-900",children:"Agent Status"}),(0,s.jsx)("div",{className:"flex space-x-2",children:(0,s.jsx)(n.Ph,{value:d,onChange:e=>o(e.target.value),options:[{value:"",label:"All Agents"},...a.activeAgents.map(e=>({value:e.agent_email,label:e.agent_name}))],placeholder:"Filter by agent"})})]}),(0,s.jsx)(n.wQ,{data:a.activeAgents.filter(e=>!d||e.agent_email===d),columns:[{key:"agent_name",header:"Agent",sortable:!0},{key:"status",header:"Status",render:e=>(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs ".concat("available"===e.status?"bg-green-100 text-green-800":"on_call"===e.status?"bg-blue-100 text-blue-800":"break"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.status})},{key:"calls_today",header:"Calls Today",sortable:!0},{key:"avg_call_time",header:"Avg Call Time",render:e=>"".concat(Math.round((e.avg_call_time||0)/60),"m")},{key:"quality_score",header:"Quality Score",render:e=>"".concat(e.quality_score||0,"%")}]})]}),(0,s.jsxs)(n.Zb,{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-medium text-neutral-900",children:["Pending Journal Reviews (",a.pendingReviews.length,")"]}),(0,s.jsx)(n.zx,{variant:"outline",size:"sm",onClick:()=>window.location.href="/calls/quality",children:"Quality Dashboard"})]}),(0,s.jsx)(n.wQ,{data:a.pendingReviews,columns:[{key:"agent_name",header:"Agent",sortable:!0},{key:"call_summary",header:"Call Summary",render:e=>(0,s.jsx)("div",{className:"max-w-xs truncate",children:e.call_summary})},{key:"created_at",header:"Submitted",render:e=>r(e.created_at)},{key:"actions",header:"Actions",render:e=>(0,s.jsx)(n.zx,{size:"sm",variant:"outline",onClick:()=>v(e),children:"Review"})}]})]})]}),(0,s.jsx)(n.u_,{isOpen:m,onClose:()=>u(!1),title:"Review Call Journal",size:"lg",children:x&&(0,s.jsx)(c,{journal:x,onSubmit:j,onCancel:()=>u(!1)})})]})},{requiredRoles:["clinical_staff","manager","superadmin"]})}},function(e){e.O(0,[946,848,888,774,179],function(){return e(e.s=6190)}),_N_E=e.O()}]);