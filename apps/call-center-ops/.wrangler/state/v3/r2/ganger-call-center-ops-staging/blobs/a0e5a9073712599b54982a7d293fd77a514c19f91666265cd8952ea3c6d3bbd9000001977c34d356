(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[667],{2760:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/manager",function(){return a(9716)}])},9716:function(e,t,a){"use strict";a.r(t);var s=a(1549),i=a(4194),r=a(7311),n=a(8848);let l=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e);t.default=(0,r.FF)(function(){let{user:e}=(0,r.aC)(),[t,a]=(0,i.useState)({executiveMetrics:{},locationMetrics:[],campaignPerformance:[],isLoading:!0}),[c,d]=(0,i.useState)("all"),[o,m]=(0,i.useState)("7d");(0,i.useEffect)(()=>{u();let e=setInterval(u,3e5);return()=>clearInterval(e)},[c,o]);let u=async()=>{try{var e,t,s,i,r;let n=new URLSearchParams({location:c,period:o}),[l]=await Promise.all([fetch("/api/analytics/team-metrics?role=manager&include_analytics=true&".concat(n))]),[d]=await Promise.all([l.json()]);a({executiveMetrics:(null===(t=d.data)||void 0===t?void 0:null===(e=t.manager_analytics)||void 0===e?void 0:e.executive_summary)||{},locationMetrics:(null===(s=d.data)||void 0===s?void 0:s.location_breakdown)||[],campaignPerformance:(null===(r=d.data)||void 0===r?void 0:null===(i=r.manager_analytics)||void 0===i?void 0:i.campaign_performance)||[],isLoading:!1})}catch(e){a(e=>({...e,isLoading:!1}))}},x=async()=>{try{let e=await fetch("/api/reports/export",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"executive_summary",location:c,period:o})});if(e.ok){let t=await e.blob(),a=window.URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download="executive-report-".concat(new Date().toISOString().split("T")[0],".pdf"),document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(a),document.body.removeChild(s)}}catch(e){}};return t.isLoading?(0,s.jsx)(n.LN,{children:(0,s.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,s.jsx)(n.TK,{size:"lg"})})}):(0,s.jsxs)(n.LN,{children:[(0,s.jsx)(n.mr,{title:"Manager Dashboard",subtitle:"Executive performance summaries and strategic analytics",actions:(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)(n.Ph,{value:c,onChange:e=>d(e.target.value),options:[{value:"all",label:"All Locations"},{value:"ann_arbor",label:"Ann Arbor"},{value:"wixom",label:"Wixom"},{value:"plymouth",label:"Plymouth"}]}),(0,s.jsx)(n.Ph,{value:o,onChange:e=>m(e.target.value),options:[{value:"7d",label:"Last 7 Days"},{value:"30d",label:"Last 30 Days"},{value:"90d",label:"Last 90 Days"},{value:"1y",label:"Last Year"}]}),(0,s.jsx)(n.zx,{variant:"outline",onClick:x,children:"\uD83D\uDCCA Export Report"}),(0,s.jsx)(n.zx,{variant:"primary",onClick:()=>window.location.href="/management/campaigns",children:"\uD83C\uDFAF Manage Campaigns"})]})}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[(0,s.jsx)(n.Rm,{title:"Total Calls",value:t.executiveMetrics.total_calls||0,trend:t.executiveMetrics.calls_trend&&"neutral"!==t.executiveMetrics.calls_trend?{value:t.executiveMetrics.calls_change||0,direction:t.executiveMetrics.calls_trend}:void 0,icon:"phone"}),(0,s.jsx)(n.Rm,{title:"Revenue Impact",value:l(t.executiveMetrics.revenue_attributed||0),trend:t.executiveMetrics.revenue_trend&&"neutral"!==t.executiveMetrics.revenue_trend?{value:t.executiveMetrics.revenue_change||0,direction:t.executiveMetrics.revenue_trend}:void 0,icon:"dollar-sign"}),(0,s.jsx)(n.Rm,{title:"Avg Quality Score",value:"".concat(t.executiveMetrics.avg_quality_score||0,"%"),trend:t.executiveMetrics.quality_trend&&"neutral"!==t.executiveMetrics.quality_trend?{value:t.executiveMetrics.quality_change||0,direction:t.executiveMetrics.quality_trend}:void 0,icon:"star"}),(0,s.jsx)(n.Rm,{title:"Cost Per Call",value:l(t.executiveMetrics.cost_per_call||0),trend:t.executiveMetrics.cost_trend&&"neutral"!==t.executiveMetrics.cost_trend?{value:t.executiveMetrics.cost_change||0,direction:"up"===t.executiveMetrics.cost_trend?"down":"up"}:void 0,icon:"trending-down"}),(0,s.jsx)(n.Rm,{title:"Customer Satisfaction",value:"".concat(t.executiveMetrics.customer_satisfaction||0,"/5"),trend:t.executiveMetrics.satisfaction_trend&&"neutral"!==t.executiveMetrics.satisfaction_trend?{value:t.executiveMetrics.satisfaction_change||0,direction:t.executiveMetrics.satisfaction_trend}:void 0,icon:"heart"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)(n.Zb,{className:"p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-neutral-900 mb-4",children:"Performance Trends"}),(0,s.jsx)("div",{className:"h-64 flex items-center justify-center bg-gray-50 rounded",children:(0,s.jsx)("p",{className:"text-gray-500",children:"Performance trend chart will be displayed here"})})]}),(0,s.jsxs)(n.Zb,{className:"p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-neutral-900 mb-4",children:"Revenue Analysis"}),(0,s.jsx)("div",{className:"h-64 flex items-center justify-center bg-gray-50 rounded",children:(0,s.jsx)("p",{className:"text-gray-500",children:"Revenue analysis chart will be displayed here"})})]})]}),(0,s.jsxs)(n.Zb,{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-neutral-900",children:"Location Performance"}),(0,s.jsx)(n.zx,{variant:"outline",size:"sm",onClick:()=>window.location.href="/performance/team",children:"Detailed Analysis"})]}),(0,s.jsx)(n.wQ,{data:t.locationMetrics,columns:[{key:"location_name",header:"Location",sortable:!0},{key:"total_calls",header:"Total Calls",sortable:!0},{key:"avg_quality_score",header:"Quality Score",render:e=>"".concat(e.avg_quality_score,"%")},{key:"appointments_scheduled",header:"Appointments",sortable:!0},{key:"revenue_attributed",header:"Revenue",render:e=>l(e.revenue_attributed)},{key:"utilization_rate",header:"Utilization",render:e=>(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-2 mr-2",children:(0,s.jsx)("div",{className:"h-2 rounded-full ".concat(e.utilization_rate>=90?"bg-green-600":e.utilization_rate>=80?"bg-blue-600":e.utilization_rate>=70?"bg-yellow-600":"bg-red-600"),style:{width:"".concat(e.utilization_rate,"%")}})}),(0,s.jsxs)("span",{className:"text-sm font-medium",children:[e.utilization_rate,"%"]})]})}]})]}),(0,s.jsxs)(n.Zb,{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-neutral-900",children:"Campaign Performance"}),(0,s.jsx)(n.zx,{variant:"outline",size:"sm",onClick:()=>window.location.href="/management/campaigns",children:"Manage Campaigns"})]}),(0,s.jsx)(n.wQ,{data:t.campaignPerformance,columns:[{key:"campaign_name",header:"Campaign",sortable:!0},{key:"calls_attempted",header:"Calls Made",sortable:!0},{key:"conversion_rate",header:"Conversion Rate",render:e=>"".concat(e.conversion_rate,"%")},{key:"revenue_generated",header:"Revenue",render:e=>l(e.revenue_generated)},{key:"roi",header:"ROI",render:e=>(0,s.jsxs)("span",{className:"font-medium ".concat(e.roi>0?"text-green-600":"text-red-600"),children:[e.roi>0?"+":"",e.roi,"%"]})}]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)(n.Zb,{className:"p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-neutral-900 mb-4",children:"Key Insights"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"text-green-600 mr-2",children:"✅"}),(0,s.jsx)("span",{className:"text-sm font-medium text-green-900",children:"Quality scores improved 8% this month"})]})}),(0,s.jsx)("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"text-blue-600 mr-2",children:"\uD83D\uDCC8"}),(0,s.jsx)("span",{className:"text-sm font-medium text-blue-900",children:"Wixom location leading in appointment conversions"})]})}),(0,s.jsx)("div",{className:"p-4 bg-amber-50 rounded-lg border border-amber-200",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"text-amber-600 mr-2",children:"⚠️"}),(0,s.jsx)("span",{className:"text-sm font-medium text-amber-900",children:"Plymouth wait times above target (4:12 avg)"})]})})]})]}),(0,s.jsxs)(n.Zb,{className:"p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-neutral-900 mb-4",children:"Action Items"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsx)("input",{type:"checkbox",className:"mt-1 mr-3"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-neutral-900",children:"Review Plymouth staffing levels"}),(0,s.jsx)("div",{className:"text-xs text-neutral-600",children:"Due: End of week"})]})]}),(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsx)("input",{type:"checkbox",className:"mt-1 mr-3"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-neutral-900",children:"Implement Wixom best practices across locations"}),(0,s.jsx)("div",{className:"text-xs text-neutral-600",children:"Due: Next month"})]})]}),(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsx)("input",{type:"checkbox",className:"mt-1 mr-3"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-neutral-900",children:"Schedule Q1 performance reviews"}),(0,s.jsx)("div",{className:"text-xs text-neutral-600",children:"Due: Next quarter"})]})]})]})]})]})]})]})},{requiredRoles:["manager","superadmin"]})}},function(e){e.O(0,[946,848,888,774,179],function(){return e(e.s=2760)}),_N_E=e.O()}]);